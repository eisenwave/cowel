<!DOCTYPE html>
<html>
<head>
  <meta charset=UTF-8 /><meta name=viewport content="width=device-width, initial-scale=1"/><link rel=preconnect href=https://fonts.googleapis.com />
  <link rel=preconnect href=https://fonts.gstatic.com crossorigin/>
  <link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap"/>
  <style>
html {
    --sans-serif-family: "Noto Sans", sans-serif;
    --serif-family: "Noto Serif", serif;
    --monospace-family: "Fira Code", monospace;

    --light-background-color: white;
    --light-deep-background-color: #fafafa;
    --light-text-color: black;
    --light-border-color: #aaa;
    --light-table-border-color: #777;
    --light-del-color: #be1621;
    --light-del-background-color: #fbe6e8;
    --light-ins-color: #17752d;
    --light-ins-background-color: #e4faea;
    --light-para-color: rgb(10, 73, 136);
    --light-a-color: rgb(10, 73, 136);
    --light-a-visited-color: rgb(44, 10, 136);
    --light-a-hover-color: rgb(15, 93, 170);
    --light-mark-color: black;
    --light-mark-background-color: #ffff85;
    --light-abstract-border-color: #707070;
    --light-abstract-background-color: #f0f0f0;
    --light-abstract-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23707070"><path d="M660-160h40v-160h-40v160Zm20-200q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM200-800v640-640 200-200Zm80 400h147q11-23 25.5-43t32.5-37H280v80Zm0 160h123q-3-20-3-40t3-40H280v80ZM200-80q-33 0-56.5-23.5T120-160v-640q0-33 23.5-56.5T200-880h320l240 240v92q-19-6-39-9t-41-3v-40H480v-200H200v640h227q11 23 25.5 43T485-80H200Zm480-400q83 0 141.5 58.5T880-280q0 83-58.5 141.5T680-80q-83 0-141.5-58.5T480-280q0-83 58.5-141.5T680-480Z"/></svg>');
    --light-blockquote-border-color: #707070;
    --light-blockquote-background-color: #f0f0f0;
    --light-blockquote-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="%23707070"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M7.17 17c.51 0 .98-.29 1.2-.74l1.42-2.84c.14-.28.21-.58.21-.89V8c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h2l-1.03 2.06c-.45.89.2 1.94 1.2 1.94zm10 0c.51 0 .98-.29 1.2-.74l1.42-2.84c.14-.28.21-.58.21-.89V8c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h2l-1.03 2.06c-.45.89.2 1.94 1.2 1.94z"/></svg>');
    --light-bug-block-border-color: #9f7b5d;
    --light-bug-block-background-color: #f0e2d9;
    --light-bug-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%239f7b5d"><path d="M480-120q-64 0-114.5-33T283-240l-95 54-40-69 103-60q-3-11-5-22.5t-4-22.5H120v-80h122q2-12 4-23.5t5-22.5l-103-60 40-69 94 55q8-14 18.5-27.5T322-612q-2-7-2-14v-14q0-24 7-46t19-41l-66-66 56-57 70 68q17-9 35.5-13.5T480-800q20 0 39 5t36 14l69-69 56 57-66 66q12 19 18.5 41t6.5 46v13.5q0 6.5-2 13.5 11 11 21.5 25t18.5 28l95-54 40 69-104 59q3 11 5.5 22.5T718-440h122v80H718q-2 12-4 23.5t-5 22.5l103 60-40 69-95-55q-32 54-82.5 87T480-120Zm-76-546q17-7 36.5-10.5T480-680q20 0 38.5 3t35.5 10q-8-23-28-38t-46-15q-26 0-47 15.5T404-666Zm76 466q73 0 116.5-61T640-400q0-70-40.5-135T480-600q-78 0-119 64.5T320-400q0 78 43.5 139T480-200Zm-40-80v-240h80v240h-80Z"/></svg>');
    --light-decision-block-border-color: #ab6fa2;
    --light-decision-block-background-color: #f4e6f4;
    --light-decision-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23ab6fa2"><path d="M160-120v-80h480v80H160Zm226-194L160-540l84-86 228 226-86 86Zm254-254L414-796l86-84 226 226-86 86Zm184 408L302-682l56-56 522 522-56 56Z"/></svg>');
    --light-del-block-border-color: #be1621;
    --light-del-block-background-color: #fbe6e8;
    --light-del-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23be1621"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg>');
    --light-details-border-color: #707070;
    --light-details-background-color: #f0f0f0;
    --light-details-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23707070"><path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>');
    --light-diff-block-border-color: #707070;
    --light-diff-block-background-color: #f0f0f0;
    --light-diff-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23707070"><path d="M500-520h80v-80h80v-80h-80v-80h-80v80h-80v80h80v80Zm-80 160h240v-80H420v80ZM320-200q-33 0-56.5-23.5T240-280v-560q0-33 23.5-56.5T320-920h280l240 240v400q0 33-23.5 56.5T760-200H320Zm0-80h440v-360L560-840H320v560ZM160-40q-33 0-56.5-23.5T80-120v-560h80v560h440v80H160Zm160-240v-560 560Z"/></svg>');
    --light-example-block-border-color: #6f8aab;
    --light-example-block-background-color: #e6e9f4;
    --light-example-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%236f8aab"><path d="M300-80q-58 0-99-41t-41-99v-520q0-58 41-99t99-41h500v600q-25 0-42.5 17.5T740-220q0 25 17.5 42.5T800-160v80H300Zm-60-267q14-7 29-10t31-3h20v-440h-20q-25 0-42.5 17.5T240-740v393Zm160-13h320v-440H400v440Zm-160 13v-453 453Zm60 187h373q-6-14-9.5-28.5T660-220q0-16 3-31t10-29H300q-26 0-43 17.5T240-220q0 26 17 43t43 17Z"/></svg>');
    --light-important-block-border-color: #b05252;
    --light-important-block-background-color: #f4e6e6;
    --light-important-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23ab6f6f"><path d="M480-120q-33 0-56.5-23.5T400-200q0-33 23.5-56.5T480-280q33 0 56.5 23.5T560-200q0 33-23.5 56.5T480-120Zm-80-240v-480h160v480H400Z"/></svg>');
    --light-ins-block-border-color: #17752d;
    --light-ins-block-background-color: #e4faea;
    --light-ins-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%2317752d"><path d="M440-240h80v-120h120v-80H520v-120h-80v120H320v80h120v120ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"/></svg>');
    --light-note-block-border-color: #6fab6f;
    --light-note-block-background-color: #e6f4e9;
    --light-note-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%236fab6f"><path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>');
    --light-tip-block-border-color: #b0a029;
    --light-tip-block-background-color: #f4f4e6;
    --light-tip-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23b0a029"><path d="M480-80q-33 0-56.5-23.5T400-160h160q0 33-23.5 56.5T480-80ZM320-200v-80h320v80H320Zm10-120q-69-41-109.5-110T180-580q0-125 87.5-212.5T480-880q125 0 212.5 87.5T780-580q0 81-40.5 150T630-320H330Zm24-80h252q45-32 69.5-79T700-580q0-92-64-156t-156-64q-92 0-156 64t-64 156q0 54 24.5 101t69.5 79Zm126 0Z"/></svg>');
    --light-todo-block-border-color: #6faba0;
    --light-todo-block-background-color: #e6f4f3;
    --light-todo-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%236faba0"><path d="M680-80q-83 0-141.5-58.5T480-280q0-83 58.5-141.5T680-480q83 0 141.5 58.5T880-280q0 83-58.5 141.5T680-80Zm67-105 28-28-75-75v-112h-40v128l87 87Zm-547 65q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h167q11-35 43-57.5t70-22.5q40 0 71.5 22.5T594-840h166q33 0 56.5 23.5T840-760v250q-18-13-38-22t-42-16v-212h-80v120H280v-120h-80v560h212q7 22 16 42t22 38H200Zm280-640q17 0 28.5-11.5T520-800q0-17-11.5-28.5T480-840q-17 0-28.5 11.5T440-800q0 17 11.5 28.5T480-760Z"/></svg>');
    --light-warning-block-border-color: #af8141;
    --light-warning-block-background-color: #f4eee6;
    --light-warning-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23af8141"><path d="M109-120q-11 0-20-5.5T75-140q-5-9-5.5-19.5T75-180l370-640q6-10 15.5-15t19.5-5q10 0 19.5 5t15.5 15l370 640q6 10 5.5 20.5T885-140q-5 9-14 14.5t-20 5.5H109Zm69-80h604L480-720 178-200Zm302-40q17 0 28.5-11.5T520-280q0-17-11.5-28.5T480-320q-17 0-28.5 11.5T440-280q0 17 11.5 28.5T480-240Zm0-120q17 0 28.5-11.5T520-400v-120q0-17-11.5-28.5T480-560q-17 0-28.5 11.5T440-520v120q0 17 11.5 28.5T480-360Zm0-100Z"/></svg>');
    --light-theme-icon: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="black"><path d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z"/></svg>');

    --dark-background-color: #202020;
    --dark-deep-background-color: #1a1a1a;
    --dark-text-color: #f0f0f0;
    --dark-border-color: #505050;
    --dark-table-border-color: #777;
    --dark-del-background-color: #67060c;
    --dark-del-color: #ffdcd7;
    --dark-ins-background-color: #033a16;
    --dark-ins-color: #aff5b4;
    --dark-para-color: #5bc0ff;
    --dark-a-color: #5bc0ff;
    --dark-a-visited-color: #c6a8ff;
    --dark-a-hover-color: #afd7ff;
    --dark-mark-color: #ededa8;
    --dark-mark-background-color: #525230;
    --dark-abstract-border-color: #999999;
    --dark-abstract-background-color: #2c2c2c;
    --dark-abstract-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23999999"><path d="M660-160h40v-160h-40v160Zm20-200q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM200-800v640-640 200-200Zm80 400h147q11-23 25.5-43t32.5-37H280v80Zm0 160h123q-3-20-3-40t3-40H280v80ZM200-80q-33 0-56.5-23.5T120-160v-640q0-33 23.5-56.5T200-880h320l240 240v92q-19-6-39-9t-41-3v-40H480v-200H200v640h227q11 23 25.5 43T485-80H200Zm480-400q83 0 141.5 58.5T880-280q0 83-58.5 141.5T680-80q-83 0-141.5-58.5T480-280q0-83 58.5-141.5T680-480Z"/></svg>');
    --dark-blockquote-border-color: #707070;
    --dark-blockquote-background-color: #2c2c2c;
    --dark-blockquote-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="%23707070"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M7.17 17c.51 0 .98-.29 1.2-.74l1.42-2.84c.14-.28.21-.58.21-.89V8c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h2l-1.03 2.06c-.45.89.2 1.94 1.2 1.94zm10 0c.51 0 .98-.29 1.2-.74l1.42-2.84c.14-.28.21-.58.21-.89V8c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h2l-1.03 2.06c-.45.89.2 1.94 1.2 1.94z"/></svg>');
    --dark-bug-block-border-color: #ab866f;
    --dark-bug-block-background-color: #373028;
    --dark-bug-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23ab866f"><path d="M480-120q-64 0-114.5-33T283-240l-95 54-40-69 103-60q-3-11-5-22.5t-4-22.5H120v-80h122q2-12 4-23.5t5-22.5l-103-60 40-69 94 55q8-14 18.5-27.5T322-612q-2-7-2-14v-14q0-24 7-46t19-41l-66-66 56-57 70 68q17-9 35.5-13.5T480-800q20 0 39 5t36 14l69-69 56 57-66 66q12 19 18.5 41t6.5 46v13.5q0 6.5-2 13.5 11 11 21.5 25t18.5 28l95-54 40 69-104 59q3 11 5.5 22.5T718-440h122v80H718q-2 12-4 23.5t-5 22.5l103 60-40 69-95-55q-32 54-82.5 87T480-120Zm-76-546q17-7 36.5-10.5T480-680q20 0 38.5 3t35.5 10q-8-23-28-38t-46-15q-26 0-47 15.5T404-666Zm76 466q73 0 116.5-61T640-400q0-70-40.5-135T480-600q-78 0-119 64.5T320-400q0 78 43.5 139T480-200Zm-40-80v-240h80v240h-80Z"/></svg>');
    --dark-details-border-color: #707070;
    --dark-details-background-color: #2c2c2c;
    --dark-details-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23707070"><path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>');
    --dark-decision-block-border-color: #ab6fa2;
    --dark-decision-block-background-color: #30232d;
    --dark-decision-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23ab6fa2"><path d="M160-120v-80h480v80H160Zm226-194L160-540l84-86 228 226-86 86Zm254-254L414-796l86-84 226 226-86 86Zm184 408L302-682l56-56 522 522-56 56Z"/></svg>');
    --dark-del-block-border-color: #be5e64;
    --dark-del-block-background-color: #302323;
    --dark-del-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23be5e64"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg>');
    --dark-diff-block-border-color: #707070;
    --dark-diff-block-background-color: #2c2c2c;
    --dark-diff-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23707070"><path d="M500-520h80v-80h80v-80h-80v-80h-80v80h-80v80h80v80Zm-80 160h240v-80H420v80ZM320-200q-33 0-56.5-23.5T240-280v-560q0-33 23.5-56.5T320-920h280l240 240v400q0 33-23.5 56.5T760-200H320Zm0-80h440v-360L560-840H320v560ZM160-40q-33 0-56.5-23.5T80-120v-560h80v560h440v80H160Zm160-240v-560 560Z"/></svg>');
    --dark-example-block-border-color: #6f81ab;
    --dark-example-block-background-color: #232630;
    --dark-example-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%236f81ab"><path d="M300-80q-58 0-99-41t-41-99v-520q0-58 41-99t99-41h500v600q-25 0-42.5 17.5T740-220q0 25 17.5 42.5T800-160v80H300Zm-60-267q14-7 29-10t31-3h20v-440h-20q-25 0-42.5 17.5T240-740v393Zm160-13h320v-440H400v440Zm-160 13v-453 453Zm60 187h373q-6-14-9.5-28.5T660-220q0-16 3-31t10-29H300q-26 0-43 17.5T240-220q0 26 17 43t43 17Z"/></svg>');
    --dark-important-block-border-color: #b06262;
    --dark-important-block-background-color: #302323;
    --dark-important-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23b06262"><path d="M480-120q-33 0-56.5-23.5T400-200q0-33 23.5-56.5T480-280q33 0 56.5 23.5T560-200q0 33-23.5 56.5T480-120Zm-80-240v-480h160v480H400Z"/></svg>');
    --dark-ins-block-border-color: #5bab6d;
    --dark-ins-block-background-color: #233023;
    --dark-ins-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%235bab6d"><path d="M440-240h80v-120h120v-80H520v-120h-80v120H320v80h120v120ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"/></svg>');
    --dark-note-block-border-color: #6fab76;
    --dark-note-block-background-color: #233025;
    --dark-note-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%236fab76"><path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>');
    --dark-tip-block-border-color: #a2ab6f;
    --dark-tip-block-background-color: #2f3023;
    --dark-tip-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23a2ab6f"><path d="M480-80q-33 0-56.5-23.5T400-160h160q0 33-23.5 56.5T480-80ZM320-200v-80h320v80H320Zm10-120q-69-41-109.5-110T180-580q0-125 87.5-212.5T480-880q125 0 212.5 87.5T780-580q0 81-40.5 150T630-320H330Zm24-80h252q45-32 69.5-79T700-580q0-92-64-156t-156-64q-92 0-156 64t-64 156q0 54 24.5 101t69.5 79Zm126 0Z"/></svg>');
    --dark-todo-block-border-color: #6fab98;
    --dark-todo-block-background-color: #23302e;
    --dark-todo-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%236fab98"><path d="M680-80q-83 0-141.5-58.5T480-280q0-83 58.5-141.5T680-480q83 0 141.5 58.5T880-280q0 83-58.5 141.5T680-80Zm67-105 28-28-75-75v-112h-40v128l87 87Zm-547 65q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h167q11-35 43-57.5t70-22.5q40 0 71.5 22.5T594-840h166q33 0 56.5 23.5T840-760v250q-18-13-38-22t-42-16v-212h-80v120H280v-120h-80v560h212q7 22 16 42t22 38H200Zm280-640q17 0 28.5-11.5T520-800q0-17-11.5-28.5T480-840q-17 0-28.5 11.5T440-800q0 17 11.5 28.5T480-760Z"/></svg>');
    --dark-warning-block-border-color: #ab9c6f;
    --dark-warning-block-background-color: #302b23;
    --dark-warning-block-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23ab9c6f"><path d="M109-120q-11 0-20-5.5T75-140q-5-9-5.5-19.5T75-180l370-640q6-10 15.5-15t19.5-5q10 0 19.5 5t15.5 15l370 640q6 10 5.5 20.5T885-140q-5 9-14 14.5t-20 5.5H109Zm69-80h604L480-720 178-200Zm302-40q17 0 28.5-11.5T520-280q0-17-11.5-28.5T480-320q-17 0-28.5 11.5T440-280q0 17 11.5 28.5T480-240Zm0-120q17 0 28.5-11.5T520-400v-120q0-17-11.5-28.5T480-560q-17 0-28.5 11.5T440-520v120q0 17 11.5 28.5T480-360Zm0-100Z"/></svg>');
    --dark-theme-icon: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="%23f0f0f0"><path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z"/></svg>');

    --indent: 2.5em;
    --border-radius: 0.25em;
}

/* BEGIN LIGHT AND DARK THEME */

@media (prefers-color-scheme: light) {
    html {
        --background-color: var(--light-background-color);
        --deep-background-color: var(--light-deep-background-color);
        --text-color: var(--light-text-color);
        --border-color: var(--light-border-color);
        --table-border-color: var(--light-table-border-color);
        --del-color: var(--light-del-color);
        --del-background-color: var(--light-del-background-color);
        --ins-color: var(--light-ins-color);
        --ins-background-color: var(--light-ins-background-color);
        --para-color: var(--light-para-color);
        --a-color: var(--light-a-color);
        --a-visited-color: var(--light-a-visited-color);
        --a-hover-color: var(--light-a-hover-color);
        --mark-color: var(--light-mark-color);
        --mark-background-color: var(--light-mark-background-color);
        --abstract-border-color: var(--light-abstract-border-color);
        --abstract-background-color: var(--light-abstract-background-color);
        --abstract-image: var(--light-abstract-image);
        --blockquote-border-color: var(--light-blockquote-border-color);
        --blockquote-background-color: var(--light-blockquote-background-color);
        --blockquote-image: var(--light-blockquote-image);
        --bug-block-border-color: var(--light-bug-block-border-color);
        --bug-block-background-color: var(--light-bug-block-background-color);
        --bug-block-image: var(--light-bug-block-image);
        --decision-block-border-color: var(--light-decision-block-border-color);
        --decision-block-background-color: var(--light-decision-block-background-color);
        --decision-block-image: var(--light-decision-block-image);
        --del-block-border-color: var(--light-del-block-border-color);
        --del-block-background-color: var(--light-del-block-background-color);
        --del-block-image: var(--light-del-block-image);
        --details-border-color: var(--light-details-border-color);
        --details-background-color: var(--light-details-background-color);
        --details-image: var(--light-details-image);
        --diff-block-border-color: var(--light-diff-block-border-color);
        --diff-block-background-color: var(--light-diff-block-background-color);
        --diff-block-image: var(--light-diff-block-image);
        --example-block-border-color: var(--light-example-block-border-color);
        --example-block-background-color: var(--light-example-block-background-color);
        --example-block-image: var(--light-example-block-image);
        --important-block-border-color: var(--light-important-block-border-color);
        --important-block-background-color: var(--light-important-block-background-color);
        --important-block-image: var(--light-important-block-image);
        --ins-block-border-color: var(--light-ins-block-border-color);
        --ins-block-background-color: var(--light-ins-block-background-color);
        --ins-block-image: var(--light-ins-block-image);
        --note-block-border-color: var(--light-note-block-border-color);
        --note-block-background-color: var(--light-note-block-background-color);
        --note-block-image: var(--light-note-block-image);
        --tip-block-border-color: var(--light-tip-block-border-color);
        --tip-block-background-color: var(--light-tip-block-background-color);
        --tip-block-image: var(--light-tip-block-image);
        --todo-block-border-color: var(--light-todo-block-border-color);
        --todo-block-background-color: var(--light-todo-block-background-color);
        --todo-block-image: var(--light-todo-block-image);
        --warning-block-border-color: var(--light-warning-block-border-color);
        --warning-block-background-color: var(--light-warning-block-background-color);
        --warning-block-image: var(--light-warning-block-image);
        --theme-icon: var(--light-theme-icon);
    }
}

@media (prefers-color-scheme: dark) {
    html {
        --background-color: var(--dark-background-color);
        --deep-background-color: var(--dark-deep-background-color);
        --text-color: var(--dark-text-color);
        --border-color: var(--dark-border-color);
        --table-border-color: var(--dark-table-border-color);
        --del-color: var(--dark-del-color);
        --del-background-color: var(--dark-del-background-color);
        --ins-color: var(--dark-ins-color);
        --ins-background-color: var(--dark-ins-background-color);
        --para-color: var(--dark-para-color);
        --a-color: var(--dark-a-color);
        --a-visited-color: var(--dark-a-visited-color);
        --a-hover-color: var(--dark-a-hover-color);
        --mark-color: var(--dark-mark-color);
        --mark-background-color: var(--dark-mark-background-color);
        --abstract-border-color: var(--dark-abstract-border-color);
        --abstract-background-color: var(--dark-abstract-background-color);
        --abstract-image: var(--dark-abstract-image);
        --blockquote-border-color: var(--dark-blockquote-border-color);
        --blockquote-background-color: var(--dark-blockquote-background-color);
        --blockquote-image: var(--dark-blockquote-image);
        --bug-block-border-color: var(--dark-bug-block-border-color);
        --bug-block-background-color: var(--dark-bug-block-background-color);
        --bug-block-image: var(--dark-bug-block-image);
        --decision-block-border-color: var(--dark-decision-block-border-color);
        --decision-block-background-color: var(--dark-decision-block-background-color);
        --decision-block-image: var(--dark-decision-block-image);
        --del-block-border-color: var(--dark-del-block-border-color);
        --del-block-background-color: var(--dark-del-block-background-color);
        --del-block-image: var(--dark-del-block-image);
        --details-border-color: var(--dark-details-border-color);
        --details-background-color: var(--dark-details-background-color);
        --details-image: var(--dark-details-image);
        --diff-block-border-color: var(--dark-diff-block-border-color);
        --diff-block-background-color: var(--dark-diff-block-background-color);
        --diff-block-image: var(--dark-diff-block-image);
        --example-block-border-color: var(--dark-example-block-border-color);
        --example-block-background-color: var(--dark-example-block-background-color);
        --example-block-image: var(--dark-example-block-image);
        --important-block-border-color: var(--dark-important-block-border-color);
        --important-block-background-color: var(--dark-important-block-background-color);
        --important-block-image: var(--dark-important-block-image);
        --ins-block-border-color: var(--dark-ins-block-border-color);
        --ins-block-background-color: var(--dark-ins-block-background-color);
        --ins-block-image: var(--dark-ins-block-image);
        --note-block-border-color: var(--dark-note-block-border-color);
        --note-block-background-color: var(--dark-note-block-background-color);
        --note-block-image: var(--dark-note-block-image);
        --tip-block-border-color: var(--dark-tip-block-border-color);
        --tip-block-background-color: var(--dark-tip-block-background-color);
        --tip-block-image: var(--dark-tip-block-image);
        --todo-block-border-color: var(--dark-todo-block-border-color);
        --todo-block-background-color: var(--dark-todo-block-background-color);
        --todo-block-image: var(--dark-todo-block-image);
        --warning-block-border-color: var(--dark-warning-block-border-color);
        --warning-block-background-color: var(--dark-warning-block-background-color);
        --warning-block-image: var(--dark-warning-block-image);
        --theme-icon: var(--dark-theme-icon);
    }
}

html.light {
    --background-color: var(--light-background-color);
    --deep-background-color: var(--light-deep-background-color);
    --text-color: var(--light-text-color);
    --border-color: var(--light-border-color);
    --table-border-color: var(--light-table-border-color);
    --del-color: var(--light-del-color);
    --del-background-color: var(--light-del-background-color);
    --ins-color: var(--light-ins-color);
    --ins-background-color: var(--light-ins-background-color);
    --para-color: var(--light-para-color);
    --a-color: var(--light-a-color);
    --a-visited-color: var(--light-a-visited-color);
    --a-hover-color: var(--light-a-hover-color);
    --mark-color: var(--light-mark-color);
    --mark-background-color: var(--light-mark-background-color);
    --abstract-border-color: var(--light-abstract-border-color);
    --abstract-background-color: var(--light-abstract-background-color);
    --abstract-image: var(--light-abstract-image);
    --blockquote-border-color: var(--light-blockquote-border-color);
    --blockquote-background-color: var(--light-blockquote-background-color);
    --blockquote-image: var(--light-blockquote-image);
    --bug-block-border-color: var(--light-bug-block-border-color);
    --bug-block-background-color: var(--light-bug-block-background-color);
    --bug-block-image: var(--light-bug-block-image);
    --decision-block-border-color: var(--light-decision-block-border-color);
    --decision-block-background-color: var(--light-decision-block-background-color);
    --decision-block-image: var(--light-decision-block-image);
    --del-block-border-color: var(--light-del-block-border-color);
    --del-block-background-color: var(--light-del-block-background-color);
    --del-block-image: var(--light-del-block-image);
    --details-border-color: var(--light-details-border-color);
    --details-background-color: var(--light-details-background-color);
    --details-image: var(--light-details-image);
    --diff-block-border-color: var(--light-diff-block-border-color);
    --diff-block-background-color: var(--light-diff-block-background-color);
    --diff-block-image: var(--light-diff-block-image);
    --example-block-border-color: var(--light-example-block-border-color);
    --example-block-background-color: var(--light-example-block-background-color);
    --example-block-image: var(--light-example-block-image);
    --important-block-border-color: var(--light-important-block-border-color);
    --important-block-background-color: var(--light-important-block-background-color);
    --important-block-image: var(--light-important-block-image);
    --ins-block-border-color: var(--light-ins-block-border-color);
    --ins-block-background-color: var(--light-ins-block-background-color);
    --ins-block-image: var(--light-ins-block-image);
    --note-block-border-color: var(--light-note-block-border-color);
    --note-block-background-color: var(--light-note-block-background-color);
    --note-block-image: var(--light-note-block-image);
    --tip-block-border-color: var(--light-tip-block-border-color);
    --tip-block-background-color: var(--light-tip-block-background-color);
    --tip-block-image: var(--light-tip-block-image);
    --todo-block-border-color: var(--light-todo-block-border-color);
    --todo-block-background-color: var(--light-todo-block-background-color);
    --todo-block-image: var(--light-todo-block-image);
    --warning-block-border-color: var(--light-warning-block-border-color);
    --warning-block-background-color: var(--light-warning-block-background-color);
    --warning-block-image: var(--light-warning-block-image);
    --theme-icon: var(--light-theme-icon);
}

html.dark {
    --background-color: var(--dark-background-color);
    --deep-background-color: var(--dark-deep-background-color);
    --text-color: var(--dark-text-color);
    --border-color: var(--dark-border-color);
    --table-border-color: var(--dark-table-border-color);
    --del-color: var(--dark-del-color);
    --del-background-color: var(--dark-del-background-color);
    --ins-color: var(--dark-ins-color);
    --ins-background-color: var(--dark-ins-background-color);
    --para-color: var(--dark-para-color);
    --a-color: var(--dark-a-color);
    --a-visited-color: var(--dark-a-visited-color);
    --a-hover-color: var(--dark-a-hover-color);
    --mark-color: var(--dark-mark-color);
    --mark-background-color: var(--dark-mark-background-color);
    --abstract-border-color: var(--dark-abstract-border-color);
    --abstract-background-color: var(--dark-abstract-background-color);
    --abstract-image: var(--dark-abstract-image);
    --blockquote-border-color: var(--dark-blockquote-border-color);
    --blockquote-background-color: var(--dark-blockquote-background-color);
    --blockquote-image: var(--dark-blockquote-image);
    --bug-block-border-color: var(--dark-bug-block-border-color);
    --bug-block-background-color: var(--dark-bug-block-background-color);
    --bug-block-image: var(--dark-bug-block-image);
    --decision-block-border-color: var(--dark-decision-block-border-color);
    --decision-block-background-color: var(--dark-decision-block-background-color);
    --decision-block-image: var(--dark-decision-block-image);
    --del-block-border-color: var(--dark-del-block-border-color);
    --del-block-background-color: var(--dark-del-block-background-color);
    --del-block-image: var(--dark-del-block-image);
    --details-border-color: var(--dark-details-border-color);
    --details-background-color: var(--dark-details-background-color);
    --details-image: var(--dark-details-image);
    --diff-block-border-color: var(--dark-diff-block-border-color);
    --diff-block-background-color: var(--dark-diff-block-background-color);
    --diff-block-image: var(--dark-diff-block-image);
    --example-block-border-color: var(--dark-example-block-border-color);
    --example-block-background-color: var(--dark-example-block-background-color);
    --example-block-image: var(--dark-example-block-image);
    --important-block-border-color: var(--dark-important-block-border-color);
    --important-block-background-color: var(--dark-important-block-background-color);
    --important-block-image: var(--dark-important-block-image);
    --ins-block-border-color: var(--dark-ins-block-border-color);
    --ins-block-background-color: var(--dark-ins-block-background-color);
    --ins-block-image: var(--dark-ins-block-image);
    --note-block-border-color: var(--dark-note-block-border-color);
    --note-block-background-color: var(--dark-note-block-background-color);
    --note-block-image: var(--dark-note-block-image);
    --tip-block-border-color: var(--dark-tip-block-border-color);
    --tip-block-background-color: var(--dark-tip-block-background-color);
    --tip-block-image: var(--dark-tip-block-image);
    --todo-block-border-color: var(--dark-todo-block-border-color);
    --todo-block-background-color: var(--dark-todo-block-background-color);
    --todo-block-image: var(--dark-todo-block-image);
    --warning-block-border-color: var(--dark-warning-block-border-color);
    --warning-block-background-color: var(--dark-warning-block-background-color);
    --warning-block-image: var(--dark-warning-block-image);
    --theme-icon: var(--dark-theme-icon);
}

/* END LIGHT AND DARK THEME */

html {
    margin: 0;
    width: 100%;
    font-family: var(--serif-family);
    font-size: 11pt;

    border-left: var(--border-thickness) solid var(--border-color);
    color: var(--text-color);
    background-color: var(--background-color);
}

body {
    --vertical-margin: 2rem;
    --margin-left: 3rem;
    --margin-right: 2rem;

    margin: var(--vertical-margin) var(--margin-right) var(--vertical-margin) var(--margin-left);
    width: calc(100% - var(--margin-left) - var(--margin-right));
    box-sizing: border-box;
}

main {
    max-width: 60rem;
    margin-left: auto;
    margin-right: auto;
}

p {
    text-align: justify;
}

abstract-block,
blockquote,
bug-block,
code-block,
decision-block,
del-block,
details,
dl,
diff-block,
example-block,
hr,
ol,
important-block,
ins-block,
math[display=block],
note-block,
p,
pre,
tip-block,
todo-block,
ul,
warning-block,
.indent {
    display: block;
    margin-top: 1em;
    margin-bottom: 1em;
}

a {
    color: var(--a-color);
    text-decoration: unset;
}

a:visited {
    color: var(--a-visited-color);
}

a:hover,
a:focus {
    color: var(--a-hover-color);
}

a:hover {
    text-decoration: underline;
}

ol,
ul {
    padding-left: var(--indent);
}

li {
    margin: 0.5em 0;
}

dt {
    margin-top: 0.25em;
    font-style: italic;
    font-weight: bold;
}

dd {
    margin-bottom: 0.25em;
    margin-left: var(--indent);
}

abstract-block,
blockquote,
bug-block,
del-block,
details,
decision-block,
diff-block,
example-block,
important-block,
ins-block,
note-block,
tip-block,
todo-block,
warning-block {
    --border-thickness: 0.25em;
    --padding: 0.5em;

    position: relative;
    width: calc(100% - var(--indent));
    box-sizing: border-box;
    padding: var(--padding);
    margin-left: var(--indent);

    border-top-right-radius: var(--border-radius);
    border-bottom-right-radius: var(--border-radius);
}

abstract-block>:first-child,
blockquote>:first-child,
bug-block>:first-child,
del-block>:first-child,
details>:first-child,
decision-block>:first-child,
diff-block>:first-child,
example-block>:first-child,
important-block>:first-child,
ins-block>:first-child,
note-block>:first-child,
tip-block>:first-child,
todo-block>:first-child,
warning-block>:first-child {
    margin-top: 0;
}

abstract-block>:last-child,
blockquote>:last-child,
bug-block>:last-child,
del-block>:last-child,
details>:last-child,
decision-block>:last-child,
diff-block>:last-child,
example-block>:last-child,
important-block>:last-child,
ins-block>:last-child,
note-block>:last-child,
todo-block>:last-child,
tip-block>:last-child,
warning-block>:last-child {
    margin-bottom: 0;
}

abstract-block::before,
blockquote::before,
bug-block::before,
del-block::before,
details::before,
decision-block::before,
diff-block::before,
example-block::before,
important-block::before,
ins-block::before,
note-block::before,
todo-block::before,
tip-block::before,
warning-block::before {
    position: absolute;
    left: -2.5em;
    top: 0.25em;
    width: 2em;
    height: 2em;

    content: "";
    display: inline-block;
    background-size: contain;
    background-repeat: no-repeat;

}

code,
code-block,
pre,
samp,
tt,
tt-,
.mono {
    font-family: var(--monospace-family);
    font-style: normal;
    font-variant-ligatures: none;
}

code-block:not(.borderless),
pre {
    padding: 0.5em;
    border-radius: var(--border-radius);
    box-sizing: border-box;

    background-color: var(--deep-background-color);
    border: 1px solid var(--border-color);
}

code-block,
pre {
    font-size: 95%;
    width: 100%;
}

code-block,
pre {
    white-space: pre;
    overflow-x: auto;
}

/* INSERTIONS AND DELETIONS */

ins,
ins-lines {
    text-decoration: underline;
    font-weight: 600;
    color: var(--ins-color);
    background-color: var(--ins-background-color);
}

code-block ins,
code-block ins-lines {
    text-decoration: inherit;
}

del {
    text-decoration: line-through;
}

del,
del-lines {
    color: var(--del-color);
    background-color: var(--del-background-color);
}

ins-lines,
del-lines {
    display: inline-block;
    width: 100%;
}

ins h-,
ins-lines h-,
del h-,
del-lines h- {
    color: inherit !important;
    background-color: inherit !important;
}

kbd {
    font-family: var(--sans-serif-family);

    display: inline-block;
    padding: 0 0.25em 0.15em 0.25em;
    border-radius: 0.25em;
    white-space: nowrap;

    background-color: var(--deep-background-color);
    border: 1px solid var(--border-color);
    box-shadow: inset 0 -0.1em 0 var(--border-color);
}

mark {
    color: var(--mark-color);
    background-color: var(--mark-background-color);
}

math:not([display=block]) {
    font-size: 120%;
}

math[display=block] {
    width: fit-content;
    margin-left: var(--indent);

    font-size: 110%;
}

g-term,
f-sans,
f-serif,
wg21-block {
    display: inline;
}

f-sans,
.sans {
    font-family: var(--sans-serif-family);
}

f-serif,
.serif {
    font-family: var(--serif-family);
}

.grammar dd,
g-term {
    font-family: var(--sans-serif-family);
    font-style: oblique;
}

.grammar {
    margin-left: var(--indent);
}

.grammar dt {
    font-weight: normal;
    font-style: normal;
}

.oblique {
    font-style: oblique;
}

.word {
    white-space: nowrap;
}

.wg21-head {
    margin-bottom: 4em;
}

.wg21-head dl {
    font-family: var(--sans-serif-family);
}

.wg21-head dt {
    font-style: normal;
}

/* HEADINGS */

h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin: 1rem 0;
}

h1 {
    margin: 2rem 0 1.5rem 0;
    font-size: 250%;
}

h2 {
    margin: 2.5rem 0 1.5rem 0;
    font-size: 166%;
}

h3 {
    margin: 2rem 0 1rem 0;
    font-size: 133%;
}

h4 {
    margin: 1.5rem 0 0.5rem 0;
    font-size: 100%;
}

h5 {
    margin: 1rem 0 0.5rem 0;
    font-size: 100%;
    font-weight: normal;
}

h6 {
    margin: 1rem 0 0.5rem 0;
    font-size: 90%;
    font-weight: normal;
}

table {
    --border: 1px solid var(--table-border-color);

    margin-top: 1em;
    margin-bottom: 1em;
    border-collapse: collapse;
}

table,
tbody,
thead,
th {
    border: var(--border);
}

td {
    border-left: var(--border);
    border-right: var(--border);
}

td,
th {
    padding: 0.1em 0.5em;
}

.para {
    cursor: pointer;
    font-weight: normal;
    font-family: var(--monospace-family);
    text-decoration: none;
    opacity: 0.25;

    position: absolute;
    top: 0.05em;
    left: calc(-1rem - 0.5ch);
}

.para,
.para::before {
    color: var(--para-color);
}

.para:hover,
.para:focus,
:target .para {
    opacity: 1;
}

.para::before {
    content: "ยง";
}

/* TABLE OF CONTENTS */

.toc {
    --h-indent: 0.75em;

    display: grid;
    grid-template-columns: min-content auto;
}

.toc-num {
    display: inline-block;
    align-self: end;
    padding-right: 3em;

    letter-spacing: 0em;
}

.toc h1,
.toc h2,
.toc h3,
.toc h4,
.toc h5,
.toc h6 {
    display: inline-block;

    font-weight: 500;
    font-size: 12pt;

    margin-top: 0;
    margin-bottom: 0;
}

.toc a,
.toc-num {
    border-bottom: 1px solid rgba(0, 0, 0, 0);
    color: var(--text-color);
}

.toc h1,
.toc-num[data-level="1"] {
    font-size: 125%;
    font-weight: 900;
}

.toc h2,
.toc-num[data-level="2"] {
    font-weight: 700;
}

.toc h3,
.toc-num[data-level="3"] {
    font-weight: 500;
}

.toc h4,
.toc-num[data-level="4"] {
    font-size: 95%;
    font-weight: 400;
}

.toc h5,
.toc-num[data-level="5"] {
    font-size: 90%;
    font-weight: 300;
}

.toc h6,
.toc-num[data-level="6"] {
    font-size: 90%;
    font-weight: 100;
}

.toc a:hover {
    display: inline-block;
    width: 100%;

    color: var(--a-hover-color);
    border-bottom: 1px dashed var(--a-hover-color);
}

.toc h1:not(:nth-child(2)>h1) {
    margin-top: 1.5em;
}

.toc h2:not(:nth-child(2)>h2) {
    margin-top: 0.75em;
}

/** BIBLIOGRAPHY */

.bib {
    display: block;
    margin: 1em 0;
}

.bib-item {
    display: inline-block;
    width: 100%;
    margin: 0.25em 0;
}

.bib-item>* {
    padding: 0 0.125em;
}

.bib-author {
    font-style: italic;
}

.bib-title {
    font-weight: 500;
}

.bib-date {
    font-family: var(--monospace-family);
}

.bib-date::before {
    font-family: var(--serif-family);
    content: "(";
}

.bib-date::after {
    font-family: var(--serif-family);
    content: ")";
}

.bib-link {
    display: block;
    margin-left: var(--indent);

    font-family: var(--sans-serif-family);
    font-style: normal;
}

/* SPECIAL BLOCKS */

intro- {
    display: inline-block;

    font-weight: 600;
    text-transform: uppercase;
    font-family: var(--sans-serif-family);
}

abstract-block {
    background-color: var(--abstract-background-color);
    border-left: var(--border-thickness) solid var(--abstract-border-color);
}

abstract-block::before {
    background-image: var(--abstract-image);
}

abstract-block intro-::before {
    content: "Abstract:";
    color: var(--abstract-border-color);
}

blockquote {
    background-color: var(--blockquote-background-color);
    border-left: var(--border-thickness) solid var(--blockquote-border-color);
}

blockquote::before {
    background-image: var(--blockquote-image);
    top: -0.25em;
}

blockquote intro-::before {
    content: "Quote:";
    color: var(--blockquote-border-color);
}

bug-block {
    background-color: var(--bug-block-background-color);
    border-left: var(--border-thickness) solid var(--bug-block-border-color);
}

bug-block::before {
    background-image: var(--bug-block-image);
}

bug-block intro-::before {
    content: "Bug:";
    color: var(--bug-block-border-color);
}

del-block {
    background-color: var(--del-block-background-color);
    border-left: var(--border-thickness) solid var(--del-block-border-color);
    color: var(--del-color);
}

del-block::before {
    background-image: var(--del-block-image);
}

del-block intro-::before {
    content: "Deleted:";
    color: var(--del-block-border-color);
}

del-block code,
del-block code-block {
    color: var(--text-color);
}

details {
    background-color: var(--details-background-color);
    border-left: var(--border-thickness) solid var(--details-border-color);
}

details::before {
    background-image: var(--details-image);
}

summary {
    font-family: var(--sans-serif-family);
    color: var(--details-border-color);
    user-select: none;
    cursor: pointer;
}

details[open]>summary {
    margin-bottom: 0.5em;
}

decision-block {
    background-color: var(--decision-block-background-color);
    border-left: var(--border-thickness) solid var(--decision-block-border-color);
}

decision-block::before {
    background-image: var(--decision-block-image);
}

decision-block intro-::before {
    content: "Decision:";
    color: var(--decision-block-border-color);
}

diff-block {
    background-color: var(--diff-block-background-color);
    border-left: var(--border-thickness) solid var(--diff-block-border-color);
}

diff-block::before {
    background-image: var(--diff-block-image);
}

diff-block intro-::before {
    content: "Difference:";
    color: var(--diff-block-border-color);
}

example-block {
    background-color: var(--example-block-background-color);
    border-left: var(--border-thickness) solid var(--example-block-border-color);
}

example-block::before {
    background-image: var(--example-block-image);
}

example-block intro-::before {
    content: "Example:";
    color: var(--example-block-border-color);
}

important-block {
    background-color: var(--important-block-background-color);
    border-left: var(--border-thickness) solid var(--important-block-border-color);
}

important-block::before {
    background-image: var(--important-block-image);
}

important-block intro-::before {
    content: "Important:";
    color: var(--important-block-border-color);
}

ins-block {
    background-color: var(--ins-block-background-color);
    border-left: var(--border-thickness) solid var(--ins-block-border-color);
    color: var(--ins-color);
}

ins-block code,
ins-block code-block {
    color: var(--text-color);
}

ins-block::before {
    background-image: var(--ins-block-image);
}

ins-block intro-::before {
    content: "Inserted:";
    color: var(--ins-block-border-color);
}

note-block {
    background-color: var(--note-block-background-color);
    border-left: var(--border-thickness) solid var(--note-block-border-color);
}

note-block::before {
    background-image: var(--note-block-image);
}

note-block intro-::before {
    content: "Note:";
    color: var(--note-block-border-color);
}

tip-block {
    background-color: var(--tip-block-background-color);
    border-left: var(--border-thickness) solid var(--tip-block-border-color);
}

tip-block::before {
    background-image: var(--tip-block-image);
}

tip-block intro-::before {
    content: "Tip:";
    color: var(--tip-block-border-color);
}

todo-block {
    background-color: var(--todo-block-background-color);
    border-left: var(--border-thickness) solid var(--todo-block-border-color);
}

todo-block::before {
    background-image: var(--todo-block-image);
}

todo-block intro-::before {
    content: "Todo:";
    color: var(--todo-block-border-color);
}

warning-block {
    background-color: var(--warning-block-background-color);
    border-left: var(--border-thickness) solid var(--warning-block-border-color);
}

warning-block::before {
    background-image: var(--warning-block-image);
}

warning-block intro-::before {
    content: "Warning:";
    color: var(--warning-block-border-color);
}

.indent {
    margin-left: var(--indent);
}

/* SETTINGS MENU */

#settings:not(.js) {
    display: none;
}

#settings {
    z-index: 999;
    position: fixed;
    display: inline-block;
    top: 1em;
    right: 1em;
}

#theme-icon {
    display: block;
    width: 2.5em;
    height: 2.5em;
    cursor: pointer;
    background-image: var(--theme-icon);
    background-size: contain;
    opacity: 0.25;
}

#theme-icon:hover,
#theme-icon:focus {
    opacity: 1;
}
  </style>
  <style>
@media (prefers-color-scheme: light) {
h-[data-h^=err] { color:#ff0000; }
h-[data-h^=cmt] { color:green; font-style:italic; }
h-[data-h^=cmt_dlim] { font-style:normal; }
h-[data-h^=cmt_doc] { color:green; font-style:italic; }
h-[data-h^=cmt_doc_dlim] { font-style:normal; }
h-[data-h^=val] { color:#9f6807; }
h-[data-h^=null] { color:#00607c; }
h-[data-h^=bool] { color:#9f6807; }
h-[data-h^=num] { color:#9f6807; }
h-[data-h^=str] { color:#9f6807; }
h-[data-h^=str_esc] { color:#70400c; }
h-[data-h^=str_intp] { color:#70400c; }
h-[data-h^=name] { color:#000000; }
h-[data-h^=name_labl] { color:#517a0b; }
h-[data-h^=name_life] { color:#517a0b; }
h-[data-h^=name_nt] { font-style:italic; }
h-[data-h^=name_nt_decl] { color:#00607c; font-style:italic; }
h-[data-h^=name_cmd] { color:#00607c; }
h-[data-h^=name_opt] { color:#000000; }
h-[data-h^=name_inst] { color:#00607c; }
h-[data-h^=asm_inst_pre] { color:#9f6807; }
h-[data-h^=name_mac] { color:#6f4e37; }
h-[data-h^=name_dirt] { color:#6f4e37; }
h-[data-h^=kw] { color:#00607c; }
h-[data-h^=kw_this] { color:#00607c; }
h-[data-h^=diff_head] { color:#777777; }
h-[data-h^=diff_head_hunk] { color:#5c477e; }
h-[data-h^=diff_eq] { color:#000000; }
h-[data-h^=diff_del] { color:#b31d28; background-color:#ffeef0; }
h-[data-h^=diff_ins] { color:#22863a; background-color:#f0fff4; }
h-[data-h^=diff_mod] { color:#7a680d; background-color:#fffdee; }
h-[data-h^=mk_tag] { color:#00607c; }
h-[data-h^=mk_attr] { color:#5c477e; }
h-[data-h^=text_del] { color:#ce9178; text-decoration:line-through; }
h-[data-h^=text_ins] { color:#b5cea8; text-decoration:underline; }
h-[data-h^=text_emph] { font-style:italic; }
h-[data-h^=text_stro] { font-weight:bold; }
h-[data-h^=text_ulin] { text-decoration:underline; }
h-[data-h^=text_strk] { text-decoration:line-through; }
h-[data-h^=sym] { color:#570057; }
h-[data-h^=sym_punc] { color:#000000; }
h-[data-h^=sym_bket] { color:#af1915; }
h-[data-h^=sym_par] { color:#af1915; }
h-[data-h^=sym_sqr] { color:#af1915; }
h-[data-h^=sym_brac] { color:#af1915; }
}
@media (prefers-color-scheme: dark) {
h-[data-h^=err] { color:#ff0000; }
h-[data-h^=cmt] { color:#a2e08d; font-style:italic; }
h-[data-h^=cmt_doc] { color:#a2e08d; font-style:italic; }
h-[data-h^=cmt_dlim] { font-style:normal; }
h-[data-h^=cmt_doc_dlim] { font-style:normal; }
h-[data-h^=val] { color:#f2d18d; }
h-[data-h^=null] { color:#62ded6; }
h-[data-h^=bool] { color:#f2d18d; }
h-[data-h^=num] { color:#f2d18d; }
h-[data-h^=num_dlim] { color:#e6b191; }
h-[data-h^=num_deco] { color:#e6b191; }
h-[data-h^=str] { color:#f2d18d; }
h-[data-h^=str_dlim] { color:#e6b191; }
h-[data-h^=str_deco] { color:#e6b191; }
h-[data-h^=str_esc] { color:#e6aee6; }
h-[data-h^=str_intp] { color:#e6aee6; }
h-[data-h^=name] { color:#f0f0f0; }
h-[data-h^=name_labl] { color:#d8eda6; }
h-[data-h^=name_life] { color:#d8eda6; }
h-[data-h^=name_nt] { font-style:italic; }
h-[data-h^=name_nt_decl] { color:#62ded6; font-style:italic; }
h-[data-h^=name_cmd] { color:#62ded6; }
h-[data-h^=name_opt] { color:#f0f0f0; }
h-[data-h^=name_mac] { color:#cc946e; }
h-[data-h^=name_dirt] { color:#cc946e; }
h-[data-h^=name_inst] { color:#62ded6; }
h-[data-h^=asm_inst_pre] { color:#e6aee6; }
h-[data-h^=kw] { color:#62ded6; }
h-[data-h^=kw_this] { color:#62ded6; }
h-[data-h^=diff_head] { color:#777777; }
h-[data-h^=diff_head_hunk] { color:#edc385; }
h-[data-h^=diff_eq] { color:#e7e7e7; }
h-[data-h^=diff_del] { color:#ffdcd7; background-color:#67060c; }
h-[data-h^=diff_ins] { color:#aff5b4; background-color:#033a16; }
h-[data-h^=diff_mod] { color:#fff4d7; background-color:#674d06; }
h-[data-h^=mk_tag] { color:#62ded6; }
h-[data-h^=mk_attr] { color:#a4c4de; }
h-[data-h^=text_del] { color:#ce9178; text-decoration:line-through; }
h-[data-h^=text_ins] { color:#b5cea8; text-decoration:underline; }
h-[data-h^=text_emph] { font-style:italic; }
h-[data-h^=text_stro] { font-weight:bold; }
h-[data-h^=text_ulin] { text-decoration:underline; }
h-[data-h^=text_strk] { text-decoration:line-through; }
h-[data-h^=sym] { color:#baa6b9; }
h-[data-h^=sym_punc] { color:#d0d0d0; }
h-[data-h^=sym_bket] { color:#fa7878; }
h-[data-h^=sym_par] { color:#fa7878; }
h-[data-h^=sym_sqr] { color:#fa7878; }
h-[data-h^=sym_brac] { color:#fa7878; }
}

html.light h-[data-h^=err] { color:#ff0000; }
html.light h-[data-h^=cmt] { color:green; font-style:italic; }
html.light h-[data-h^=cmt_dlim] { font-style:normal; }
html.light h-[data-h^=cmt_doc] { color:green; font-style:italic; }
html.light h-[data-h^=cmt_doc_dlim] { font-style:normal; }
html.light h-[data-h^=val] { color:#9f6807; }
html.light h-[data-h^=null] { color:#00607c; }
html.light h-[data-h^=bool] { color:#9f6807; }
html.light h-[data-h^=num] { color:#9f6807; }
html.light h-[data-h^=str] { color:#9f6807; }
html.light h-[data-h^=str_esc] { color:#70400c; }
html.light h-[data-h^=str_intp] { color:#70400c; }
html.light h-[data-h^=name] { color:#000000; }
html.light h-[data-h^=name_labl] { color:#517a0b; }
html.light h-[data-h^=name_life] { color:#517a0b; }
html.light h-[data-h^=name_nt] { font-style:italic; }
html.light h-[data-h^=name_nt_decl] { color:#00607c; font-style:italic; }
html.light h-[data-h^=name_cmd] { color:#00607c; }
html.light h-[data-h^=name_opt] { color:#000000; }
html.light h-[data-h^=name_inst] { color:#00607c; }
html.light h-[data-h^=asm_inst_pre] { color:#9f6807; }
html.light h-[data-h^=name_mac] { color:#6f4e37; }
html.light h-[data-h^=name_dirt] { color:#6f4e37; }
html.light h-[data-h^=kw] { color:#00607c; }
html.light h-[data-h^=kw_this] { color:#00607c; }
html.light h-[data-h^=diff_head] { color:#777777; }
html.light h-[data-h^=diff_head_hunk] { color:#5c477e; }
html.light h-[data-h^=diff_eq] { color:#000000; }
html.light h-[data-h^=diff_del] { color:#b31d28; background-color:#ffeef0; }
html.light h-[data-h^=diff_ins] { color:#22863a; background-color:#f0fff4; }
html.light h-[data-h^=diff_mod] { color:#7a680d; background-color:#fffdee; }
html.light h-[data-h^=mk_tag] { color:#00607c; }
html.light h-[data-h^=mk_attr] { color:#5c477e; }
html.light h-[data-h^=text_del] { color:#ce9178; text-decoration:line-through; }
html.light h-[data-h^=text_ins] { color:#b5cea8; text-decoration:underline; }
html.light h-[data-h^=text_emph] { font-style:italic; }
html.light h-[data-h^=text_stro] { font-weight:bold; }
html.light h-[data-h^=text_ulin] { text-decoration:underline; }
html.light h-[data-h^=text_strk] { text-decoration:line-through; }
html.light h-[data-h^=sym] { color:#570057; }
html.light h-[data-h^=sym_punc] { color:#000000; }
html.light h-[data-h^=sym_bket] { color:#af1915; }
html.light h-[data-h^=sym_par] { color:#af1915; }
html.light h-[data-h^=sym_sqr] { color:#af1915; }
html.light h-[data-h^=sym_brac] { color:#af1915; }

html.dark h-[data-h^=err] { color:#ff0000; }
html.dark h-[data-h^=cmt] { color:#a2e08d; font-style:italic; }
html.dark h-[data-h^=cmt_doc] { color:#a2e08d; font-style:italic; }
html.dark h-[data-h^=cmt_dlim] { font-style:normal; }
html.dark h-[data-h^=cmt_doc_dlim] { font-style:normal; }
html.dark h-[data-h^=val] { color:#f2d18d; }
html.dark h-[data-h^=null] { color:#62ded6; }
html.dark h-[data-h^=bool] { color:#f2d18d; }
html.dark h-[data-h^=num] { color:#f2d18d; }
html.dark h-[data-h^=num_dlim] { color:#e6b191; }
html.dark h-[data-h^=num_deco] { color:#e6b191; }
html.dark h-[data-h^=str] { color:#f2d18d; }
html.dark h-[data-h^=str_dlim] { color:#e6b191; }
html.dark h-[data-h^=str_deco] { color:#e6b191; }
html.dark h-[data-h^=str_esc] { color:#e6aee6; }
html.dark h-[data-h^=str_intp] { color:#e6aee6; }
html.dark h-[data-h^=name] { color:#f0f0f0; }
html.dark h-[data-h^=name_labl] { color:#d8eda6; }
html.dark h-[data-h^=name_life] { color:#d8eda6; }
html.dark h-[data-h^=name_nt] { font-style:italic; }
html.dark h-[data-h^=name_nt_decl] { color:#62ded6; font-style:italic; }
html.dark h-[data-h^=name_cmd] { color:#62ded6; }
html.dark h-[data-h^=name_opt] { color:#f0f0f0; }
html.dark h-[data-h^=name_mac] { color:#cc946e; }
html.dark h-[data-h^=name_dirt] { color:#cc946e; }
html.dark h-[data-h^=name_inst] { color:#62ded6; }
html.dark h-[data-h^=asm_inst_pre] { color:#e6aee6; }
html.dark h-[data-h^=kw] { color:#62ded6; }
html.dark h-[data-h^=kw_this] { color:#62ded6; }
html.dark h-[data-h^=diff_head] { color:#777777; }
html.dark h-[data-h^=diff_head_hunk] { color:#edc385; }
html.dark h-[data-h^=diff_eq] { color:#e7e7e7; }
html.dark h-[data-h^=diff_del] { color:#ffdcd7; background-color:#67060c; }
html.dark h-[data-h^=diff_ins] { color:#aff5b4; background-color:#033a16; }
html.dark h-[data-h^=diff_mod] { color:#fff4d7; background-color:#674d06; }
html.dark h-[data-h^=mk_tag] { color:#62ded6; }
html.dark h-[data-h^=mk_attr] { color:#a4c4de; }
html.dark h-[data-h^=text_del] { color:#ce9178; text-decoration:line-through; }
html.dark h-[data-h^=text_ins] { color:#b5cea8; text-decoration:underline; }
html.dark h-[data-h^=text_emph] { font-style:italic; }
html.dark h-[data-h^=text_stro] { font-weight:bold; }
html.dark h-[data-h^=text_ulin] { text-decoration:underline; }
html.dark h-[data-h^=text_strk] { text-decoration:line-through; }
html.dark h-[data-h^=sym] { color:#baa6b9; }
html.dark h-[data-h^=sym_punc] { color:#d0d0d0; }
html.dark h-[data-h^=sym_bket] { color:#fa7878; }
html.dark h-[data-h^=sym_par] { color:#fa7878; }
html.dark h-[data-h^=sym_sqr] { color:#fa7878; }
html.dark h-[data-h^=sym_brac] { color:#fa7878; }
  </style>
  <script>
const theme = localStorage.getItem("cowel-theme");
if (theme !== null) {
    document.documentElement.className = theme;
}
  </script>

<title>COWEL - Compact Web Language Documentation</title>
<meta property=og:title content="Compact Web Language (COWEL)"></meta>
<meta property=og:description content="COWEL is a markup language with TeX-like syntax, intended to generate HTML documents."></meta>
<meta property=og:locale content=en_US></meta>
<meta property=og:url content=https://cowel.org/></meta>
<meta property=og:type content=website></meta>
</head>
<body>
<div id=settings tabindex=0>
    <div id=theme-icon></div>
    <script>
        const settings = document.getElementById("settings");
        const htmlClasses = document.documentElement.classList;
        const themeIcon = document.getElementById("theme-icon");

        settings.classList.add("js");
        themeIcon.onclick = () => {
            const prefersDark = window.matchMedia("(prefers-color-scheme: dark)");
            const overrideClass = prefersDark.matches ? "light" : "dark";
            if (htmlClasses.contains("light")) {
                htmlClasses.remove("light");
                localStorage.removeItem("cowel-theme");
            } else if (htmlClasses.contains("dark")) {
                htmlClasses.remove("dark");
                localStorage.removeItem("cowel-theme");
            } else {
                htmlClasses.add(overrideClass);
                // to avoid legal issues or controversy in general,
                // we don't mess with local storage when the page is hosted in arbitrary places
                if (window.location.protocol === "file:") {
                    localStorage.setItem("cowel-theme", overrideClass);
                }
            }
        };
        settings.onkeydown = (e) => {
            if (e.key === "Enter" || e.key === " ") {
                event.preventDefault();
                themeIcon.onclick();
            }
        };
    </script>
</div>
<main>

<h1 id=compact-web-language><a class=para href=#compact-web-language></a>Compact Web Language (COWEL)</h1>

<div id=github>
<style>
h1 {
    margin-bottom: 0;
}

#github {
    font-size: 125%;
    margin-bottom: 3em;
}
</style>
<a href=https://github.com/eisenwave/cowel class=sans>github.com/eisenwave/cowel</a>
</div>

<h2 id=contents><a class=para href=#contents></a>Contents</h2>

<div class=toc><div class=toc-num data-level=2>1</div>
<a href=#introduction><h2>Introduction</h2></a>
<div class=toc-num data-level=2>2</div>
<a href=#motivation><h2>Motivation</h2></a>
<div class=toc-num data-level=2>3</div>
<a href=#getting-started><h2>Getting started</h2></a>
<div class=toc-num data-level=3>3.1</div>
<a href=#native-installation><h3>Native installation</h3></a>
<div class=toc-num data-level=2>4</div>
<a href=#syntax><h2>Syntax</h2></a>
<div class=toc-num data-level=3>4.1</div>
<a href=#lexical-analysis><h3>Lexical analysis</h3></a>
<div class=toc-num data-level=4>4.1.1</div>
<a href=#text><h4>Text</h4></a>
<div class=toc-num data-level=4>4.1.2</div>
<a href=#whitespace><h4>Whitespace</h4></a>
<div class=toc-num data-level=4>4.1.3</div>
<a href=#escape-sequences><h4>Escape sequences</h4></a>
<div class=toc-num data-level=4>4.1.4</div>
<a href=#syntax-comments><h4>Comments</h4></a>
<div class=toc-num data-level=5>4.1.4.1</div>
<a href=#line-comments><h5>Line comments</h5></a>
<div class=toc-num data-level=5>4.1.4.2</div>
<a href=#block-comments><h5>Block comments</h5></a>
<div class=toc-num data-level=4>4.1.5</div>
<a href=#literals><h4>Literals</h4></a>
<div class=toc-num data-level=4>4.1.6</div>
<a href=#int-literal><h4><g-term>int-literal</g-term> โ Integer literal</h4></a>
<div class=toc-num data-level=4>4.1.7</div>
<a href=#float-literal><h4><g-term>float-literal</g-term> โ Floating-point literal</h4></a>
<div class=toc-num data-level=3>4.2</div>
<a href=#parsing><h3>Parsing</h3></a>
<div class=toc-num data-level=3>4.3</div>
<a href=#directives-splices><h3>Directives splices</h3></a>
<div class=toc-num data-level=4>4.3.1</div>
<a href=#directive-names><h4>Directive names</h4></a>
<div class=toc-num data-level=4>4.3.2</div>
<a href=#directive-arguments><h4>Directive arguments</h4></a>
<div class=toc-num data-level=5>4.3.2.1</div>
<a href=#named-arguments><h5>Named arguments</h5></a>
<div class=toc-num data-level=5>4.3.2.2</div>
<a href=#positional-arguments><h5>Positional arguments</h5></a>
<div class=toc-num data-level=5>4.3.2.3</div>
<a href=#ellipses><h5>Ellipses</h5></a>
<div class=toc-num data-level=5>4.3.2.4</div>
<a href=#groups><h5>Groups</h5></a>
<div class=toc-num data-level=4>4.3.3</div>
<a href=#directive-content><h4>Directive content</h4></a>
<div class=toc-num data-level=2>5</div>
<a href=#document-processing><h2>Document processing</h2></a>
<div class=toc-num data-level=3>5.1</div>
<a href=#contexts-and-output><h3>Content policies</h3></a>
<div class=toc-num data-level=3>5.2</div>
<a href=#directive-processing><h3>Directive processing</h3></a>
<div class=toc-num data-level=4>5.2.1</div>
<a href=#lazy-processing><h4>Lazy processing</h4></a>
<div class=toc-num data-level=2>6</div>
<a href=#types-intro><h2>Types</h2></a>
<div class=toc-num data-level=3>6.1</div>
<a href=#general-principles><h3>General principles</h3></a>
<div class=toc-num data-level=3>6.2</div>
<a href=#basic-types><h3>Basic types</h3></a>
<div class=toc-num data-level=4>6.2.1</div>
<a href=#type-any><h4><tt-><h- data-h=kw_type>any</h-></tt-> โ Top type</h4></a>
<div class=toc-num data-level=4>6.2.2</div>
<a href=#type-nothing><h4><tt-><h- data-h=kw_type>nothing</h-></tt-> โ Bottom type</h4></a>
<div class=toc-num data-level=4>6.2.3</div>
<a href=#type-unit><h4><tt-><h- data-h=kw_type>unit</h-></tt-> โ Unit type</h4></a>
<div class=toc-num data-level=4>6.2.4</div>
<a href=#type-null><h4><tt-><h- data-h=kw_type>null</h-></tt-> โ Null type</h4></a>
<div class=toc-num data-level=4>6.2.5</div>
<a href=#type-bool><h4><tt-><h- data-h=kw_type>bool</h-></tt-> โ Boolean type</h4></a>
<div class=toc-num data-level=4>6.2.6</div>
<a href=#type-int><h4><tt-><h- data-h=kw_type>int</h-></tt-> โ Integer</h4></a>
<div class=toc-num data-level=4>6.2.7</div>
<a href=#type-float><h4><tt-><h- data-h=kw_type>float</h-></tt-> โ 64-bit floating-point number</h4></a>
<div class=toc-num data-level=4>6.2.8</div>
<a href=#type-str><h4><tt-><h- data-h=kw_type>str</h-></tt-> โ String</h4></a>
<div class=toc-num data-level=4>6.2.9</div>
<a href=#type-block><h4><tt-><h- data-h=kw_type>block</h-></tt-> โ Block</h4></a>
<div class=toc-num data-level=3>6.3</div>
<a href=#compound-types><h3>Compound types</h3></a>
<div class=toc-num data-level=4>6.3.1</div>
<a href=#type-group><h4><tt-><h- data-h=kw_type>group</h-></tt-> โ Product type</h4></a>
<div class=toc-num data-level=4>6.3.2</div>
<a href=#type-named><h4><tt-><h- data-h=kw_type>named</h-></tt-> โ Named group member</h4></a>
<div class=toc-num data-level=4>6.3.3</div>
<a href=#type-pack><h4><tt-><h- data-h=kw_type>pack</h-></tt-> โ Variadic pack of group members</h4></a>
<div class=toc-num data-level=4>6.3.4</div>
<a href=#type-lazy><h4><tt-><h- data-h=kw_type>lazy</h-></tt-></h4></a>
<div class=toc-num data-level=4>6.3.5</div>
<a href=#type-union><h4>Union</h4></a>
<div class=toc-num data-level=5>6.3.5.1</div>
<a href=#shorthand-notation-for-optional-types-><h5>Shorthand notation for optional types (<tt->?</tt->)</h5></a>
<div class=toc-num data-level=3>6.4</div>
<a href=#splicing><h3>Splicing</h3></a>
<div class=toc-num data-level=4>6.4.1</div>
<a href=#splicing-float><h4>Splicing values of type <tt-><h- data-h=kw_type>float</h-></tt-></h4></a>
<div class=toc-num data-level=2>7</div>
<a href=#themes><h2>Themes</h2></a>
<div class=toc-num data-level=2>8</div>
<a href=#new-directives><h2>New directives</h2></a>
<div class=toc-num data-level=3>8.1</div>
<a href=#common-principles><h3>Common principles</h3></a>
<div class=toc-num data-level=4>8.1.1</div>
<a href=#parameter-notation><h4>Parameter notation</h4></a>
<div class=toc-num data-level=4>8.1.2</div>
<a href=#usual-argument-matching><h4>Usual argument matching</h4></a>
<div class=toc-num data-level=3>8.2</div>
<a href=#new-character-utilities><h3>Character utilities</h3></a>
<div class=toc-num data-level=4>8.2.1</div>
<a href=#dir-cowel_char_by_entity><h4><code><h- data-h=mk_tag>\cowel_char_by_entity</h-></code> โ Character by HTML character reference</h4></a>
<div class=toc-num data-level=4>8.2.2</div>
<a href=#dir-cowel_char_by_name><h4><code><h- data-h=mk_tag>\cowel_char_by_name</h-></code> โ Character by Unicode name</h4></a>
<div class=toc-num data-level=4>8.2.3</div>
<a href=#dir-cowel_char_by_num><h4><code><h- data-h=mk_tag>\cowel_char_by_num</h-></code> โ Character by code point number</h4></a>
<div class=toc-num data-level=4>8.2.4</div>
<a href=#dir-cowel_char_get_num><h4><code><h- data-h=mk_tag>\cowel_char_get_num</h-></code> โ Get digits of character</h4></a>
<div class=toc-num data-level=3>8.3</div>
<a href=#html-utilities><h3>HTML utilities</h3></a>
<div class=toc-num data-level=4>8.3.1</div>
<a href=#dir-cowel_html_element><h4><code><h- data-h=mk_tag>\cowel_html_element</h-></code> โ HTML element</h4></a>
<div class=toc-num data-level=4>8.3.2</div>
<a href=#dir-cowel_html_self_closing_element><h4><code><h- data-h=mk_tag>\cowel_html_self_closing_element</h-></code> โ Self-closing HTML element</h4></a>
<div class=toc-num data-level=3>8.4</div>
<a href=#new-content-policies><h3>Content policies</h3></a>
<div class=toc-num data-level=4>8.4.1</div>
<a href=#dir-cowel_to_html><h4><code><h- data-h=mk_tag>\cowel_to_html</h-></code> โ Process with to-HTML policy</h4></a>
<div class=toc-num data-level=4>8.4.2</div>
<a href=#dir-cowel_no_invoke><h4><code><h- data-h=mk_tag>\cowel_no_invoke</h-></code> โ Process with no-invoke policy</h4></a>
<div class=toc-num data-level=4>8.4.3</div>
<a href=#dir-cowel_actions><h4><code><h- data-h=mk_tag>\cowel_actions</h-></code> โ Process with actions policy</h4></a>
<div class=toc-num data-level=4>8.4.4</div>
<a href=#dir-cowel_text_only><h4><code><h- data-h=mk_tag>\cowel_text_only</h-></code> โ Process with text-only policy</h4></a>
<div class=toc-num data-level=4>8.4.5</div>
<a href=#dir-cowel_text_as_html><h4><code><h- data-h=mk_tag>\cowel_text_as_html</h-></code> โ Process with text-as-HTML policy</h4></a>
<div class=toc-num data-level=4>8.4.6</div>
<a href=#dir-cowel_as_text><h4><code><h- data-h=mk_tag>\cowel_as_text</h-></code> โ Process with as-text policy</h4></a>
<div class=toc-num data-level=4>8.4.7</div>
<a href=#dir-cowel_source_as_text><h4><code><h- data-h=mk_tag>\cowel_source_as_text</h-></code> โ Process with source-as-text policy</h4></a>
<div class=toc-num data-level=3>8.5</div>
<a href=#new-syntax-highlighting><h3>Syntax highlighting</h3></a>
<div class=toc-num data-level=4>8.5.1</div>
<a href=#dir-cowel_highlight><h4><code><h- data-h=mk_tag>\cowel_highlight</h-></code> โ Perform syntax highlighting</h4></a>
<div class=toc-num data-level=4>8.5.2</div>
<a href=#dir-cowel_highlight_as><h4><code><h- data-h=mk_tag>\cowel_highlight_as</h-></code> โ Syntax highlight override</h4></a>
<div class=toc-num data-level=4>8.5.3</div>
<a href=#dir-cowel_highlight_phantom><h4><code><h- data-h=mk_tag>\cowel_highlight_phantom</h-></code> โ Syntax highlight phantom text</h4></a>
<div class=toc-num data-level=3>8.6</div>
<a href=#new-paragraph-control><h3>Paragraph control</h3></a>
<div class=toc-num data-level=4>8.6.1</div>
<a href=#paragraph-splitting><h4>Paragraph splitting</h4></a>
<div class=toc-num data-level=4>8.6.2</div>
<a href=#dir-cowel_paragraphs><h4><code><h- data-h=mk_tag>\cowel_paragraphs</h-></code> โ Perform paragraph splitting</h4></a>
<div class=toc-num data-level=4>8.6.3</div>
<a href=#dir-cowel_paragraph_enter><h4><code><h- data-h=mk_tag>\cowel_paragraph_enter</h-></code> โ Enter a paragraph</h4></a>
<div class=toc-num data-level=4>8.6.4</div>
<a href=#dir-cowel_paragraph_leave><h4><code><h- data-h=mk_tag>\cowel_paragraph_leave</h-></code> โ Leave a paragraph</h4></a>
<div class=toc-num data-level=4>8.6.5</div>
<a href=#dir-cowel_paragraph_inherit><h4><code><h- data-h=mk_tag>\cowel_paragraph_inherit</h-></code> โ Activate paragraph splitting inside a directive</h4></a>
<div class=toc-num data-level=3>8.7</div>
<a href=#new-file-management><h3>File management</h3></a>
<div class=toc-num data-level=4>8.7.1</div>
<a href=#dir-cowel_include><h4><code><h- data-h=mk_tag>\cowel_include</h-></code> โ Include a sub-document</h4></a>
<div class=toc-num data-level=4>8.7.2</div>
<a href=#dir-cowel_include_text><h4><code><h- data-h=mk_tag>\cowel_include_text</h-></code> โ Include text from a file</h4></a>
<div class=toc-num data-level=3>8.8</div>
<a href=#new-aliases><h3>Aliases and macros</h3></a>
<div class=toc-num data-level=4>8.8.1</div>
<a href=#dir-cowel_alias><h4><code><h- data-h=mk_tag>\cowel_alias</h-></code> โ Define aliases for an existing directive</h4></a>
<div class=toc-num data-level=4>8.8.2</div>
<a href=#dir-cowel_macro><h4><code><h- data-h=mk_tag>\cowel_macro</h-></code> โ Define a macro</h4></a>
<div class=toc-num data-level=4>8.8.3</div>
<a href=#dir-cowel_put><h4><code><h- data-h=mk_tag>\cowel_put</h-></code> โ Process provided macro content or arguments</h4></a>
<div class=toc-num data-level=3>8.9</div>
<a href=#new-invocations><h3>Invocations</h3></a>
<div class=toc-num data-level=4>8.9.1</div>
<a href=#dir-cowel_invoke><h4><code><h- data-h=mk_tag>\cowel_invoke</h-></code> โ Invoke a directive</h4></a>
<div class=toc-num data-level=3>8.10</div>
<a href=#type-conversions><h3>Type conversions</h3></a>
<div class=toc-num data-level=4>8.10.1</div>
<a href=#dir-cowel_to_str><h4><code><h- data-h=mk_tag>\cowel_to_str</h-></code> โ Convert to <tt-><h- data-h=kw_type>str</h-></tt-></h4></a>
<div class=toc-num data-level=4>8.10.2</div>
<a href=#dir-cowel_reinterpret_as_float><h4><code><h- data-h=mk_tag>\cowel_reinterpret_as_float</h-></code> โ Reinterpret as <tt-><h- data-h=kw_type>float</h-></tt-></h4></a>
<div class=toc-num data-level=4>8.10.3</div>
<a href=#dir-cowel_reinterpret_as_int><h4><code><h- data-h=mk_tag>\cowel_reinterpret_as_int</h-></code> โ Reinterpret as <tt-><h- data-h=kw_type>int</h-></tt-></h4></a>
<div class=toc-num data-level=3>8.11</div>
<a href=#basic-arithmetic-operations><h3>Basic arithmetic operations</h3></a>
<div class=toc-num data-level=4>8.11.1</div>
<a href=#dir-cowel_pos><h4><code><h- data-h=mk_tag>\cowel_pos</h-></code> โ Copy</h4></a>
<div class=toc-num data-level=4>8.11.2</div>
<a href=#dir-cowel_neg><h4><code><h- data-h=mk_tag>\cowel_neg</h-></code> โ Negation</h4></a>
<div class=toc-num data-level=4>8.11.3</div>
<a href=#dir-cowel_abs><h4><code><h- data-h=mk_tag>\cowel_abs</h-></code> โ Absolute value</h4></a>
<div class=toc-num data-level=4>8.11.4</div>
<a href=#dir-cowel_sqrt><h4><code><h- data-h=mk_tag>\cowel_sqrt</h-></code> โ Square root</h4></a>
<div class=toc-num data-level=4>8.11.5</div>
<a href=#dir-cowel_trunc><h4><code><h- data-h=mk_tag>\cowel_trunc</h-></code> โ Round toward zero</h4></a>
<div class=toc-num data-level=4>8.11.6</div>
<a href=#dir-cowel_floor><h4><code><h- data-h=mk_tag>\cowel_floor</h-></code> โ Round toward negative infinity</h4></a>
<div class=toc-num data-level=4>8.11.7</div>
<a href=#dir-cowel_ceil><h4><code><h- data-h=mk_tag>\cowel_ceil</h-></code> โ Round toward positive infinity</h4></a>
<div class=toc-num data-level=4>8.11.8</div>
<a href=#dir-cowel_nearest><h4><code><h- data-h=mk_tag>\cowel_nearest</h-></code> โ Round toward the nearest integer</h4></a>
<div class=toc-num data-level=4>8.11.9</div>
<a href=#dir-cowel_nearest_away_zero><h4><code><h- data-h=mk_tag>\cowel_nearest_away_zero</h-></code> โ Round toward the nearest integer, with ties broken away from zero</h4></a>
<div class=toc-num data-level=4>8.11.10</div>
<a href=#dir-cowel_min><h4><code><h- data-h=mk_tag>\cowel_min</h-></code> โ Minimum</h4></a>
<div class=toc-num data-level=4>8.11.11</div>
<a href=#dir-cowel_max><h4><code><h- data-h=mk_tag>\cowel_max</h-></code> โ Maximum</h4></a>
<div class=toc-num data-level=4>8.11.12</div>
<a href=#dir-cowel_add><h4><code><h- data-h=mk_tag>\cowel_add</h-></code> โ Addition</h4></a>
<div class=toc-num data-level=4>8.11.13</div>
<a href=#dir-cowel_sub><h4><code><h- data-h=mk_tag>\cowel_sub</h-></code> โ Subtraction</h4></a>
<div class=toc-num data-level=4>8.11.14</div>
<a href=#dir-cowel_mul><h4><code><h- data-h=mk_tag>\cowel_mul</h-></code> โ Multiplication</h4></a>
<div class=toc-num data-level=4>8.11.15</div>
<a href=#dir-cowel_div><h4><code><h- data-h=mk_tag>\cowel_div</h-></code> โ Division</h4></a>
<div class=toc-num data-level=4>8.11.16</div>
<a href=#dir-cowel_div_to_zero><h4><code><h- data-h=mk_tag>\cowel_div_to_zero</h-></code> โ Division rounded toward zero</h4></a>
<div class=toc-num data-level=4>8.11.17</div>
<a href=#dir-cowel_rem_to_zero><h4><code><h- data-h=mk_tag>\cowel_rem_to_zero</h-></code> โ Remainder rounded toward zero</h4></a>
<div class=toc-num data-level=4>8.11.18</div>
<a href=#dir-cowel_div_to_pos_inf><h4><code><h- data-h=mk_tag>\cowel_div_to_pos_inf</h-></code> โ Division rounded toward positive infinity</h4></a>
<div class=toc-num data-level=4>8.11.19</div>
<a href=#dir-cowel_rem_to_pos_inf><h4><code><h- data-h=mk_tag>\cowel_rem_to_pos_inf</h-></code> โ Remainder rounded toward positive infinity</h4></a>
<div class=toc-num data-level=4>8.11.20</div>
<a href=#dir-cowel_div_to_neg_inf><h4><code><h- data-h=mk_tag>\cowel_div_to_neg_inf</h-></code> โ Division rounded toward negative infinity</h4></a>
<div class=toc-num data-level=4>8.11.21</div>
<a href=#dir-cowel_rem_to_neg_inf><h4><code><h- data-h=mk_tag>\cowel_rem_to_neg_inf</h-></code> โ Remainder rounded toward negative infinity</h4></a>
<div class=toc-num data-level=3>8.12</div>
<a href=#logical-operations><h3>Logical operations</h3></a>
<div class=toc-num data-level=4>8.12.1</div>
<a href=#dir-cowel_not><h4><code><h- data-h=mk_tag>\cowel_not</h-></code> โ Logical NOT</h4></a>
<div class=toc-num data-level=4>8.12.2</div>
<a href=#dir-cowel_and><h4><code><h- data-h=mk_tag>\cowel_and</h-></code> โ Logical AND</h4></a>
<div class=toc-num data-level=4>8.12.3</div>
<a href=#dir-cowel_or><h4><code><h- data-h=mk_tag>\cowel_or</h-></code> โ Logical OR</h4></a>
<div class=toc-num data-level=3>8.13</div>
<a href=#comparison-operations><h3>Comparison operations</h3></a>
<div class=toc-num data-level=4>8.13.1</div>
<a href=#dir-cowel_eq><h4><code><h- data-h=mk_tag>\cowel_eq</h-></code> โ Equals</h4></a>
<div class=toc-num data-level=4>8.13.2</div>
<a href=#dir-cowel_ne><h4><code><h- data-h=mk_tag>\cowel_ne</h-></code> โ Not equals</h4></a>
<div class=toc-num data-level=4>8.13.3</div>
<a href=#dir-cowel_lt><h4><code><h- data-h=mk_tag>\cowel_lt</h-></code> โ Less than</h4></a>
<div class=toc-num data-level=4>8.13.4</div>
<a href=#dir-cowel_gt><h4><code><h- data-h=mk_tag>\cowel_gt</h-></code> โ Greater than</h4></a>
<div class=toc-num data-level=4>8.13.5</div>
<a href=#dir-cowel_le><h4><code><h- data-h=mk_tag>\cowel_le</h-></code> โ Less than or equal</h4></a>
<div class=toc-num data-level=4>8.13.6</div>
<a href=#dir-cowel_ge><h4><code><h- data-h=mk_tag>\cowel_ge</h-></code> โ Greater than or equal</h4></a>
<div class=toc-num data-level=3>8.14</div>
<a href=#string-operations><h3>String operations</h3></a>
<div class=toc-num data-level=4>8.14.1</div>
<a href=#dir-cowel_str_length><h4><code><h- data-h=mk_tag>\cowel_str_length</h-></code> โ Length of string</h4></a>
<div class=toc-num data-level=4>8.14.2</div>
<a href=#dir-cowel_str_utf8_length><h4><code><h- data-h=mk_tag>\cowel_str_utf8_length</h-></code> โ Length of string in UTF-8 code units</h4></a>
<div class=toc-num data-level=4>8.14.3</div>
<a href=#dir-cowel_str_contains><h4><code><h- data-h=mk_tag>\cowel_str_contains</h-></code> โ Test if a string contains another string</h4></a>
<div class=toc-num data-level=4>8.14.4</div>
<a href=#dir-cowel_str_match><h4><code><h- data-h=mk_tag>\cowel_str_match</h-></code> โ Test if a string matches a regular expression</h4></a>
<div class=toc-num data-level=4>8.14.5</div>
<a href=#dir-cowel_str_to_lower><h4><code><h- data-h=mk_tag>\cowel_str_to_lower</h-></code> โ Convert string to lowercase</h4></a>
<div class=toc-num data-level=4>8.14.6</div>
<a href=#dir-cowel_str_to_upper><h4><code><h- data-h=mk_tag>\cowel_str_to_upper</h-></code> โ Convert string to uppercase</h4></a>
<div class=toc-num data-level=4>8.14.7</div>
<a href=#dir-cowel_str_replace_first><h4><code><h- data-h=mk_tag>\cowel_str_replace_first</h-></code> โ Replace first occurrence</h4></a>
<div class=toc-num data-level=4>8.14.8</div>
<a href=#dir-cowel_str_replace_all><h4><code><h- data-h=mk_tag>\cowel_str_replace_all</h-></code> โ Replace every occurrence</h4></a>
<div class=toc-num data-level=4>8.14.9</div>
<a href=#dir-cowel_regex><h4><code><h- data-h=mk_tag>\cowel_regex</h-></code> โ Create a regular expression</h4></a>
<div class=toc-num data-level=3>8.15</div>
<a href=#variable-management><h3>Variable management</h3></a>
<div class=toc-num data-level=4>8.15.1</div>
<a href=#dir-cowel_var_let><h4><code><h- data-h=mk_tag>\cowel_var_let</h-></code> โ Initialize a new variable</h4></a>
<div class=toc-num data-level=4>8.15.2</div>
<a href=#dir-cowel_var_set><h4><code><h- data-h=mk_tag>\cowel_var_set</h-></code> โ Set an existing variable</h4></a>
<div class=toc-num data-level=4>8.15.3</div>
<a href=#dir-cowel_var_exists><h4><code><h- data-h=mk_tag>\cowel_var_exists</h-></code> โ Check whether a variable exists</h4></a>
<div class=toc-num data-level=4>8.15.4</div>
<a href=#dir-cowel_var_get><h4><code><h- data-h=mk_tag>\cowel_var_get</h-></code> โ Get the value of a variable</h4></a>
<div class=toc-num data-level=4>8.15.5</div>
<a href=#dir-cowel_var_delete><h4><code><h- data-h=mk_tag>\cowel_var_delete</h-></code> โ Delete an existing variable</h4></a>
<div class=toc-num data-level=2>9</div>
<a href=#legacy-directives><h2>Legacy directives</h2></a>
<div class=toc-num data-level=3>9.1</div>
<a href=#text-formatting><h3>Text formatting</h3></a>
<div class=toc-num data-level=3>9.2</div>
<a href=#code><h3>Code and syntax highlighting</h3></a>
<div class=toc-num data-level=4>9.2.1</div>
<a href=#dir-code><h4><code><h- data-h=mk_tag>\code</h-></code> โ Inline code</h4></a>
<div class=toc-num data-level=5>9.2.1.1</div>
<a href=#manual-nested-highlighting><h5>Manual nested highlighting</h5></a>
<div class=toc-num data-level=5>9.2.1.2</div>
<a href=#further-advice-on-highlighting><h5>Further advice on highlighting</h5></a>
<div class=toc-num data-level=4>9.2.2</div>
<a href=#dir-codeblock><h4><code><h- data-h=mk_tag>\codeblock</h-></code> โ Code blocks</h4></a>
<div class=toc-num data-level=4>9.2.3</div>
<a href=#dir-hl><h4><code><h- data-h=mk_tag>\hl</h-></code> โ Syntax highlight override</h4></a>
<div class=toc-num data-level=4>9.2.4</div>
<a href=#dir-pre><h4><code><h- data-h=mk_tag>\pre</h-></code> โ Preformatted blocks</h4></a>
<div class=toc-num data-level=3>9.3</div>
<a href=#math><h3>Math</h3></a>
<div class=toc-num data-level=4>9.3.1</div>
<a href=#dir-math><h4><code><h- data-h=mk_tag>\math</h-></code> โ Inline math</h4></a>
<div class=toc-num data-level=4>9.3.2</div>
<a href=#dir-mathblock><h4><code><h- data-h=mk_tag>\mathblock</h-></code> โ Math blocks</h4></a>
<div class=toc-num data-level=3>9.4</div>
<a href=#separators-and-word-breaking><h3>Separators and word breaking</h3></a>
<div class=toc-num data-level=4>9.4.1</div>
<a href=#dir-br><h4><code><h- data-h=mk_tag>\br</h-></code> โ Break line</h4></a>
<div class=toc-num data-level=4>9.4.2</div>
<a href=#dir-hr><h4><code><h- data-h=mk_tag>\hr</h-></code> โ Horizontal rule</h4></a>
<div class=toc-num data-level=4>9.4.3</div>
<a href=#dir-wbr><h4><code><h- data-h=mk_tag>\wbr</h-></code> โ Word break opportunity</h4></a>
<div class=toc-num data-level=4>9.4.4</div>
<a href=#dir-nobr><h4><code><h- data-h=mk_tag>\nobr</h-></code> โ Unbroken words</h4></a>
<div class=toc-num data-level=3>9.5</div>
<a href=#special-blocks><h3>Special blocks</h3></a>
<div class=toc-num data-level=4>9.5.1</div>
<a href=#dir-Babstract><h4><code><h- data-h=mk_tag>\Babstract</h-></code> โ Abstract blocks</h4></a>
<div class=toc-num data-level=4>9.5.2</div>
<a href=#dir-Bquote><h4><code><h- data-h=mk_tag>\Bquote</h-></code> โ Quote blocks</h4></a>
<div class=toc-num data-level=4>9.5.3</div>
<a href=#dir-blockquote><h4><code><h- data-h=mk_tag>\blockquote</h-></code> โ Alias for <code><h- data-h=mk_tag>\Bquote</h-></code></h4></a>
<div class=toc-num data-level=4>9.5.4</div>
<a href=#dir-Bug><h4><code><h- data-h=mk_tag>\Bug</h-></code> โ Bug blocks</h4></a>
<div class=toc-num data-level=4>9.5.5</div>
<a href=#dir-Bdecision><h4><code><h- data-h=mk_tag>\Bdecision</h-></code> โ Decision blocks</h4></a>
<div class=toc-num data-level=4>9.5.6</div>
<a href=#dir-Bdel><h4><code><h- data-h=mk_tag>\Bdel</h-></code> โ Deletion blocks</h4></a>
<div class=toc-num data-level=4>9.5.7</div>
<a href=#dir-Bdetails><h4><code><h- data-h=mk_tag>\Bdetails</h-></code> โ Details blocks aka spoilers</h4></a>
<div class=toc-num data-level=4>9.5.8</div>
<a href=#dir-details><h4><code><h- data-h=mk_tag>\details</h-></code> โ Alias for <code><h- data-h=mk_tag>\Bdetails</h-></code></h4></a>
<div class=toc-num data-level=4>9.5.9</div>
<a href=#dir-Bdiff><h4><code><h- data-h=mk_tag>\Bdiff</h-></code> โ Difference blocks</h4></a>
<div class=toc-num data-level=4>9.5.10</div>
<a href=#dir-Bex><h4><code><h- data-h=mk_tag>\Bex</h-></code> โ Example blocks</h4></a>
<div class=toc-num data-level=4>9.5.11</div>
<a href=#dir-Bins><h4><code><h- data-h=mk_tag>\Bins</h-></code> โ Insertion blocks</h4></a>
<div class=toc-num data-level=4>9.5.12</div>
<a href=#dir-Bimp><h4><code><h- data-h=mk_tag>\Bimp</h-></code> โ Important blocks</h4></a>
<div class=toc-num data-level=4>9.5.13</div>
<a href=#dir-Bnote><h4><code><h- data-h=mk_tag>\Bnote</h-></code> โ Note blocks</h4></a>
<div class=toc-num data-level=4>9.5.14</div>
<a href=#dir-Btip><h4><code><h- data-h=mk_tag>\Btip</h-></code> โ Tip blocks</h4></a>
<div class=toc-num data-level=4>9.5.15</div>
<a href=#dir-Btodo><h4><code><h- data-h=mk_tag>\Btodo</h-></code> โ TODO blocks</h4></a>
<div class=toc-num data-level=4>9.5.16</div>
<a href=#dir-Bwarn><h4><code><h- data-h=mk_tag>\Bwarn</h-></code> โ Warning blocks</h4></a>
<div class=toc-num data-level=3>9.6</div>
<a href=#lists><h3>Lists</h3></a>
<div class=toc-num data-level=4>9.6.1</div>
<a href=#dir-ul><h4><code><h- data-h=mk_tag>\ul</h-></code> โ Unordered lists</h4></a>
<div class=toc-num data-level=4>9.6.2</div>
<a href=#dir-ol><h4><code><h- data-h=mk_tag>\ol</h-></code> โ Ordered lists</h4></a>
<div class=toc-num data-level=4>9.6.3</div>
<a href=#dir-li><h4><code><h- data-h=mk_tag>\li</h-></code> โ List items</h4></a>
<div class=toc-num data-level=4>9.6.4</div>
<a href=#dir-item><h4><code><h- data-h=mk_tag>\item</h-></code> โ List item pseudo-directive</h4></a>
<div class=toc-num data-level=4>9.6.5</div>
<a href=#dir-dl><h4><code><h- data-h=mk_tag>\dl</h-></code> โ Definition lists</h4></a>
<div class=toc-num data-level=3>9.7</div>
<a href=#tables><h3>Tables</h3></a>
<div class=toc-num data-level=3>9.8</div>
<a href=#headings><h3>Headings</h3></a>
<div class=toc-num data-level=4>9.8.1</div>
<a href=#dir-make_contents><h4><code><h- data-h=mk_tag>\make_contents</h-></code> โ Make table of contents</h4></a>
<div class=toc-num data-level=3>9.9</div>
<a href=#bibliography><h3>Bibliography</h3></a>
<div class=toc-num data-level=4>9.9.1</div>
<a href=#dir-bib><h4><code><h- data-h=mk_tag>\bib</h-></code> โ Add bibliography entry</h4></a>
<div class=toc-num data-level=4>9.9.2</div>
<a href=#dir-make_bib><h4><code><h- data-h=mk_tag>\make_bib</h-></code> โ Generate bibliography</h4></a>
<div class=toc-num data-level=3>9.10</div>
<a href=#references><h3>References</h3></a>
<div class=toc-num data-level=4>9.10.1</div>
<a href=#dir-ref><h4><code><h- data-h=mk_tag>\ref</h-></code> โ References</h4></a>
<div class=toc-num data-level=4>9.10.2</div>
<a href=#dir-mail><h4><code><h- data-h=mk_tag>\mail</h-></code> โ E-Mail addresses</h4></a>
<div class=toc-num data-level=4>9.10.3</div>
<a href=#dir-tel><h4><code><h- data-h=mk_tag>\tel</h-></code> โ Telephone numbers</h4></a>
<div class=toc-num data-level=3>9.11</div>
<a href=#foreign-languages><h3>Foreign languages</h3></a>
<div class=toc-num data-level=4>9.11.1</div>
<a href=#dir-script><h4><code><h- data-h=mk_tag>\script</h-></code> โ JavaScript blocks</h4></a>
<div class=toc-num data-level=4>9.11.2</div>
<a href=#dir-noscript><h4><code><h- data-h=mk_tag>\noscript</h-></code> โ No-JavaScript content</h4></a>
<div class=toc-num data-level=4>9.11.3</div>
<a href=#dir-style><h4><code><h- data-h=mk_tag>\style</h-></code> โ CSS blocks</h4></a>
<div class=toc-num data-level=3>9.12</div>
<a href=#sections><h3>Sections</h3></a>
<div class=toc-num data-level=4>9.12.1</div>
<a href=#dir-there><h4><code><h- data-h=mk_tag>\there</h-></code> โ Append content to section</h4></a>
<div class=toc-num data-level=4>9.12.2</div>
<a href=#dir-here><h4><code><h- data-h=mk_tag>\here</h-></code> โ Copy section content</h4></a>
<div class=toc-num data-level=4>9.12.3</div>
<a href=#dir-hereblock><h4><code><h- data-h=mk_tag>\hereblock</h-></code> โ Copy section content in block</h4></a>
<div class=toc-num data-level=3>9.13</div>
<a href=#miscellaneous><h3>Miscellaneous</h3></a>
<div class=toc-num data-level=4>9.13.1</div>
<a href=#dir-div><h4><code><h- data-h=mk_tag>\div</h-></code> โ Content division</h4></a>
<div class=toc-num data-level=4>9.13.2</div>
<a href=#dir-trim><h4><code><h- data-h=mk_tag>\trim</h-></code> โ Trim input</h4></a>
<div class=toc-num data-level=4>9.13.3</div>
<a href=#dir-p><h4><code><h- data-h=mk_tag>\p</h-></code> โ Paragraphs</h4></a>
</div>

<h2 id=introduction><a class=para href=#introduction></a>1. Introduction</h2>

<p>COWEL is a markup language with TeX-like syntax,
intended to generate HTML documents,
mainly for proposals and technical text.
Many of its features are purpose-built for use in WG21,
such as for writing C++ proposals.
</p>
<example-block><p><intro-></intro-> 
The following COWEL code ...
</p><code-block>Hello, <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>strong</h-><h- data-h=sym_brac>{</h->strong<h- data-h=sym_brac>}</h-> world!</code-block>
<p>... generates the HTML ...
</p><code-block>Hello, <h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>strong</h-><h- data-h=sym_punc>&gt;</h->strong<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>strong</h-><h- data-h=sym_punc>&gt;</h-> world!</code-block>
<p>... which renders as:
</p><div class=indent>
Hello, <strong>strong</strong> world!
</div>
</example-block>

<h2 id=motivation><a class=para href=#motivation></a>2. Motivation</h2>

<p>Many similar tools (mpark/wg21, bikeshed, etc.)
are based on Markdown.
This makes them beginner-friendly,
but advanced formatting requires heavy use of Markdown extensions
or mixed use of Markdown and HTML tags.
Metadata such as bibliographies, document information, etc.
also rely on yet another format (e.g. JSON, YAML).
</p>
<p>This makes these tools difficult to master and makes the design incoherent.
Why do we need three languages glued together just to format our documents?
</p>
<p>COWEL is the missing middle, the missing link.
It makes producing HTML a natural part of the language,
lets you specify metadata,
and more, all in one, simple syntax.
</p>
<h2 id=getting-started><a class=para href=#getting-started></a>3. Getting started</h2>

<p>To use and install COWEL,
you need to <a href=https://docs.npmjs.com/downloading-and-installing-node-js-and-npm>install Node.js and <tt->npm</tt-></a>.
With <tt->npm</tt-> installed, open a terminal and run:
</p>
<code-block><h- data-h=name_cmd>npm</h-> <h- data-h=str>i</h-> <h- data-h=name_opt>-g</h-> <h- data-h=str>cowel</h->
<h- data-h=cmt_dlim>#</h-><h- data-h=cmt> or</h->
<h- data-h=name_cmd>npm</h-> <h- data-h=str>install</h-> <h- data-h=name_opt>--global</h-> <h- data-h=str>cowel</h-></code-block>

<p>See also <a href=https://www.npmjs.com/package/cowel class=sans>https://www.npmjs.com/package/cowel</a>.
With COWEL installed,
you can convert COWEL documents to HTML by using:
</p>
<code-block><h- data-h=name_cmd>cowel</h-> <h- data-h=str>run</h-> <h- data-h=str>input.cow</h-> <h- data-h=str>output.html</h-></code-block>

<p>To see a list of available options and commands,
run <code><h- data-h=name_cmd>cowel</h-></code> by itself or <code><h- data-h=name_cmd>cowel</h-> <h- data-h=name_opt>--help</h-></code>.
</p>
<tip-block><p><intro-></intro-> 
You may need to use <code><h- data-h=name_cmd>sudo</h-></code> or otherwise elevate your permissions
because <code><h- data-h=name_opt>-g</h-></code> performs a "global"/system-wide installation.
This is necessary to make the <code><h- data-h=name_cmd>cowel</h-></code> command available everywhere.
</p>
<p>It is recommended to use a <tt->.cow</tt-> or <tt->.cowel</tt-> file extension for COWEL documents.
</p>
<p>Many text editors support associating such file extensions
with TeX or LaTeX syntax highlighting,
whose syntax is similar enough to get <em>some</em> basic highlighting.
A VSCode plugin for proper highlighting is planned, among other features.
</p></tip-block>

<h3 id=native-installation><a class=para href=#native-installation></a>3.1. Native installation</h3>

<p>There also exists a more limited native CLI for development purposes.
To install it and run COWEL:
</p>
<code-block><h- data-h=name_cmd>git</h-> <h- data-h=str>clone</h-> <h- data-h=str>https://github.com/Eisenwave/cowel.git</h-> <h- data-h=name_opt>--recursive</h->
<h- data-h=name_cmd>cd</h-> <h- data-h=str>cowel</h->
<h- data-h=name_cmd>cmake</h-> <h- data-h=name_opt>-B</h-> <h- data-h=str>build</h->
<h- data-h=name_cmd>cmake</h-> <h- data-h=name_opt>--build</h-> <h- data-h=str>build</h->
<h- data-h=name_cmd>./build/cowel-cli</h-> <h- data-h=str>input.cow</h-> <h- data-h=str>output.html</h-></code-block>

<p>The <tt->npm</tt-> CLI is slightly different from the native CLI,
but they share some options,
such as <code><h- data-h=name_opt>--severity</h-></code>
and <code><h- data-h=name_opt>--help</h-></code>.
Running <code><h- data-h=name_cmd>./build/cowel-cli</h-></code> without extra arguments also brings up the help menu.
</p>
<h2 id=syntax><a class=para href=#syntax></a>4. Syntax</h2>

<p>At the document level,
COWEL has a minimalistic but powerful syntax,
built on top of only a few <dfn>markup elements</dfn>:
</p><ul>
  <li><code>Text.</code></li>
  <li>Escape sequences, such as <code><h- data-h=str_esc>\</h-><h- data-h=str_esc>{</h-></code>, <code><h- data-h=str_esc>\</h-><h- data-h=str_esc>}</h-></code>, <code><h- data-h=str_esc>\</h-><h- data-h=str_esc>\</h-></code>, etc.</li>
  <li><code><h- data-h=cmt_dlim>\</h-><h- data-h=cmt_dlim>:</h-><h- data-h=cmt> line comments</h-></code></li>
  <li><code><h- data-h=cmt_dlim>\</h-><h- data-h=cmt_dlim>*</h-><h- data-h=cmt> block comments </h-><h- data-h=cmt_dlim>*</h-><h- data-h=cmt_dlim>\</h-></code></li>
  <li><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>directive_splices</h-><h- data-h=sym_par>(</h-><h- data-h=str>positional</h-><h- data-h=sym_punc>,</h-> <h- data-h=str>args</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>named_args</h-> <h- data-h=sym_punc>=</h-> <h- data-h=num>0</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->and content<h- data-h=sym_brac>}</h-></code></li>
</ul>

<p>These are what a user writes most of the time.
</p>
<p>Formally, COWEL documents is processed in several phases:
</p><ol>
  <li>
    The UTF-8-encoded source code is decoded into a sequence of code points.
  </li>
  <li>
    The code points are partitioned into <dfn>tokens</dfn>.
    See <a href=#lexical-analysis>ยง4.1. Lexical analysis</a>.
  </li>
  <li>
    A syntax tree is formed from the tokens.
    See <a href=#parsing>ยง4.2. Parsing</a>.
  </li>
</ol>

<note-block><p><intro-></intro-> 
At the top-level in the <g-term>DOCUMENT</g-term>,
there are no other syntactical features,
meaning that as long as some bit of code doesn't contain a U+005Cย(<tt->\</tt->),
it's all interpreted as plaintext.
This makes COWEL exceptionally suited to nest other languages inside of it in code blocks etc.
</p></note-block>

<h3 id=lexical-analysis><a class=para href=#lexical-analysis></a>4.1. Lexical analysis</h3>

<p>The code points of the COWEL source code are partitioned into tokens.
This occurs as specified by a
<a href=https://en.wikipedia.org/wiki/Nested_word>Visibly Pushdown Language</a>.
</p>
<note-block><p><intro-></intro-> 
A Visibly Pushdown Language is a superset of Regular Language;
it additionally contains constructs like matching pairs of braces and parentheses.
</p></note-block>

<p>Formally, in <a href=https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form>EBNF</a>
grammar format,
a <g-term>DOCUMENT</g-term> is matched as follows:
</p>
<code-block><h- data-h=name_nt_decl>DOCUMENT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DOCUMENT-MARKUP-ELEMENT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DOCUMENT-MARKUP-ELEMENT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>DOCUMENT-TEXT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>COMMON-MARKUP-ELEMENT</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DOCUMENT-TEXT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>DOCUMENT-TEXT-CHAR</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DOCUMENT-TEXT-CHAR</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DOCUMENT-TEXT-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>CHAR</h-> <h- data-h=sym_op>-</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->

<h- data-h=name_nt_decl>COMMON-MARKUP-ELEMENT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>ESCAPE-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>LINE-COMMENT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>BLOCK-COMMENT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DIRECTIVE-SPLICE</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>RESERVED-ESCAPE-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>ESCAPE-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>ESCAPABLE-CHAR</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>LINE-TERMINATOR</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>ESCAPABLE-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>{</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h->  <h- data-h=str_dlim>"</h-><h- data-h=str>}</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>'</h-><h- data-h=str>"</h-><h- data-h=str_dlim>'</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>RESERVED-ESCAPE-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>RESERVED-ESCAPE-CHAR</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_mac>? end of file ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>RESERVED-ESCAPE-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>CHAR</h->
  <h- data-h=sym_op>-</h-> <h- data-h=name_nt>ESCAPABLE-CHAR</h->
  <h- data-h=sym_op>-</h-> <h- data-h=name_nt>IDENTIFIER-START-CHAR</h->
  <h- data-h=sym_op>-</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>*</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>-</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>:</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>-</h-> <h- data-h=name_nt>LF</h-> <h- data-h=sym_op>-</h-> <h- data-h=name_nt>CR</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>LINE-COMMENT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\:</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>LINE-COMMENT-CHAR</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>LINE-TERMINATOR</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>LINE-COMMENT-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>CHAR</h-> <h- data-h=sym_op>-</h-> <h- data-h=sym_par>(</h-><h- data-h=name_nt>LF</h-> <h- data-h=sym_op>|</h-> <h- data-h=name_nt>CR</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BLOCK-COMMENT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\*</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>BLOCK-COMMENT-CHAR</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>*\</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BLOCK-COMMENT-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>CHAR</h-> <h- data-h=sym_op>-</h-> <h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>*</h-><h- data-h=str_dlim>"</h-> <h- data-h=name_mac>? followed by "\" ?</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DIRECTIVE-SPLICE</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>DIRECTIVE-SPLICE-NAME-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>GROUP</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>BLOCK</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DIRECTIVE-SPLICE-NAME-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>BLOCK</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DIRECTIVE-SPLICE-NAME-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>GROUP</h-> <h- data-h=name_mac>? not followed by "{" ?</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DIRECTIVE-SPLICE-NAME-TOKEN</h-> <h- data-h=name_mac>? not followed by "(" or "{" ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DIRECTIVE-SPLICE-NAME-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>IDENTIFIER-TOKEN</h-><h- data-h=sym_punc>;</h->

<h- data-h=name_nt_decl>IDENTIFIER-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>IDENTIFIER-START-CHAR</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>IDENTIFIER-CHAR</h-> <h- data-h=sym_brac>}</h->
  <h- data-h=name_mac>? not followed by IDENTIFIER-CHAR ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>IDENTIFIER-START-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>_</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=name_nt>LETTER</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>IDENTIFIER-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>IDENTIFIER-START-CHAR</h-> <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DIGIT</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DIGIT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>0</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>1</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>2</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>3</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>4</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>5</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>6</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>7</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>8</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>9</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>LETTER</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_mac>? ASCII alphabetic character ?</h-><h- data-h=sym_punc>;</h->

<h- data-h=name_nt_decl>GROUP</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>PARENTHESIS-LEFT-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>GROUP-CONTENT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>PARENTHESIS-RIGHT-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>PARENTHESIS-LEFT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>(</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>PARENTHESIS-RIGHT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>)</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>GROUP-CONTENT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>GROUP</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>BLOCK</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>IDENTIFIER-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>QUOTED-STRING</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>BINARY-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>OCTAL-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DECIMAL-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>HEXADECIMAL-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DECIMAL-FLOAT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>INFINITY-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>NEGATIVE-INFINITY-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>EQUALS-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>COMMA-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>ELLIPSIS-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>UNIT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>NULL-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>TRUE-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>FALSE-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>LINE-COMMENT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>BLOCK-COMMENT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>WHITESPACE-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>RESERVED-NUMBER-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>EQUALS-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>=</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>COMMA-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>,</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>ELLIPSIS-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>...</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>UNIT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>unit</h-><h- data-h=str_dlim>"</h-> <h- data-h=name_mac>? not followed by IDENTIFIER-CHAR ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>NULL-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>null</h-><h- data-h=str_dlim>"</h-> <h- data-h=name_mac>? not followed by IDENTIFIER-CHAR ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>TRUE-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>true</h-><h- data-h=str_dlim>"</h-> <h- data-h=name_mac>? not followed by IDENTIFIER-CHAR ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>FALSE-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>false</h-><h- data-h=str_dlim>"</h-> <h- data-h=name_mac>? not followed by IDENTIFIER-CHAR ?</h-><h- data-h=sym_punc>;</h->

<h- data-h=name_nt_decl>BINARY-INT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>0b</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>BINARY-DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>BINARY-DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>OCTAL-INT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>0o</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>OCTAL-DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>OCTAL-DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DECIMAL-INT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>HEXADECIMAL-INT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>0x</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>HEXADECIMAL-DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>HEXADECIMAL-DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BINARY-DIGIT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>0</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>1</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>OCTAL-DIGIT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>0</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>1</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>2</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>3</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>4</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>5</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>6</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>7</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>HEXADECIMAL-DIGIT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>DIGIT</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>A</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>B</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>C</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>D</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>E</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>F</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>a</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>b</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>c</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>d</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>e</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>f</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->

<h- data-h=name_nt_decl>INFINITY-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>infinity</h-><h- data-h=str_dlim>"</h-> <h- data-h=name_mac>? not followed by IDENTIFIER-CHAR ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>NEGATIVE-INFINITY-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-infinity;</h-><h- data-h=str_dlim>"</h-> <h- data-h=name_mac>? not followed by IDENTIFIER-CHAR ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DECIMAL-FLOAT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>DECIMAL-FLOAT</h-> <h- data-h=name_mac>? not followed by IDENTIFIER-CHAR ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DECIMAL-FLOAT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>.</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>EXPONENT</h-> <h- data-h=sym_sqr>]</h->
  <h- data-h=sym_op>|</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>.</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>EXPONENT</h-> <h- data-h=sym_sqr>]</h->
  <h- data-h=sym_op>|</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>EXPONENT</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>EXPONENT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>e</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>E</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>+</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->

<h- data-h=name_nt_decl>RESERVED-NUMBER-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>PERMISSIVE-NUMBER</h->
  <h- data-h=sym_op>-</h-> <h- data-h=name_nt>BINARY-INT-TOKEN</h->
  <h- data-h=sym_op>-</h-> <h- data-h=name_nt>OCTAL-INT-TOKEN</h->
  <h- data-h=sym_op>-</h-> <h- data-h=name_nt>DECIMAL-INT-TOKEN</h->
  <h- data-h=sym_op>-</h-> <h- data-h=name_nt>HEXADECIMAL-INT-TOKEN</h->
  <h- data-h=sym_op>-</h-> <h- data-h=name_nt>DECIMAL-FLOAT-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>PERMISSIVE-NUMBER</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_par>(</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>.</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_par>)</h-><h- data-h=sym_op>,</h-> <h- data-h=name_mac>? maximal sequence ([0-9a-zA-Z.]|e+|E+|e-|E-)+ ?</h-><h- data-h=sym_punc>;</h->

<h- data-h=name_nt_decl>QUOTED-STRING</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>STRING-QUOTE-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>QUOTED-STRING-MARKUP-ELEMENT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>STRING-QUOTE-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>STRING-QUOTE-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>'</h-><h- data-h=str>"</h-><h- data-h=str_dlim>'</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>QUOTED-STRING-MARKUP-ELEMENT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>QUOTED-STRING-TEXT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>COMMON-MARKUP-ELEMENT</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>QUOTED-STRING-TEXT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>QUOTED-STRING-TEXT-CHAR</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>QUOTED-STRING-TEXT-CHAR</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>QUOTED-STRING-TEXT-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>CHAR</h-> <h- data-h=sym_op>-</h-> <h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>'</h-><h- data-h=str>"</h-><h- data-h=str_dlim>'</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>;</h->

<h- data-h=name_nt_decl>BLOCK</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>BRACE-LEFT-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>BLOCK-MARKUP-ELEMENT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>BRACE-RIGHT-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BRACE-LEFT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>{</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BRACE-RIGHT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>}</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BLOCK-MARKUP-ELEMENT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>BLOCK-TEXT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>COMMON-MARKUP-ELEMENT</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BLOCK-TEXT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>BLOCK-TEXT-ELEMENT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>BLOCK-TEXT-ELEMENT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BLOCK-TEXT-ELEMENT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>BLOCK-TEXT-CHAR</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>{</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>BLOCK-TEXT-ELEMENT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>}</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BLOCK-TEXT-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>CHAR</h-> <h- data-h=sym_op>-</h-> <h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>}</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>;</h->

<h- data-h=name_nt_decl>WHITESPACE-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>HT</h-> <h- data-h=sym_op>|</h-> <h- data-h=name_nt>LF</h-> <h- data-h=sym_op>|</h-> <h- data-h=name_nt>CR</h-> <h- data-h=sym_op>|</h-> <h- data-h=name_nt>VT</h-> <h- data-h=sym_op>|</h-> <h- data-h=name_nt>SP</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>LINE-TERMINATOR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>LF</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>CR</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>LF</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>CR</h-> <h- data-h=name_mac>? not followed by LF ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>HT</h-> <h- data-h=sym_punc>=</h-> <h- data-h=name_mac>? U+0009 CHARACTER TABULATION ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>LF</h-> <h- data-h=sym_punc>=</h-> <h- data-h=name_mac>? U+000A END OF LINE ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>CR</h-> <h- data-h=sym_punc>=</h-> <h- data-h=name_mac>? U+000D CARRIAGE RETURN ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>VT</h-> <h- data-h=sym_punc>=</h-> <h- data-h=name_mac>? U+000B LINE TABULATION ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>SP</h-> <h- data-h=sym_punc>=</h-> <h- data-h=name_mac>? U+0020 SPACE ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>CHAR</h-> <h- data-h=sym_punc>=</h-> <h- data-h=name_mac>? any Unicode code point ?</h-><h- data-h=sym_punc>;</h-></code-block>

<p>Let the <dfn>tokens</dfn> of the document be any matched nonterminals
whose name ends with <g-term>TOKEN</g-term>.
</p>
<p>After matching the input source code according to the grammar above,
the following post-processing steps take place:
</p>
<ol>
  <li>
    If any token was matched whose names starts with <g-term>RESERVED</g-term>,
    an error is raised,
    and processing is abandoned.
  </li>
  <li>
    Any
    <g-term>LINE-COMMENT-TOKEN</g-term>,
    <g-term>BLOCK-COMMENT-TOKEN</g-term>, or
    <g-term>WHITESPACE-TOKEN</g-term>
    that is <g-term>GROUP-CONTENT</g-term> is discarded.
  </li>
</ol>

<note-block><p><intro-></intro-> 
The purpose of <g-term>RESERVED</g-term> tokens is to specify error handling.
These tokens are matched when no other valid token may be formed,
and any software processing COWEL should attempt to form these tokens.
</p></note-block>

<h4 id=text><a class=para href=#text></a>4.1.1. Text</h4>

<p><dfn>Text</dfn> (such as <g-term>DOCUMENT-TEXT-TOKEN</g-term> in the grammar)
is a markup element which consists of as many characters as possible,
excluding U+005Cย(<tt->\</tt->).
</p>
<code-block><h- data-h=name_nt_decl>DOCUMENT-TEXT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>DOCUMENT-TEXT-CHAR</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DOCUMENT-TEXT-CHAR</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DOCUMENT-TEXT-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>CHAR</h-> <h- data-h=sym_op>-</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h-></code-block>

<note-block><p><intro-></intro-> 
In most situations, text is not processed specially.
However, the output may depend on the context (<a href=#contexts-and-output>ยง5.1. Content policies</a>).
For example, <code>&lt;</code> in text will render as a &lt; character,
but will be converted to <code><h- data-h=str_esc>&amp;lt;</h-></code> when fed into a To-HTML Policy.
Furthermore, text is subject to special effects like syntax highlighting
and paragraph splitting.
</p></note-block>

<h4 id=whitespace><a class=para href=#whitespace></a>4.1.2. Whitespace</h4>

<p>COWEL translates text in whitespace directly into HTML in most situations.
Additional styling with CSS can be applied
to interpret that whitespace literally (like in <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>pre</h-><h- data-h=sym_punc>&gt;</h-></code> elements)
or to have it merged into spaces,
which happens by default.
</p>
<p>At the document top-level,
<a href=#paragraph-splitting>ยง8.6.1. Paragraph splitting</a> takes place.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block>This displays on one line
because line breaks render like spaces.</code-block>
<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->This displays on one line
because line breaks render like spaces.<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-></code-block>
<p>Rendered output:
</p><div class=indent>This displays on one line because line breaks render like spaces.</div>
</example-block>

<h4 id=escape-sequences><a class=para href=#escape-sequences></a>4.1.3. Escape sequences</h4>

<p>COWEL supports multiple escape sequences,
all of which begin with a <code><h- data-h=err>\</h-></code> (like directives),
but are followed by some special character.
The meaning of the escape sequences is described in the table below.
</p>
<style>
  #escapes-table {
    margin-left:auto;
    margin-right:auto;
    table-layout: fixed;
  }
  #escapes-table td {
    border-top: 1px solid var(--border-color);
  }
  #escapes-table td:first-child {
    width: 40%;
  }
</style>

<table id=escapes-table>
  <tr>
    <th>Escape sequence</th>
    <th>Meaning</th>
  </tr>
  <tr>
    <td>
      <tt-><h- data-h=str_esc>\{</h-></tt->,
      <tt-><h- data-h=str_esc>\}</h-></tt->,
      <tt-><h- data-h=str_esc>\\</h-></tt->,
      <tt-><h- data-h=str_esc>\"</h-></tt->,
    </td>
    <td>
      Expands to the second character in the escape sequence.
    </td>
  </tr>
  <tr>
    <td>
      <span class=word><tt-><h- data-h=str_esc>\</h-></tt-> U+000A LINE FEED</span>,
      <span class=word><tt-><h- data-h=str_esc>\</h-></tt-> U+000D CARRIAGE RETURN</span>,
      <span class=word><tt-><h- data-h=str_esc>\</h-></tt-> U+000A U+000D (CRLF escape)</span>
    </td>
    <td>
      Expands to nothing.
    </td>
  </tr>
</table>

<p>In EBNF grammar, an <g-term>ESCAPE-TOKEN</g-term> is constructed like:
</p>
<code-block><h- data-h=name_nt_decl>ESCAPE-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>ESCAPABLE-CHAR</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>LINE-TERMINATOR</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>ESCAPABLE-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>{</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h->  <h- data-h=str_dlim>"</h-><h- data-h=str>}</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>'</h-><h- data-h=str>"</h-><h- data-h=str_dlim>'</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>LINE-TERMINATOR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>LF</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>CR</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>LF</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>CR</h-> <h- data-h=name_mac>? not followed by LF ?</h-><h- data-h=sym_punc>;</h-></code-block>

<note-block><p><intro-></intro-> 
The purpose of most escapes is to prevent a character from having special meaning.
For example, the <tt-><h- data-h=str_esc>\"</h-></tt-> escape prevents a quote
from being interpreted as the end of a <g-term>QUOTED-STRING</g-term>.
</p>
<p>The purpose of the newline escapes is to remove unwanted newlines
and to join long content that spans multiple lines,
but without introducing any whitespace in the markup.
</p></note-block>

<h4 id=syntax-comments><a class=para href=#syntax-comments></a>4.1.4. Comments</h4>

<p>There are two types of comments:
line comments and block comments.
</p>
<h5 id=line-comments><a class=para href=#line-comments></a>4.1.4.1. Line comments</h5>

<p>Line comments begin with <code><h- data-h=cmt_dlim>\</h-><h- data-h=cmt_dlim>:</h-></code> and extend until the end of the line.
In almost every context,
comments are discarded instead of being emitted into the output HTML.
</p>
<p>This makes them useful for adding information to the COWEL markup.
</p>
<note-block><p><intro-></intro-> 
A <g-term>LINE-COMMENT-TOKEN</g-term>, just like any other content,
is actually part of the AST and doesn't simply get discarded during parsing.
This means that a <g-term>LINE-COMMENT-TOKEN</g-term> wrapped in <a href=#dir-cowel_source_as_text>ยง8.4.7. <code><h- data-h=mk_tag>\cowel_source_as_text</h-></code> โ Process with source-as-text policy</a>
will render as expected:
</p><code-block><h- data-h=mk_tag>\cowel_source_as_text</h-><h- data-h=sym_brac>{</h->A<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> A comment ...</h->
B<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block>A\: A comment ...
B</code-block>
</note-block>

<p>In EBNF grammar, a <g-term>LINE-COMMENT-TOKEN</g-term> is constructed as follows:
</p>
<code-block><h- data-h=name_nt_decl>LINE-COMMENT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str>:</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>LINE-COMMENT-CHAR</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>LINE-TERMINATOR</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>LINE-COMMENT-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>CHAR</h-> <h- data-h=sym_op>-</h-> <h- data-h=sym_par>(</h-><h- data-h=name_nt>LF</h-> <h- data-h=sym_op>|</h-> <h- data-h=name_nt>CR</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>;</h-></code-block>

<p>Comments include a <g-term>LINE-TERMINATOR</g-term>,
which means that a trailing <g-term>LINE-COMMENT-TOKEN</g-term> won't add any lines (not even blank lines)
to the generated markup.
</p>
<example-block><p><intro-></intro-> 
We can even join words by putting a <g-term>line-comment</g-term> between:
</p><code-block>Hello<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> this comment will absorb the newline</h->
World

Hello <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> this comment also does, but is preceded by a space</h->
World</code-block>

<p>Generated HTML:
</p><code-block>HelloWorld

Hello World</code-block>
</example-block>

<h5 id=block-comments><a class=para href=#block-comments></a>4.1.4.2. Block comments</h5>

<p>A block comment functions exactly the same as a line comment,
but is terminated at a point of choice instead of at the end of the line.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block>A<h- data-h=cmt_dlim>\</h-><h- data-h=cmt_dlim>*</h-><h- data-h=cmt> comment in the middle </h-><h- data-h=cmt_dlim>*</h-><h- data-h=cmt_dlim>\</h->B</code-block>
<p>Generated HTML:
</p><code-block>AB</code-block>
</example-block>

<p>In EBNF grammar, a <g-term>BLOCK-COMMENT-TOKEN</g-term> is constructed as follows:
</p>
<code-block><h- data-h=name_nt_decl>BLOCK-COMMENT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>\</h-><h- data-h=str>*</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>BLOCK-COMMENT-CHAR</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>*</h-><h- data-h=str>\</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BLOCK-COMMENT-CHAR</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>CHAR</h-> <h- data-h=sym_op>-</h-> <h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>*</h-><h- data-h=str_dlim>"</h-> <h- data-h=name_mac>? followed by "</h-><h- data-h=name_mac>\</h-><h- data-h=name_mac>" ?</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>;</h-></code-block>

<note-block><p><intro-></intro-> 
<g-term>BLOCK-COMMENT-TOKEN</g-term>s do not allow nesting,
meaning that '<code><h- data-h=cmt_dlim>\</h-><h- data-h=cmt_dlim>:</h-></code>' or '<code><h- data-h=cmt_dlim>\</h-><h- data-h=cmt_dlim>*</h-></code>'
inside of a <g-term>BLOCK-COMMENT-TOKEN</g-term> has no special meaning.
</p>
<p>Similarly, '<code><h- data-h=cmt_dlim>\</h-><h- data-h=cmt_dlim>*</h-></code>' has no special meaning
inside of a <g-term>LINE-COMMENT-TOKEN</g-term>.
</p></note-block>

<h4 id=literals><a class=para href=#literals></a>4.1.5. Literals</h4>

<p>Inside scripting contexts such as in directive arguments,
<g-term>GROUP-CONTENT</g-term> may appear,
some of which represents a value of a basic type (<a href=#types-intro>ยง6. Types</a>).
</p>
<code-block><h- data-h=name_nt_decl>GROUP-CONTENT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>GROUP</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>BLOCK</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>IDENTIFIER-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>QUOTED-STRING</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>BINARY-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>OCTAL-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DECIMAL-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>HEXADECIMAL-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DECIMAL-FLOAT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>INFINITY-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>NEGATIVE-INFINITY-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>EQUALS-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>COMMA-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>ELLIPSIS-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>UNIT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>NULL-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>TRUE-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>FALSE-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>LINE-COMMENT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>BLOCK-COMMENT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>WHITESPACE-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>RESERVED-NUMBER-TOKEN</h-><h- data-h=sym_punc>;</h-></code-block>

<p>Some literals are simply keywords:
</p>
<ul>
  <li>
    The literal <code>unit</code> represents the value of type <tt-><h- data-h=kw_type>unit</h-></tt->
    (<a href=#type-unit>ยง6.2.3. <tt-><h- data-h=kw_type>unit</h-></tt-> โ Unit type</a>).
  </li>
  <li>
    The literal <code>null</code> represents the value of type <tt-><h- data-h=kw_type>null</h-></tt->
    (<a href=#type-null>ยง6.2.4. <tt-><h- data-h=kw_type>null</h-></tt-> โ Null type</a>).
  </li>
  <li>
    The literals <code>true</code> and <code>false</code> represent values of type <tt-><h- data-h=kw_type>bool</h-></tt->
    (<a href=#type-bool>ยง6.2.5. <tt-><h- data-h=kw_type>bool</h-></tt-> โ Boolean type</a>).
  </li>
</ul>

<h4 id=int-literal><a class=para href=#int-literal></a>4.1.6. <g-term>int-literal</g-term> โ Integer literal</h4>

<code-block><h- data-h=name_nt_decl>int-literal</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>BINARY-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>OCTAL-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DECIMAL-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>HEXADECIMAL-INT-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BINARY-INT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>0b</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>BINARY-DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>BINARY-DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>OCTAL-INT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>0o</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>OCTAL-DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>OCTAL-DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DECIMAL-INT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>HEXADECIMAL-INT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>0x</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>HEXADECIMAL-DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>HEXADECIMAL-DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>BINARY-DIGIT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>0</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>1</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>OCTAL-DIGIT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>0</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>1</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>2</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>3</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>4</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>5</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>6</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>7</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>HEXADECIMAL-DIGIT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>DIGIT</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>A</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>B</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>C</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>D</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>E</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>F</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>a</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>b</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>c</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>d</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>e</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>f</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h-></code-block>

<p>The tokens listed above are later matched by an <g-term>int-literal</g-term>,
and represent a value of type <tt-><h- data-h=kw_type>int</h-></tt->
(<a href=#type-int>ยง6.2.6. <tt-><h- data-h=kw_type>int</h-></tt-> โ Integer</a>).
</p>
<p>The <dfn>base</dfn> <math display=inline><mi>B</mi></math> of a <g-term>int-literal</g-term> is
</p><ul>
  <li><math display=inline><mn>2</mn></math> for a <g-term>BINARY-INT-TOKEN</g-term>,</li>
  <li><math display=inline><mn>8</mn></math> for an <g-term>OCTAL-INT-TOKEN</g-term>,</li>
  <li><math display=inline><mn>10</mn></math> for an <g-term>DECIMAL-INT-TOKEN</g-term>, and</li>
  <li><math display=inline><mn>16</mn></math> for an <g-term>HEXADECIMAL-INT-TOKEN</g-term>.</li>
</ul>
<p>The value is of an <g-term>int-literal</g-term> in base <math display=inline><mi>B</mi></math>
is determined by interpreting each digit from left to right
as decimal digits of a base-<math display=inline><mi>B</mi></math> integer,
from most significant to least significant.
The <g-term>HEXADECIMAL-DIGIT</g-term>s <tt->a..f</tt-> and <tt->A..F</tt-> both represent
digits of value <math display=inline><mn>10</mn></math>..<math display=inline><mn>15</mn></math>.
</p>
<p>Leading zeros are ignored.
The value is negative if the leading U+002Dย(<tt->-</tt->) is present.
</p>
<example-block><p><intro-></intro-> 
The <g-term>int-literal</g-term> <code>-0123</code> represents the integer value
<math display=inline><mrow><mo form=prefix>โ</mo><mn>123</mn></mrow></math>.
</p>
<p>The <g-term>BINARY-INT-TOKEN</g-term> <code>0b11111111</code>,
the <g-term>OCTAL-INT-TOKEN</g-term> <code>0o377</code>,
the <g-term>DECIMAL-INT-TOKEN</g-term> <code>255</code>, and
the <g-term>HEXADECIMAL-INT-TOKEN</g-term> <code>0xff</code>
all represent the value <math display=inline><mn>255</mn></math>.
</p></example-block>

<h4 id=float-literal><a class=para href=#float-literal></a>4.1.7. <g-term>float-literal</g-term> โ Floating-point literal</h4>

<code-block><h- data-h=name_nt_decl>float-literal</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>INFINITY-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>NEGATIVE-INFINITY-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DECIMAL-FLOAT-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>INFINITY-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>infinity</h-><h- data-h=str_dlim>"</h-> <h- data-h=name_mac>? not followed by IDENTIFIER-CHAR ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>NEGATIVE-INFINITY-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-infinity;</h-><h- data-h=str_dlim>"</h-> <h- data-h=name_mac>? not followed by IDENTIFIER-CHAR ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DECIMAL-FLOAT-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>DECIMAL-FLOAT</h-> <h- data-h=name_mac>? not followed by IDENTIFIER-CHAR ?</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DECIMAL-FLOAT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>.</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>EXPONENT</h-> <h- data-h=sym_sqr>]</h->
  <h- data-h=sym_op>|</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>.</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>EXPONENT</h-> <h- data-h=sym_sqr>]</h->
  <h- data-h=sym_op>|</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>EXPONENT</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>EXPONENT</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>e</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>E</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>+</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>-</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>DIGIT</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>DIGIT</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h-></code-block>

<p>A <g-term>float-literal</g-term> represents a value of type <tt-><h- data-h=kw_type>float</h-></tt->
(<a href=#type-float>ยง6.2.7. <tt-><h- data-h=kw_type>float</h-></tt-> โ 64-bit floating-point number</a>).
</p>
<p>The value of '<tt->-infinity</tt->' is negative infinity, and
the value of '<tt->infinity</tt->' is positive infinity.
</p>
<p>A <g-term>DECIMAL-FLOAT-TOKEN</g-term> consists of several parts:
</p><ul>
  <li>
    An <dfn>integral part</dfn>, either matching a <g-term>int-literal</g-term>
    or consisting of only a leading U+002Dย(<tt->-</tt->),
    which is equivalent to '<tt->-0</tt->'.
  </li>
  <li>
    The radix point U+002Eย(<tt->.</tt->).
  </li>
  <li>
    A <dfn>fractional part</dfn> consisting of <g-term>digit</g-term>s following the radix point.
    An absent fractional part is equivalent to '<tt->0</tt->'.
  </li>
  <li>
    An <g-term>exponent</g-term>.
  </li>
</ul>

<p>The value of a <g-term>DECIMAL-FLOAT-TOKEN</g-term> is determined as follows:
</p>
<ol>
  <li>
    Let <math display=inline><mi>s</mi></math> be -1 if the leading U+002Dย(<tt->-</tt->) is present,
    otherwise 1;
    let <math display=inline><mi>k</mi></math> be the integer value of the integral part
    (determined as for a <g-term>int-literal</g-term>);
    let <math display=inline><mi>f</mi></math> be the the integer value of the fractional part;
    let <math display=inline><mi>p</mi></math> be the amount of digits including leading zeros of the fractional part;
    let <math display=inline><mi>e</mi></math> be the integer value of the exponent.
  </li>
  <li>
    Let the <dfn>scaled value</dfn> of the <g-term>DECIMAL-FLOAT-TOKEN</g-term> be
    <math display=block><mrow>
      <mi>s</mi>
      <mo>ร</mo>
      <mo>(</mo>
      <mi>k</mi>
      <mo>+</mo>
      <mfrac><mi>f</mi><msup><mn>10</mn><mi>p</mi></msup></mfrac>
      <mo>)</mo>
      <mo>ร</mo>
      <msup><mn>10</mn><mi>e</mi></msup>
    </mrow></math>
  </li>
  <li>
    The value of the <g-term>DECIMAL-FLOAT-TOKEN</g-term> is the scaled value,
    rounded using the roundTiesToEven rounding direction
    as specified in IEEE-754,
    except that subnormal inexact values are never "flushed" to zero.
  </li>
</ol>

<example-block><p><intro-></intro-> 
</p><ul>
  <li><code>1.0</code> exactly represents the value 1.0.</li>
  <li><code>.1</code> is rounded to a value nearest to 0.1.</li>
  <li><code>1e1000000</code> is rounded to positive infinity.</li>
  <li><code>-1e1000000</code> is rounded to negative infinity.</li>
  <li><code>1e-1000000</code> is rounded to positive zero.</li>
  <li><code>-1e-1000000</code> is rounded to negative zero.</li>
  <li><code>-0.0</code> exactly represents a negative zero.</li>
</ul>
</example-block>


<h3 id=parsing><a class=para href=#parsing></a>4.2. Parsing</h3>

<p>After lexical analysis,
the produced tokens are used as the input to the parsing stage.
The tokens from lexical analysis are matched by a context-free grammar as follows:
</p>
<code-block><h- data-h=name_nt_decl>document</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>document-markup-element</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>document-markup-element</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>DOCUMENT-TEXT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>common-markup-element</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>common-markup-element</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>ESCAPE-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>LINE-COMMENT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>BLOCK-COMMENT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>directive-splice</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>directive-splice</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>DIRECTIVE-SPLICE-NAME-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>group</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>block</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>identifier</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>IDENTIFIER-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>group</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>PARENTHESIS-LEFT-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>group-member-list</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>PARENTHESIS-RIGHT-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>group-member-list</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>group-member</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>COMMA-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>group-member</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>COMMA-TOKEN</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>group-member</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>member-name</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>EQUALS-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>member-value</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>member-value</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>ELLIPSIS-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>member-name</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>identifier</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>quoted-string</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>member-value</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>directive-call</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>primary-value</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>directive-call</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>unquoted-identifier</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>group</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>block</h-> <h- data-h=sym_sqr>]</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>identifier</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>block</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>primary-value</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>UNIT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>NULL-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>bool-literal</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>int-literal</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>float-literal</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>unquoted-string</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>quoted-string</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>block</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>group</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>bool-literal</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>TRUE-TOKEN</h-> <h- data-h=sym_op>|</h-> <h- data-h=name_nt>FALSE-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>int-literal</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>BINARY-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>OCTAL-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DECIMAL-INT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>HEXADECIMAL-INT-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>float-literal</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>INFINITY-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>NEGATIVE-INFINITY-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>DECIMAL-FLOAT-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>unquoted-string</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>IDENTIFIER-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>quoted-string</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>STRING-QUOTE-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>quoted-string-markup-element</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>STRING-QUOTE-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>quoted-string-markup-element</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>QUOTED-STRING-TEXT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>common-markup-element</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>block</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>BRACE-LEFT-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>block-markup-element</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>BRACE-RIGHT-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>block-markup-element</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>BLOCK-TEXT-TOKEN</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>common-markup-element</h-><h- data-h=sym_punc>;</h-></code-block>

<h3 id=directives-splices><a class=para href=#directives-splices></a>4.3. Directives splices</h3>

<p>A <dfn>directive</dfn> is a way of generating plaintext, HTML, both, or neither.
You can think of it as a "command" or "function call".
</p>
<p><dfn>Splicing</dfn> means to evaluate a directive (or something else, in the future)
and to insert the result between the surrounding markup elements.
Splicing consists of three steps:
</p>
<ol>
  <li>
    Looking up the name of the spliced directive.
  </li>
  <li>
    Evaluating the directive (and its arguments, if any).
    Evaluation of the directive usually produces a result.
    This may not happen when evaluation raises an error.
  </li>
  <li>
    Feeding the result into the current content policy (<a href=#contexts-and-output>ยง5.1. Content policies</a>).
  </li>
</ol>

<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block>1 + 2 + 3 = <h- data-h=mk_tag>\cowel_add</h-><h- data-h=sym_par>(</h-><h- data-h=num>1</h-><h- data-h=sym_punc>,</h-> <h- data-h=num>2</h-><h- data-h=sym_punc>,</h-> <h- data-h=num>3</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>1 + 2 + 3 = 6</code-block>
<p>As explained, this markup is processed in three steps:
</p><ol>
  <li>
    <code><h- data-h=mk_tag>\cowel_add</h-></code> is looked up by name.
    This succeeds because <code><h- data-h=mk_tag>\cowel_add</h-></code> is a builtin directive.
  </li>
  <li>
    The three arguments (of type <tt-><h- data-h=kw_type>int</h-></tt->) to <code><h- data-h=mk_tag>\cowel_add</h-></code>
    are evaluated,
    and <code><h- data-h=mk_tag>\cowel_add</h-></code> itself is evaluated,
    which produces a value <code>6</code> of type <tt-><h- data-h=kw_type>int</h-></tt->.
  </li>
  <li>
    The resulting value <code>6</code> is fed as plaintext
    into the surrounding content policy,
    which usually results in a single U+0036ย(<tt->6</tt->) character being output.
  </li>
</ol>
</example-block>

<p>Every directive has three parts:
</p><ul>
  <li>
    The <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>directive_name</h-></code> selects a specific directive to be processed.
  </li>
  <li>
    An optional <code><h- data-h=sym_par>(</h-><h- data-h=str>comma_separated</h-><h- data-h=sym_punc>,</h-> <h- data-h=str>positional</h-><h- data-h=sym_punc>,</h-> <h- data-h=str>arguments</h-><h- data-h=sym_punc>,</h-> <h- data-h=str>named</h->-arguments = ...<h- data-h=sym_par>)</h-></code>
    group provides additional inputs to the directive.
  </li>
  <li>
    An optional <code><h- data-h=sym_brac>{</h->block of content<h- data-h=sym_brac>}</h-></code>
    provides a "main input" to a directive.
  </li>
</ul>

<p>In EBNF grammar, a <g-term>directive-splice</g-term> is constructed as follows:
</p>
<code-block><h- data-h=name_nt_decl>directive-splice</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>DIRECTIVE-SPLICE-NAME-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>group</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>block</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>DIRECTIVE-SPLICE-NAME-TOKEN</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>IDENTIFIER-TOKEN</h-><h- data-h=sym_punc>;</h-></code-block>

<h4 id=directive-names><a class=para href=#directive-names></a>4.3.1. Directive names</h4>

<p>A <dfn>directive name</dfn> selects a specific directive to be processed.
The name begins with a U+005Cย(<tt->\</tt->) character,
followed by a sequence of ASCII alphanumeric characters or U+005Fย(<tt->_</tt->).
However, the first character after U+005Cย(<tt->\</tt->) cannot be an ASCII digit.
</p>
<tip-block><p><intro-></intro-> 
You can use an empty block of content to "cut a name short":
</p><code-block>Thisisavery<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>wbr</h-><h- data-h=sym_brac>{</h-><h- data-h=sym_brac>}</h->longword.</code-block>
<p>Doing so is equivalent to writing
<code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>wbr</h-></code> and <code>longword</code> immediately following one another.
</p></tip-block>

<h4 id=directive-arguments><a class=para href=#directive-arguments></a>4.3.2. Directive arguments</h4>

<p>Grammatically, the arguments are a <g-term>group</g-term>,
which is constructed as follows:
</p>
<code-block><h- data-h=name_nt_decl>group</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>PARENTHESIS-LEFT-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>group-member-list</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>PARENTHESIS-RIGHT-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>group-member-list</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>group-member</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=name_nt>COMMA-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>group-member</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=name_nt>COMMA-TOKEN</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>group-member</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>member-name</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>EQUALS-TOKEN</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>member-value</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>member-value</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>ELLIPSIS-TOKEN</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>member-name</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>identifier</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>quoted-string</h-><h- data-h=sym_punc>;</h-></code-block>

<p><dfn>Directive arguments</dfn> can be
<dfn>positional arguments</dfn>,
<dfn>named arguments</dfn>, or
<dfn>ellipses</dfn>.
Arguments are separated by commas.
</p>
<example-block><p><intro-></intro-> 
Often, arguments are converted to HTML attributes.
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>id</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>abc</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->Bold text.<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>b</h-> <h- data-h=mk_attr>id</h-><h- data-h=sym_punc>=</h-><h- data-h=str>abc</h-><h- data-h=sym_punc>&gt;</h->Bold text.<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>

<h5 id=named-arguments><a class=para href=#named-arguments></a>4.3.2.1. Named arguments</h5>

<p>A <dfn>named argument</dfn> is a <g-term>group-member</g-term> of the form
<code><h- data-h=mk_attr>name</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>value</h-></code>,
where spaces anywhere around <tt-><h- data-h=mk_attr>name</h-></tt-> and <code>value</code> are ignored.
Named arguments are matched to directive parameters before any positional arguments,
meaning that positional arguments fill the remaining unmatched arguments.
</p>
<p>Argument names can consist of any character, except
ASCII control characters,
U+0020ยSPACE,
U+0022ย(<tt->"</tt->),
U+0027ย(<tt->'</tt->),
U+002Cย(<tt->,</tt->),
U+002Fย(<tt->/</tt->),
U+003Dย(<tt->=</tt->),
U+003Eย(<tt->&gt;</tt->),
U+005Bย(<tt->[</tt->),
U+005Cย(<tt->\</tt->),
U+005Dย(<tt->]</tt->),
U+007Bย(<tt->{</tt->),
U+007Dย(<tt->}</tt->),
and noncharacters.
</p>
<tip-block><p><intro-></intro-> 
If you want to provide a positional argument that is <code>name = value</code> instead,
you can do so by writing:
</p><code-block><h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> "name = value" as a positional argument</h->
<h- data-h=mk_tag>\xyz</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>name = value</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> named argument with name "name" and value "value"</h->
<h- data-h=mk_tag>\xyz</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>name</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>value</h-><h- data-h=sym_par>)</h-></code-block>
<p>Only the literal <code>=</code> character can be used for named arguments,
not its escaped variant <code><h- data-h=err>\</h-><h- data-h=err>=</h-></code>.
</p></tip-block>

<h5 id=positional-arguments><a class=para href=#positional-arguments></a>4.3.2.2. Positional arguments</h5>

<p>A <dfn>positional argument</dfn> is a <g-term>group-member</g-term> of the form
<g-term>member-value</g-term>.
</p>
<p>Positional arguments are content just like any other content,
except that an unbalanced closing U+005Dย(<tt->]</tt->) or a U+002Cย(<tt->,</tt->)
ends the content.
</p>
<h5 id=ellipses><a class=para href=#ellipses></a>4.3.2.3. Ellipses</h5>

<p>An <dfn>ellipsis argument</dfn> is a <g-term>group-member</g-term>
spelled <code><h- data-h=name_attr>...</h-></code>.
Ellipsis arguments are placeholders which expand to arguments provided to a surrounding macro.
See also <a href=#dir-cowel_macro>ยง8.8.2. <code><h- data-h=mk_tag>\cowel_macro</h-></code> โ Define a macro</a> and <a href=#dir-cowel_put>ยง8.8.3. <code><h- data-h=mk_tag>\cowel_put</h-></code> โ Process provided macro content or arguments</a>.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> Define a macro for generating &lt;div&gt; elements</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>div</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>div</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>attr</h-> <h- data-h=sym_punc>=</h-> <h- data-h=sym_par>(</h-><h- data-h=name_attr>...</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h->

<h- data-h=mk_tag>\div</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>id</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>abc</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->inner text<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>div</h-> <h- data-h=mk_attr>id</h-><h- data-h=sym_punc>=</h-><h- data-h=str>abc</h-><h- data-h=sym_punc>&gt;</h->inner text<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>div</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>

<p>Specifically, any positional argument which begins with <code><h- data-h=name_attr>...</h-></code>
(ignoring leading whitespace and comments)
is considered an ellipsis.
The text <tt->...</tt-> is not considered an ellipsis if it appears anywhere else
or has preceding content within an argument.
</p>
<p>An error is raised if an ellipsis is used as an argument outside of a macro expansion.
</p>
<example-block><p><intro-></intro-> 
</p><code-block><h- data-h=mk_tag>\m</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>...</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-> <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, providing string "...", not an ellipsis</h->
<h- data-h=mk_tag>\m</h-><h- data-h=sym_par>(</h-><h- data-h=name_attr>...</h-><h- data-h=sym_par>)</h->   <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> error: ellipsis is not expanded from a macro</h-></code-block>
</example-block>

<h5 id=groups><a class=para href=#groups></a>4.3.2.4. Groups</h5>

<p>Groups make it possible to group any of the aforementioned constructs.
Groups begin with <code><h- data-h=sym_par>(</h-></code>
and end with <code><h- data-h=sym_par>)</h-></code>.
They can appear both in positional and in named arguments.
</p>
<example-block><p><intro-></intro-> 
</p><code-block><h- data-h=mk_tag>\d</h-><h- data-h=sym_par>(</h-><h- data-h=sym_par>(</h-><h- data-h=str>x</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>,</h-> <h- data-h=sym_par>(</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>,</h-> <h- data-h=sym_par>(</h-><h- data-h=str>y</h-><h- data-h=sym_punc>,</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h->    <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> groups as positional arguments</h->
<h- data-h=mk_tag>\d</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>n</h-> <h- data-h=sym_punc>=</h-> <h- data-h=sym_par>(</h-><h- data-h=str>x</h-><h- data-h=sym_punc>,</h-> <h- data-h=str>y</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h->       <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> group as named argument</h->
<h- data-h=mk_tag>\d</h-><h- data-h=sym_par>(</h-><h- data-h=sym_par>(</h-><h- data-h=sym_par>(</h-><h- data-h=sym_par>(</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h->           <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> nested empty groups</h-></code-block>
</example-block>

<warning-block><p><intro-></intro-> 
In the future, parentheses surrounding a single positional argument
will be treated as (ignored) parentheses around an expression,
like in typical programming languages.
</p>
<p>For a group containing a single positional member,
<code>(x,)</code> may also be used.
That is, the trailing comma can only be used in a group,
not in an expression,
so it acts as a disambiguator.
</p></warning-block>

<h4 id=directive-content><a class=para href=#directive-content></a>4.3.3. Directive content</h4>

<p>The <dfn>directive content</dfn> is the primary input to a directive.
It is delimited by a '<tt->{</tt->' and ends with a <em>matching</em> closing '<tt->}</tt->'.
This means that you can have opening and closing braces inside text,
but they need to be balanced.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_brac>{</h->Bold text { with braces }.<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h->Bold text { with braces }.<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>

<p>Escape sequences don't participate in this "brace matching",
so they can be used to literally produce a brace character.
</p><example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_brac>{</h->Bold text <h- data-h=str_esc>\</h-><h- data-h=str_esc>{</h-> with brace.<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h->Bold text { with brace.<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>

<p>Unlike in the directive arguments,
whitespace is not trimmed.
</p><example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_brac>{</h->bold<h- data-h=sym_brac>}</h-> <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>i</h-><h- data-h=sym_brac>{</h-> italic <h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h->bold<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-> <h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>i</h-><h- data-h=sym_punc>&gt;</h-> italic <h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>i</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>

<note-block><p><intro-></intro-> 
Only one such block of content can be provided, unlike in TeX,
which has a similar syntax,
but permits multiple blocks. Each block is separated by a pair of braces.
</p></note-block>

<h2 id=document-processing><a class=para href=#document-processing></a>5. Document processing</h2>

<p>A COWEL document is processed from top to bottom,
left to right,
where each piece of content is fed into the current content policy.
</p>
<p>There exists a <dfn>top-level content policy</dfn> which takes its input
and writes it to the output HTML file.
</p>
<h3 id=contexts-and-output><a class=para href=#contexts-and-output></a>5.1. Content policies</h3>

<p>A <dfn>content policy</dfn> dictates how each pice of content
(text, comments, escapes, directives)
is transformed into HTML or consumed in some other way.
For example, most content policies ignore comments,
process directives, etc.,
but other policies can process all these pieces of content into text.
</p>
<p>Content policies are <dfn>piped</dfn>,
meaning that the output of one policy is used as the input to another policy.
In a COWEL document, it is common to create long pipes of content policies.
These ultimately terminate in the top-level content policy
or in a policy which captures the output and writes it to memory for further processing.
</p>
<p>The following builtin content policies exist:
</p>
<dl>
  <dt>To-HTML policy</dt>
  <dd>
    Comments are ignored,
    escape sequences are expanded,
    text is sanitized and converted to "inner HTML" text for elements, and
    directives are processed as usual.
    Received HTML is taken literally,
    and received plaintext is sanitized like text.
  </dd>

  <dt>Highlight policy</dt>
  <dd>
    Like a to-HTML policy,
    but any text content and any received plaintext
    has syntax highlighting applied to it.
  </dd>

  <dt>Paragraphs policy</dt>
  <dd>
    Like a to-HTML policy,
    but surrounds given text content in paragraphs,
    and treats blank lines in text as paragraph separators.
    See <a href=#paragraph-splitting>ยง8.6.1. Paragraph splitting</a> for details.
  </dd>

  <dt>No-invoke policy</dt>
  <dd>
    Like a to-HTML policy,
    but directives are not processed.
    Instead, the source code of directives is taken, sanitized,
    and fed as HTML into the surrounding policy.
  </dd>

  <dt>Actions policy</dt>
  <dd>
    Ignores text, escape sequences, and comments,
    and passes any other content (e.g. directives)
    to the surrounding policy.
  </dd>

  <dt>Text-only policy</dt>
  <dd>
    Comments are ignored,
    escape sequences are expanded,
    text is taken literally, and
    directives are processed as usual.
    HTML content fed into this policy is ignored.
  </dd>

  <dt>Text-as-HTML policy</dt>
  <dd>
    Like a text-only policy,
    but instead of feeding its parent policy with the generated plaintext,
    all plaintext is reinterpreted as HTML before being fed into the parent policy.
  </dd>

  <dt>As-text policy</dt>
  <dd>
    Like a text-only policy,
    but instead of discarding HTML,
    HTML is reinterpreted as plaintext.
  </dd>

  <dt>Source-as-text policy</dt>
  <dd>
    The source code of all processed content is interpreted as plaintext
    and fed into the surrounding policy.
    This includes comments.
  </dd>
</dl>

<p>To <dfn>process directives as usual</dfn> means that when a directive is encountered,
a definition matching the directive name is looked up,
and the definition is invoked with the arguments and content of the directive.
</p>
<p>The top-level content policy within a document is a
paragraph split content policy,
feeding content into an HTML content policy.
</p>
<h3 id=directive-processing><a class=para href=#directive-processing></a>5.2. Directive processing</h3>

<p>The job of directives is to feed the current content policy with content.
Unlike text or escape sequences,
directives can do so programmatically.
</p>
<example-block><p><intro-></intro-> 
In the COWEL snippet <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_brac>{</h->x<h- data-h=sym_brac>}</h-></code>,
the <code><h- data-h=mk_tag>\b</h-></code> directive feeds the current content policy with
</p><ul>
  <li>an opening <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-></code> tag,</li>
  <li>all content within <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_brac>{</h->x<h- data-h=sym_brac>}</h-></code>, i.e. the text <code>x</code>, and</li>
  <li>a closing <code><h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-></code> tag.</li>
</ul>

<p>Content policies differ in how they treat the content they're fed:
</p><ul>
  <li>
    At a top level within the document,
    the opening <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-></code> and closing <code><h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-></code>
    are simply written as HTML to the output file.
    The given text <code>x</code> is sanitized (i.e. characters like <tt->&lt;</tt-> are escaped)
    and turned into inner HTML content.
    The result is simply <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h->x<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-></code>.
  </li>
  <li>
    When fed into a highlight policy,
    HTML tags are interpreted literally in the same way.
    However, syntax highlighting is applied to the given input text,
    resulting in <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-><i>syntax highlighted x</i><h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-></code>.
  </li>
  <li>
    A literally content policy would not have processed <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_brac>{</h->x<h- data-h=sym_brac>}</h-></code> in the first place,
    but taken its source code interpreted as text,
    and fed that into the surrounding policy.
  </li>
  <li>โฆ</li>
</ul>
</example-block>

<h4 id=lazy-processing><a class=para href=#lazy-processing></a>5.2.1. Lazy processing</h4>

<p>Unlike in typical programming languages,
where the input to a function is processed at the call site and the resulting values
are passed into the function,
COWEL directives have <em>absolute</em> control over their inputs and how they are processed.
</p>
<p>Say you have a JavaScript function:
</p><code-block><h- data-h=kw>function</h-> <h- data-h=name>f</h-><h- data-h=sym_par>(</h-><h- data-h=name>x</h-><h- data-h=sym_par>)</h-> <h- data-h=sym_brac>{</h->
    <h- data-h=name>console</h-><h- data-h=sym_op>.</h-><h- data-h=name>log</h-><h- data-h=sym_par>(</h-><h- data-h=name>x</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>;</h->
<h- data-h=sym_brac>}</h->
<h- data-h=name>f</h-><h- data-h=sym_par>(</h-><h- data-h=num>2</h-> <h- data-h=sym_op>+</h-> <h- data-h=num>2</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>;</h-></code-block>
<p><code><h- data-h=name>f</h-></code> has no idea that its input was originally <code><h- data-h=num>2</h-> <h- data-h=sym_op>+</h-> <h- data-h=num>2</h-></code>.
It only sees the value <code><h- data-h=num>4</h-></code> and prints it, "oblivious to the outside".
</p>
<p>COWEL follows a different model:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>comment</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_brac>{</h->x<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-></code-block>
<p>No <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-></code> tag is ever generated because <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_brac>{</h->x<h- data-h=sym_brac>}</h-></code> is never processed.
<code><h- data-h=mk_tag>\comment</h-></code> is not magical feature;
it simply has control over all of its contents and arguments,
and it can choose not to process them.
</p>
<p>You can even make a <code><h- data-h=mk_tag>\comment2</h-></code> directive that works
just like <code><h- data-h=mk_tag>\comment</h-></code> yourself:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>comment2</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=sym_brac>}</h-></code-block>

<h2 id=types-intro><a class=para href=#types-intro></a>6. Types</h2>

<p>While most of the content a user writes tends to be in a markup context,
some is written in a <dfn>scripting context</dfn>.
For example, inside the <g-term>group</g-term> of a <g-term>directive-splice</g-term>.
</p>
<p>A scripting context functions similarly to other programming languages,
like JavaScript;
there are values and types,
which can be combined using expressions.
</p>
<note-block><p><intro-></intro-> 
The capabilities of the scripting context are currently extremely limited,
but should be expanded greatly in the near future.
</p></note-block>

<code-block><h- data-h=name_nt_decl>type</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>prefix-type</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>|</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>prefix-type</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>prefix-type</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>suffix-type</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>type-prefix</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>(</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>type-list</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>)</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>type-prefix</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>prefixed-type</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>type-prefix</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>group</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>pack</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>named</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>opt</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>type-list</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>type</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>,</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>type</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_sqr>[</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>,</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_sqr>]</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>prefixed-type</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>prefixed-suffix-type</h->
  <h- data-h=sym_op>|</h-> <h- data-h=name_nt>type-prefix</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>prefixed-type</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>suffix-type</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>optional-type</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>?</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>prefixed-suffix-type</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>basic-type</h-><h- data-h=sym_op>,</h-> <h- data-h=sym_brac>{</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>?</h-><h- data-h=str_dlim>"</h-> <h- data-h=sym_brac>}</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>optional-type</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=name_nt>basic-type</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>(</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_op>,</h-> <h- data-h=name_nt>type</h-><h- data-h=sym_op>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>)</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h->
<h- data-h=name_nt_decl>basic-type</h->
  <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>any</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>nothing</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>unit</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>null</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>bool</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>int</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>float</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>str</h-><h- data-h=str_dlim>"</h->
  <h- data-h=sym_op>|</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>block</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>;</h-></code-block>

<p>The commas in a *type-list* act as separators and have no impact on the type.
</p>
<p>Note that the type `group(int)` is a unambigously a *prefix-type* where `int` is the only element in the *type-list*,
not a `group` *type-prefix* followed by an `(int)` *optional-type*.
</p>
<p>Also note that in `group(int)?`, the `?` forms an optional group, not a group of an optional `int`.
</p>
<h3 id=general-principles><a class=para href=#general-principles></a>6.1. General principles</h3>

<p>The process of converting any union type $U$ into its canonical form
is called *canonicalization*.
A type is in its *canonical* form if canonicalization leaves the type unchanged;
otherwise it is in its *degenerate* form.
</p>
<p>Two types are *equivalent* if they are identical after both are canonicalized.
Equivalent types are semantically the same, but may be spelled differently.
</p>
<p>For example, the degenerate union type `any | any` is equivalent to `any`.
</p>
<h3 id=basic-types><a class=para href=#basic-types></a>6.2. Basic types</h3>

<p>Basic types are the most simple building block of the type system.
They cannot be broken down any further, although some basic types
(namely `any` and `nothing` are symbolic types).
</p>
<p>Canonicalization has no effect for basic types;
they are always in their canonical form.
</p>
<h4 id=type-any><a class=para href=#type-any></a>6.2.1. <tt-><h- data-h=kw_type>any</h-></tt-> โ Top type</h4>

<p><tt-><h- data-h=kw_type>any</h-></tt-> is the root of the type hierarchy,
i.e. every other type is a subtype of <tt-><h- data-h=kw_type>any</h-></tt->.
This is also known as a "top type".
</p>
<p><tt-><h- data-h=kw_type>any</h-></tt-> may be used as a type for parameters and variables,
but there are no value of type <tt-><h- data-h=kw_type>any</h-></tt->.
</p>
<h4 id=type-nothing><a class=para href=#type-nothing></a>6.2.2. <tt-><h- data-h=kw_type>nothing</h-></tt-> โ Bottom type</h4>

<p><tt-><h- data-h=kw_type>nothing</h-></tt-> is a type of which there are no values.
This is also known as a "bottom type".
</p>
<p>It is the type of expressions that terminate, i.e. don't return.
</p>
<h4 id=type-unit><a class=para href=#type-unit></a>6.2.3. <tt-><h- data-h=kw_type>unit</h-></tt-> โ Unit type</h4>

<p><tt-><h- data-h=kw_type>unit</h-></tt-> is a unit type, i.e. a type with only one possible value
also spelled <tt-><h- data-h=kw_type>unit</h-></tt->.
</p>
<p>This is used as a result for directives that don't produce any other result.
</p>
<h4 id=type-null><a class=para href=#type-null></a>6.2.4. <tt-><h- data-h=kw_type>null</h-></tt-> โ Null type</h4>

<p><tt-><h- data-h=kw_type>null</h-></tt-> is a unit type with only one possible value
also spelled <tt-><h- data-h=kw_type>null</h-></tt->.
</p>
<note-block><p><intro-></intro-> 
Unlike <tt-><h- data-h=kw_type>unit</h-></tt->, <tt-><h- data-h=kw_type>null</h-></tt-> is used to indicate errors.
</p></note-block>

<h4 id=type-bool><a class=para href=#type-bool></a>6.2.5. <tt-><h- data-h=kw_type>bool</h-></tt-> โ Boolean type</h4>

<p><tt-><h- data-h=kw_type>bool</h-></tt-> is a boolean type.
It can represent two values: <tt-><h- data-h=kw_type>true</h-></tt-> and <tt-><h- data-h=kw_type>false</h-></tt->.
</p>
<h4 id=type-int><a class=para href=#type-int></a>6.2.6. <tt-><h- data-h=kw_type>int</h-></tt-> โ Integer</h4>

<p><tt-><h- data-h=kw_type>int</h-></tt-> is an integer.
It can represent any integer value (although in practice, there is an implementation limit);
this includes negative numbers.
</p>
<note-block><p><intro-></intro-> 
An <tt-><h- data-h=kw_type>int</h-></tt-> can be obtained using integer literals
such as <code>123</code> or <code>0xff</code>.
</p></note-block>

<h4 id=type-float><a class=para href=#type-float></a>6.2.7. <tt-><h- data-h=kw_type>float</h-></tt-> โ 64-bit floating-point number</h4>

<p><tt-><h- data-h=kw_type>float</h-></tt-> is a double-precision floating-point number.
That is, a number in <em>binary64</em> format, as specified in IEEE-754.
</p>
<note-block><p><intro-></intro-> 
An <tt-><h- data-h=kw_type>float</h-></tt-> can be obtained using <g-term>float-literal</g-term>s
such as <code>1.0</code> or <code>10e+5</code>.
</p></note-block>

<h4 id=type-str><a class=para href=#type-str></a>6.2.8. <tt-><h- data-h=kw_type>str</h-></tt-> โ String</h4>

<p><tt-><h- data-h=kw_type>str</h-></tt-> is a UTF-8 encoded string.
</p>
<note-block><p><intro-></intro-> 
A value of type <tt-><h- data-h=kw_type>str</h-></tt-> can be obtained using string literals
such as <code>"abc"</code>.
</p></note-block>

<h4 id=type-block><a class=para href=#type-block></a>6.2.9. <tt-><h- data-h=kw_type>block</h-></tt-> โ Block</h4>

<p><tt-><h- data-h=kw_type>block</h-></tt-> stores markup elements.
It is very similar to <tt-><h- data-h=kw_type>str</h-></tt->,
but is evaluated lazily, meaning that it has no effect until spliced.
</p>
<note-block><p><intro-></intro-> 
A value of type <tt-><h- data-h=kw_type>block</h-></tt-> can be obtained using block literals
such as <code>{abc}</code>.
</p></note-block>

<h3 id=compound-types><a class=para href=#compound-types></a>6.3. Compound types</h3>

<p>Compound types are formed from other types, possibly from other compound types.
</p>
<h4 id=type-group><a class=para href=#type-group></a>6.3.1. <tt-><h- data-h=kw_type>group</h-></tt-> โ Product type</h4>

<p><tt-><h- data-h=kw_type>group</h-></tt-> combines other types,
called its <dfn>members</dfn>, in sequence.
This is also known as a product type.
</p>
<example-block><p><intro-></intro-> 
For example <tt-><h- data-h=kw_type>group(int, string)</h-></tt-> is group containing an <code>int</code>
followed by a <tt-><h- data-h=kw_type>string</h-></tt->.
A value of such a type can be obtained with the literal <code>(0, "x")</code>.
</p></example-block>

<p>Canonicalization of a <tt-><h- data-h=kw_type>group</h-></tt-> <math display=inline><mi>G</mi></math> is performed as follows:
</p>
<ol>
  <li>
    All members of <math display=inline><mi>G</mi></math> are canonicalized.
  </li>
  <li>
    If any member of <math display=inline><mi>G</mi></math> is <tt-><h- data-h=kw_type>nothing</h-></tt->,
    <math display=inline><mi>G</mi></math> is <tt-><h- data-h=kw_type>nothing</h-></tt->.
  </li>
</ol>

<h4 id=type-named><a class=para href=#type-named></a>6.3.2. <tt-><h- data-h=kw_type>named</h-></tt-> โ Named group member</h4>

<p><tt-><h- data-h=kw_type>named</h-></tt-> is a compound type only nestable
in a <tt-><h- data-h=kw_type>group</h-></tt-> or <tt-><h- data-h=kw_type>pack</h-></tt->.
</p>
<p>For example, <tt-><h- data-h=kw_type>group named int</h-></tt-> is a <tt-><h- data-h=kw_type>group</h-></tt->
containing only a single <tt-><h- data-h=kw_type>int</h-></tt->.
A value of such a type can be obtained with the literal <code>(x = 0)</code>.
</p>
<p>Canonicalization of a <tt-><h- data-h=kw_type>named</h-></tt-> <math display=inline><mi>N</mi></math> is performed as follows:
</p>
<ol>
  <li>
    The nested type of <math display=inline><mi>N</mi></math> is canonicalized.
  </li>
  <li>
    If the nested type of <math display=inline><mi>N</mi></math> is <tt-><h- data-h=kw_type>nothing</h-></tt->,
    <math display=inline><mi>N</mi></math> is <tt-><h- data-h=kw_type>nothing</h-></tt->.
  </li>
</ol>

<h4 id=type-pack><a class=para href=#type-pack></a>6.3.3. <tt-><h- data-h=kw_type>pack</h-></tt-> โ Variadic pack of group members</h4>

<p><tt-><h- data-h=kw_type>pack</h-></tt-> is a compound type only nestable in a <tt-><h- data-h=kw_type>group</h-></tt->.
It indicates a variadic repetition of the same type.
</p>
<example-block><p><intro-></intro-> 
For example, <tt-><h- data-h=kw_type>group pack int</h-></tt->
is a <tt-><h- data-h=kw_type>group</h-></tt-> containing any amount of <tt-><h- data-h=kw_type>int</h-></tt->s.
A value of such a type can be obtained with the literals
</p><ul>
  <li><code>(,)</code> (for an empty group)</li>
  <li><code>(1,)</code> (for a group with a single member),</li>
  <li><code>(1,1)</code> (for a group with two members), etc.</li>
</ul>
</example-block>

<p>Canonicalization of a <tt-><h- data-h=kw_type>pack</h-></tt-> <math display=inline><mi>P</mi></math> is performed as follows:
</p>
<ol>
    <li>
      The nested type of <math display=inline><mi>P</mi></math> is canonicalized.
    </li>
    <li>
      If the nested type of <math display=inline><mi>P</mi></math> is <tt-><h- data-h=kw_type>nothing</h-></tt->,
      <math display=inline><mi>P</mi></math> is <tt-><h- data-h=kw_type>nothing</h-></tt->.
    </li>
</ol>

<h4 id=type-lazy><a class=para href=#type-lazy></a>6.3.4. <tt-><h- data-h=kw_type>lazy</h-></tt-></h4>

<p><tt-><h- data-h=kw_type>lazy</h-></tt-> is a lazily evaluated value.
That is, when specified as a parameter of a directive,
it only gets evaluated when actually needed by that directive.
</p>
<p>Canonicalization of a <tt-><h- data-h=kw_type>lazy</h-></tt-> <math display=inline><mi>L</mi></math> is performed
by canonicalizing its nested type.
</p>
<h4 id=type-union><a class=para href=#type-union></a>6.3.5. Union</h4>

<p>Unions can be formed by combining other types with <code>|</code>.
They describe variables and parameters that can hold one of a fixed number of alternatives.
However, a value cannot be of union type.
</p>
<p>Alternatives of a union type are subtypes of that union type.
Furthermore, a union type <math display=inline><mi>S</mi></math> is a subtype of a union type <math display=inline><mi>U</mi></math>
if the set of alternatives of <math display=inline><mi>S</mi></math> is a subset of the alternatives of <math display=inline><mi>U</mi></math>.
</p>
<example-block><p><intro-></intro-> 
For example, <tt-><h- data-h=kw_type>int | str</h-></tt-> is a union of
<tt-><h- data-h=kw_type>int</h-></tt-> and <tt-><h- data-h=kw_type>str</h-></tt->.
<tt-><h- data-h=kw_type>int</h-></tt-> and <tt-><h- data-h=kw_type>str</h-></tt-> are subtypes of this union,
so a value convertible to this union type can be obtained with
either <code>0</code> or <code>"x"</code>.
</p></example-block>

<p>Canonicalization of a <tt-><h- data-h=kw_type>union</h-></tt-> <math display=inline><mi>U</mi></math> is performed as follows:
</p>
<ol>
  <li>
    Every alternative of <math display=inline><mi>U</mi></math> is canonicalized.
    <math display=inline><mi>U</mi></math> is converted to another union type
    where each alternative that is also a union
    is expanded or "flattened" into the top-level union.
    For example, <tt-><h- data-h=kw_type>int | (str | bool)</h-></tt->
    is converted to <tt-><h- data-h=kw_type>int | str | bool</h-></tt->.
  </li>
  <li>
    Any <tt-><h- data-h=kw_type>nothing</h-></tt-> alternatives are removed.
  </li>
  <li>
    The alternatives are sorted using an unspecified total order of types.
  </li>
  <li>
    Any duplicate alternatives are removed.
  </li>
  <li>
    If <math display=inline><mi>U</mi></math> now holds a single alternative,
    <math display=inline><mi>U</mi></math> is that alternative.
  </li>
  <li>
    If <math display=inline><mi>U</mi></math> now holds no alternatives,
    <math display=inline><mi>U</mi></math> is <tt-><h- data-h=kw_type>nothing</h-></tt->.
  </li>
  <li>
    If any alternative of <math display=inline><mi>U</mi></math> is <tt-><h- data-h=kw_type>any</h-></tt->,
    <math display=inline><mi>U</mi></math> is <tt-><h- data-h=kw_type>any</h-></tt->.
  </li>
</ol>

<h5 id=shorthand-notation-for-optional-types-><a class=para href=#shorthand-notation-for-optional-types-></a>6.3.5.1. Shorthand notation for optional types (<tt->?</tt->)</h5>

<p>The type suffix <tt-><h- data-h=kw_type>?</h-></tt-> forms a union of the given type and <tt-><h- data-h=kw_type>null</h-></tt->.
</p>
<example-block><p><intro-></intro-> 
<tt-><h- data-h=kw_type>int?</h-></tt-> is equivalent to <tt-><h- data-h=kw_type>int | null</h-></tt->.
</p></example-block>

<h3 id=splicing><a class=para href=#splicing></a>6.4. Splicing</h3>

<p>Values can be spliced into strings and blocks.
For example, <code>"Hello, <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>d</h->!"</code> splices the result of the directive <code><h- data-h=mk_tag>\d</h-></code>
(with no arguments and no block provided)
into a string,
and <code>{Hello, <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>d</h->!}</code> splices the result of <code><h- data-h=mk_tag>\d</h-></code> into a block.
</p>
<p>Splicing a directive always results in evaluation of that directive.
For example, splicing <code><h- data-h=mk_tag>\cowel_macro</h-></code> evaluates <code><h- data-h=mk_tag>\cowel_macro</h-></code>,
and its resulting <tt-><h- data-h=kw_type>unit</h-></tt-> is spliced (resulting in no produced text).
</p>
<p>When a value is spliced, it is converted into plaintext.
When splicing into strings, that plaintext simply becomes part of the string content.
For blocks (which are always lazy-evaluated),
splicing means that the resulting plaintext
is fed into the current content policy once the block itself is spliced.
</p>
<p>The effect of splicing depends on the type of value:
</p><ul>
  <li>
    Splicing a value of type <tt-><h- data-h=kw_type>unit</h-></tt-> produces no characters.
  </li>
  <li>
    Splicing a value of type <tt-><h- data-h=kw_type>null</h-></tt-> produces the string <code>"null"</code>.
  </li>
  <li>
    Splicing a value of type <tt-><h- data-h=kw_type>bool</h-></tt-> produces
    <code>"true"</code> if the value is <tt-><h- data-h=kw_type>true</h-></tt->, and
    <code>"false"</code> otherwise.
  </li>
  <li>
    Splicing a value of type <tt-><h- data-h=kw_type>int</h-></tt-> produces
    a string representing the value in decimal form
    without leading zeros.
    For example, the <g-term>int-literal</g-term> <code>-015</code>
    result in '<tt->-15</tt->' when spliced.
  </li>
  <li>
    Splicing a value of type <tt-><h- data-h=kw_type>float</h-></tt-> produces
    a string representing the value in decimal form
    as specified below.
  </li>
  <li>
    Splicing a value of type <tt-><h- data-h=kw_type>str</h-></tt-> produces
    its string contents.
  </li>
  <li>
    Splicing a value of type <tt-><h- data-h=kw_type>block</h-></tt-> splices each markup element within.
  </li>
  <li>
    Splicing a value of type <tt-><h- data-h=kw_type>group</h-></tt-> raises an error.
  </li>
</ul>

<h4 id=splicing-float><a class=para href=#splicing-float></a>6.4.1. Splicing values of type <tt-><h- data-h=kw_type>float</h-></tt-></h4>

<p>Splicing a value <math display=inline><mi>x</mi></math> of type <tt-><h- data-h=kw_type>float</h-></tt->
is done as follows:
</p>
<ul>
  <li>
    If <math display=inline><mi>x</mi></math> is a finite value,
    the numeric value in decimal form is produced.
    There are infinitely many such representations;
    one is chosen as follows:
    <ul>
      <li>
        The shortest representation is chosen so that
        when a trailing '<tt->.</tt->' is added (if need be),
        when the representation is interpreted as a
        <g-term>float-literal</g-term>, the same rounded value is recovered.
        Representations with empty integral or fractional part
        adjacent to '<tt->.</tt->' are not eligible.
        Only exponents starting with '<tt->e+</tt->' or '<tt->e-</tt->' are eligible.

        <example-block><p><intro-></intro-> <tt->0.1</tt-> is chosen over <tt->0.100000000000000005</tt->
        as a representation of the exact value
        <math display=inline><mn>0.1000000000000000055511151231257827021181583404541015625</mn></math>,
        despite the latter representation having a lower difference.
        <tt->.1</tt-> is not chosen because it has an empty integral part.
</p>        
<p>        Both '<tt->1000</tt->' and '<tt->1e+3</tt->' are equally good candidates
        for representing the value <math display=inline><mn>1000</mn></math>
        because appending a '<tt->.</tt->' would make the former a valid <g-term>float-literal</g-term>,
        but this added '<tt->.</tt->' is not counted toward the length.
        </p></example-block>
      </li>
      <li>
        Then, if there are several such equally long representations,
        the representation with the smallest difference from <math display=inline><mi>x</mi></math> is chosen.
        <example-block><p><intro-></intro-> <tt->5.038814306823721<mark>5</mark>e+7</tt-> is chosen over <tt->5.038814306823721<mark>4</mark>e+7</tt->
        as a representation of the exact value
        <math display=inline><mrow><mn>5.03881430682372152805328369140625</mn><mo>ร</mo><msup><mn>10</mn><mn>7</mn></msup></mrow></math>.</p></example-block>
      </li>
      <li>
        Then, if there are several such equidistant representations
        of which both or neither have an <g-term>exponent</g-term>,
        ties are broken as if by roundTiesToEven as specified in IEEE-754.
        <example-block><p><intro-></intro-> <tt->1125899906842624.2</tt-> is chosen over <tt->1125899906842624.3</tt->
        as a representation of the exact value
        <math display=inline><mn>1125899906842624.25</mn></math>.</p></example-block>
      </li>
      <li>
        Then, if there are several such representations of zero distance,
        the one without an <g-term>exponent</g-term> is chosen.
        <example-block><p><intro-></intro-> <tt->1000</tt-> is chosen over <tt->1e+3</tt-> as a representation of <math display=inline><mn>1000</mn></math>.
        The previous step does not yet favor '<tt->1000</tt->' due to having an even
        least significant digit.</p></example-block>
      </li>
      <li>
        Then, if both have an <g-term>exponent</g-term>,
        the one with the greater exponent value is chosen.
        <example-block><p><intro-></intro-> <tt->1e+10</tt-> is chosen over <tt->10e+9</tt->
        as a representation of <math display=inline><msup><mn>10</mn><mn>9</mn></msup></math>.</p></example-block>
      </li>
    </ul>
    All negative values are represented with a leading U+002Dย(<tt->-</tt->),
    including negative zero.
  </li>
  <li>
    Otherwise, if <math display=inline><mi>x</mi></math> is positive infinity,
    '<tt->infinity</tt->' is produced.
  </li>
  <li>
    Otherwise, if <math display=inline><mi>x</mi></math> is negative infinity,
    '<tt->-infinity</tt->' is produced.
  </li>
  <li>
    Otherwise, if <math display=inline><mi>x</mi></math> is NaN,
    '<tt->NaN</tt->' is produced.
  </li>
</ul>

<note-block><p><intro-></intro-> 
The result has at most 17 significant decimal digits;
this is sufficient to represent any double-precision floating-point number.
The produced output is at most 24 characters long
(including the radix point, exponent separator, and 4 exponent digits).
</p>
<p>See also <a href=https://www.exploringbinary.com/the-shortest-decimal-string-that-round-trips-examples/ class=sans>https://www.exploringbinary.com/the-shortest-decimal-string-that-round-trips-examples/</a>
</p></note-block>




<h2 id=themes><a class=para href=#themes></a>7. Themes</h2>

<p>COWEL outputs documents that can be viewed in <dfn>light mode</dfn> and <dfn>dark mode</dfn>.
</p>
<p>When the document is opened with support for JavaScript,
there is an button in the top-right that can be used to switch between three modes:
</p><ul>
  <li>Sync the theme with the OS (default)</li>
  <li>Light mode (ignoring system preference)</li>
  <li>Dark mode (ignoring system preference)</li>
</ul>

<p>Forced light/dark mode works by adding a <tt->light</tt-> or <tt->dark</tt->
class to the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>html</h-><h- data-h=sym_punc>&gt;</h-></code> element in the DOM.
</p>
<important-block><p><intro-></intro-> 
If you want to customize colors with CSS,
remember to make them respond to theme and OS preference changes.
</p>
<p>For reference, you can look at the CSS in the COWEL source code to see how it's done properly.
</p></important-block>
<h2 id=new-directives><a class=para href=#new-directives></a>8. New directives</h2>

<p>Find below a list of builtin directives.
That is, directives that you can always use
because they are "built into the language".
</p>
<note-block><p><intro-></intro-> 
These builtin directives should rarely be used directly,
but through macro packages which utilize them.
</p>
<p>Even if one wanted to use them,
builtin directive have long names which make them impractical for direct use in markup.
However, those long names are self-document, unambiguous,
and guaranteed not to collide with any user directives.
</p></note-block>

<h3 id=common-principles><a class=para href=#common-principles></a>8.1. Common principles</h3>

<p>There are a few common principles,
which all builtin directives have in common:
</p>
<ul>
  <li>
    Unless otherwise stated,
    arguments to builtin directives are processed using the
    text-only policy (<a href=#contexts-and-output>ยง5.1. Content policies</a>).
  </li>
  <li>
    Arguments to builtin directives
    use the usual argument matching (<a href=#usual-argument-matching>ยง8.1.2. Usual argument matching</a>).
  </li>
  <li>
    Whenever content or arguments are said to be ignored,
    a warning is emitted when content or arguments are provided by the user, respectively.
  </li>
</ul>

<h4 id=parameter-notation><a class=para href=#parameter-notation></a>8.1.1. Parameter notation</h4>

<p>While COWEL does not yet support a syntax for defining directives with parameters
of a specific type, this documentation does for the builtin directives.
This notation consists of
</p><ul>
  <li>the directive name,</li>
  <li>
    a list of parameters in parentheses,
    consisting of the parameter name and
    the parameter <g-term>type</g-term> (<a href=#types-intro>ยง6. Types</a>),
    separated by '<tt->:</tt->'
    and optionally followed by '<tt->=</tt->' and a <dfn>default value</dfn>, and
  </li>
  <li>
    optionally,
    the symbol <tt->{...}</tt-> to indicate that the directive accepts content.
  </li>
  <li>
    the result type of the directive,
    separated by '<tt->:</tt->'
  </li>
</ul>

<example-block><p><intro-></intro-> 
The description of <code><h- data-h=mk_tag>\cowel_html_element</h-></code> looks as follows:
</p><pre>
<h- data-h=mk_tag>cowel_html_element</h->(
  <h- data-h=mk_attr>name</h->: <h- data-h=kw_type>str</h->,
  <h- data-h=mk_attr>attr</h->: <h- data-h=kw_type>lazy(group pack named string)?</h->,
){...}: <h- data-h=kw_type>block</h->
</pre>

<p>Or equivalently:
</p><pre>
<h- data-h=mk_tag>cowel_html_element</h->(
  <h- data-h=mk_attr>name</h->: <h- data-h=kw_type>string</h->,
  <h- data-h=mk_attr>attr</h->: <h- data-h=kw_type>lazy(group(pack(named(string))))?</h->,
){...}: <h- data-h=kw_type>block</h->
</pre>

<p>This describes that <code><h- data-h=mk_tag>\cowel_html_element</h-></code> can be invoked as follows,
among various options:
</p><code-block><h- data-h=mk_tag>\cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>name</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>div</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>attr</h-> <h- data-h=sym_punc>=</h-> <h- data-h=sym_par>(</h-><h- data-h=mk_attr>id</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>abc</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-></code-block>

<p><tt->div</tt-> matches the <tt-><h- data-h=mk_attr>name</h-></tt-> parameter,
and the content <tt->div</tt-> is treated as a <tt->string</tt-> value.
</p>
<p><code><h- data-h=sym_par>(</h-><h- data-h=mk_attr>id</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>abc</h-><h- data-h=sym_par>)</h-></code>
matches the <tt-><h- data-h=mk_attr>attr</h-></tt-> parameter,
and within that group,
there is a single-element <tt->pack</tt-> of <tt->named</tt-> arguments
of type <tt->string</tt-> with <tt->lazy</tt-> processing.
<tt->lazy</tt-> processing implies that even if we were to reverse the order of
<tt-><h- data-h=mk_attr>name</h-></tt-> and <tt-><h- data-h=mk_attr>attr</h-></tt->,
<tt-><h- data-h=mk_attr>name</h-></tt-> would still be processed first.
</p></example-block>

<h4 id=usual-argument-matching><a class=para href=#usual-argument-matching></a>8.1.2. Usual argument matching</h4>

<p>The <dfn>usual argument matching</dfn> allows matching positional and named arguments
to parameters of directives.
An error is raised if positional and named arguments are mixed,
unless all positional arguments appear contiguously at the start of the argument list.
</p>
<example-block><p><intro-></intro-> 
</p><code-block><h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, two positional arguments</h->
<h- data-h=mk_tag>\cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>div</h-><h- data-h=sym_punc>,</h-> <h- data-h=sym_par>(</h-><h- data-h=mk_attr>id</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>abc</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, two named arguments</h->
<h- data-h=mk_tag>\cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>name</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>div</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>attr</h-> <h- data-h=sym_punc>=</h-> <h- data-h=sym_par>(</h-><h- data-h=mk_attr>id</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>abc</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, all positional arguments appear at the start</h->
<h- data-h=mk_tag>\cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>name</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>div</h-><h- data-h=sym_punc>,</h-> <h- data-h=sym_par>(</h-><h- data-h=mk_attr>id</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>abc</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> error: positional argument following named arguments</h->
<h- data-h=mk_tag>\cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>name</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>div</h-><h- data-h=sym_punc>,</h-> <h- data-h=sym_par>(</h-><h- data-h=mk_attr>id</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>abc</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-></code-block>
</example-block>

<p>The usual argument matching is performed as follows:
</p>
<ol>
  <li>
    Positional arguments match parameters in the same order.
    An error is raised if there are more positional arguments than parameters.
  </li>
  <li>
    The following named arguments match parameters with the same name.
    An error is raised if a named argument does not match any parameter.
  </li>
  <li>
    If any parameter has not been matched by an argument,
    the parameter is matched by its default argument value if there is one,
    otherwise, if it has <tt->optional</tt-> type, it is matched by nothing, and
    otherwise an error is raised.
  </li>
</ol>

<example-block><p><intro-></intro-> 
Let <code><h- data-h=mk_tag>\d</h-></code> be a directive with parameters
<tt-><h- data-h=mk_attr>x</h-></tt->, <tt-><h- data-h=mk_attr>y</h-></tt->, and <tt-><h- data-h=mk_attr>z</h-></tt->:
</p><code-block><h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> In each of these calls,</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> a, b, and c match x, y, and z, respectively:</h->

<h- data-h=mk_tag>\d</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>z</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>c</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>y</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>b</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>x</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>a</h-><h- data-h=sym_par>)</h->  <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, all named arguments</h->
<h- data-h=mk_tag>\d</h-><h- data-h=sym_par>(</h-><h- data-h=str>a</h-><h- data-h=sym_punc>,</h-> <h- data-h=str>b</h-><h- data-h=sym_punc>,</h-> <h- data-h=str>c</h-><h- data-h=sym_par>)</h->              <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, all positional arguments</h->
<h- data-h=mk_tag>\d</h-><h- data-h=sym_par>(</h-><h- data-h=str>a</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>z</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>c</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>y</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>b</h-><h- data-h=sym_par>)</h->      <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, positional arguments followed by named arguments</h-></code-block>
</example-block>

<note-block><p><intro-></intro-> 
The usual argument matching is essentially identical to function calls in Kotlin,
but more restrictive when it comes to mixing positional and named arguments.
</p></note-block>

<h3 id=new-character-utilities><a class=para href=#new-character-utilities></a>8.2. Character utilities</h3>

<p>It is quite common that a text document should include special characters.
While COWEL is built on UTF-8 and in theory,
one could just write the character directly into the source code,
not every text editor handles special characters well,
not to mention that some characters are invisible when rendered.
</p>
<p>For portability and convenience
COWEL has builtin directives for generating and querying characters.
</p>
<h4 id=dir-cowel_char_by_entity><a class=para href=#dir-cowel_char_by_entity></a>8.2.1. <code><h- data-h=mk_tag>\cowel_char_by_entity</h-></code> โ Character by HTML character reference</h4>

<pre>
<h- data-h=mk_tag>cowel_char_by_entity</h->(<h- data-h=mk_attr>name</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>str</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_char_by_entity</h-></code> directive takes the name of a character
and outputs the respective code points as text.
<tt-><h- data-h=mk_attr>name</h-></tt-> consists of an HTML entity
without the leading '<tt->&amp;</tt->' and trailing '<tt->;</tt->'.
</p>
<example-block><p><intro-></intro-> 
The '<tt->&amp;</tt->' character can be produced in a number of ways:
</p><ul>
    <li>Literally '<tt->&amp;</tt->' in text</li>
    <li><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_char_by_entity</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>amp</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code> (like <code><h- data-h=str_esc>&amp;amp;</h-></code>, named character reference)</li>
    <li><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_char_by_entity</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>#38</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code> (like <code><h- data-h=str_esc>&amp;38;</h-></code>, decimal character reference)</li>
    <li><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_char_by_entity</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>#x26</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code> (like <code><h- data-h=str_esc>&amp;x26;</h-></code>, hexadecimal character reference)</li>
</ul>
</example-block>

<h4 id=dir-cowel_char_by_name><a class=para href=#dir-cowel_char_by_name></a>8.2.2. <code><h- data-h=mk_tag>\cowel_char_by_name</h-></code> โ Character by Unicode name</h4>

<pre>
<h- data-h=mk_tag>cowel_char_by_name</h->(<h- data-h=mk_attr>name</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>str</h->
</pre>

<p>The input to a <code><h- data-h=mk_tag>\cowel_char_by_num</h-></code> directive is a <tt-><h- data-h=kw_type>str</h-></tt-> which should be a
<a href=https://www.unicode.org/reports/tr34/#Names>Unicode name</a>
for a code point or one of its name aliases (of any category).
</p>
<p>An error is raised if the given name is not the name of a code point
or an alias thereof.
</p>
<example-block><p><intro-></intro-> 
<code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_char_by_name</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>DIGIT ZERO</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code> generates
'<tt->0</tt->', which is U+0030 DIGIT ZERO.
Case matters, i.e. <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_char_by_name</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>digit zero</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code>
raises an error,
and so do any trailing spaces or duplicate spaces in the input.
In other words, an exact character sequence is expected.
</p></example-block>

<h4 id=dir-cowel_char_by_num><a class=para href=#dir-cowel_char_by_num></a>8.2.3. <code><h- data-h=mk_tag>\cowel_char_by_num</h-></code> โ Character by code point number</h4>

<pre>
<h- data-h=mk_tag>cowel_char_by_num</h->(<h- data-h=mk_attr>num</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>str</h->
</pre>

<p>The input to a <code><h- data-h=mk_tag>\cowel_char_by_num</h-></code> directive is a <tt-><h- data-h=kw_type>str</h-></tt->
which should be a sequence of hexadecimal numbers
specifying a <a href=https://infra.spec.whatwg.org/#scalar-value>Unicode scalar value</a>;
that is, a code point which UTF-8 permits to be encoded.
All arguments are ignored.
</p>
<example-block><p><intro-></intro-> 
<code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_char_by_num</h-><h- data-h=sym_par>(</h-><h- data-h=num_deco>0x</h-><h- data-h=num>30</h-><h- data-h=sym_par>)</h-></code> generates
'<tt->0</tt->', which is U+0030 DIGIT ZERO.
</p></example-block>

<tip-block><p><intro-></intro-> 
Use of <code><h- data-h=mk_tag>\cowel_char_by_name</h-></code> can lead to much more descriptive,
human-friendly code, compared to <code><h- data-h=mk_tag>\cowel_char_by_num</h-></code>.
</p>
<p>The main issue with <code><h- data-h=mk_tag>\cowel_char_by_num</h-></code> is
that it is very non-descriptive in source code.
It simply contains a handful of digits,
and unless the reader is a Unicode expert who happens to know that sequence,
they cannot easily tell what the purpose of the character is.
</p></tip-block>

<h4 id=dir-cowel_char_get_num><a class=para href=#dir-cowel_char_get_num></a>8.2.4. <code><h- data-h=mk_tag>\cowel_char_get_num</h-></code> โ Get digits of character</h4>

<pre>
<h- data-h=mk_tag>cowel_char_get_num</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>int</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_char_get_num</h-></code> directive is essentially the
inverse of the <code><h- data-h=mk_tag>\cowel_char_by_num</h-></code> directive.
It returns the numeric value of the first input code point in <tt-><h- data-h=mk_attr>x</h-></tt->.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_char_get_num</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>j</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
U+<h- data-h=mk_tag>\cowel_str_to_upper</h-><h- data-h=sym_par>(</h-><h- data-h=mk_tag>cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=mk_tag>cowel_char_get_num</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>j</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>base</h-><h- data-h=sym_punc>=</h-><h- data-h=num>16</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>zpad</h-><h- data-h=sym_punc>=</h-><h- data-h=num>4</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>106
U+006A</code-block>
<p>Note that U+006A is the usual way in which Unicode code points are represented.
That is, <tt->U+</tt->, followed by at least four uppercase hexadecimal digits.
It is also possible to define a macro if we need this frequently:
</p><code-block><h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>code_point</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=str_esc>\</h->
U+<h- data-h=mk_tag>\cowel_str_to_upper</h-><h- data-h=sym_par>(</h-><h- data-h=mk_tag>cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=mk_tag>cowel_char_get_num</h-><h- data-h=sym_par>(</h-><h- data-h=name_attr>...</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>base</h-><h- data-h=sym_punc>=</h-><h- data-h=num>16</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>zpad</h-><h- data-h=sym_punc>=</h-><h- data-h=num>4</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>}</h->
<h- data-h=mk_tag>\code_point</h-><h- data-h=sym_par>(</h-><h- data-h=str>j</h-><h- data-h=sym_par>)</h-></code-block>
</example-block>

<bug-block><p><intro-></intro-> 
If more than one code point is provided,
some input is discarded:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_char_get_num</h-><h- data-h=sym_par>(</h-><h- data-h=str>abc</h-><h- data-h=sym_par>)</h-></code-block>
<p>This renders as
</p><div class=indent>
97
</div>
<p>... which corresponds to '<tt->a</tt->',
whereas '<tt->b</tt->' and '<tt->c</tt->' are discarded.
</p></bug-block>

<h3 id=html-utilities><a class=para href=#html-utilities></a>8.3. HTML utilities</h3>

<h4 id=dir-cowel_html_element><a class=para href=#dir-cowel_html_element></a>8.3.1. <code><h- data-h=mk_tag>\cowel_html_element</h-></code> โ HTML element</h4>

<pre>
<h- data-h=mk_tag>cowel_html_element</h->(
  <h- data-h=mk_attr>name</h->: <h- data-h=kw_type>string</h->,
  <h- data-h=mk_attr>attr</h->: <h- data-h=kw_type>lazy(group pack named string)?</h->,
){...}: <h- data-h=kw_type>block</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_html_element</h-></code> directive generates content,
surrounded in HTML opening and closing HTML tags.
That is, it
</p>
<ul>
  <li>
    writes an opening tag,
    where any named arguments are converted to HTML attributes,
  </li>
  <li>
    feeds the provided content into the current content policy, and then
  </li>
  <li>
    writes a closing tag.
  </li>
</ul>

<p>The name of the HTML element is contained in the <tt-><h- data-h=mk_attr>name</h-></tt-> parameter,
and the attributes within the HTML element
are contained within the <tt-><h- data-h=mk_attr>attr</h-></tt-> parameter.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block>This is <h- data-h=mk_tag>\cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>span</h-><h- data-h=sym_punc>,</h-> <h- data-h=sym_par>(</h-><h- data-h=mk_attr>id</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>abc</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->a span<h- data-h=sym_brac>}</h->.</code-block>
<p>Generated HTML:
</p><code-block>This is <h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>span</h-> <h- data-h=mk_attr>id</h-><h- data-h=sym_punc>=</h-><h- data-h=str>abc</h-><h- data-h=sym_punc>&gt;</h->a span<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>span</h-><h- data-h=sym_punc>&gt;</h->.</code-block>
</example-block>

<p>A <code><h- data-h=mk_tag>\cowel_html_element</h-></code> directive produces an error if the given
tag name is not a valid HTML tag name, or
if any of the argument names are not valid HTML attribute names.
</p>
<h4 id=dir-cowel_html_self_closing_element><a class=para href=#dir-cowel_html_self_closing_element></a>8.3.2. <code><h- data-h=mk_tag>\cowel_html_self_closing_element</h-></code> โ Self-closing HTML element</h4>

<pre>
<h- data-h=mk_tag>cowel_html_self_closing_element</h->(
  <h- data-h=mk_attr>name</h->: <h- data-h=kw_type>string</h->,
  <h- data-h=mk_attr>attr</h->: <h- data-h=kw_type>lazy(group pack named string)?</h->,
): <h- data-h=kw_type>block</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_html_self_closing_element</h-></code> directive generates a self-closing HTML element.
That is, an element with no content,
and where there is no closing tag.
Content is ignored.
</p>
<p>The name of the HTML element is contained in the <tt-><h- data-h=mk_attr>name</h-></tt-> parameter,
and the attributes within the HTML element
are contained within the <tt-><h- data-h=mk_attr>attr</h-></tt-> parameter.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block>Horizontal rule:
<h- data-h=mk_tag>\cowel_html_self_closing_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>hr</h-><h- data-h=sym_punc>,</h-> <h- data-h=sym_par>(</h-><h- data-h=mk_attr>id</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>abc</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->ignored<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block>Horizontal rule:
<h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>hr</h-> <h- data-h=mk_attr>id</h-><h- data-h=sym_punc>=</h-><h- data-h=str>abc</h-> <h- data-h=sym_punc>/&gt;</h-></code-block>
</example-block>

<h3 id=new-content-policies><a class=para href=#new-content-policies></a>8.4. Content policies</h3>

<p>As explained in <a href=#contexts-and-output>ยง5.1. Content policies</a>,
all content within the document and produced by directives is fed into a content policy,
which, in turn, feeds content into some parent content policy.
</p>
<p>The table below lists directives which process content using some content policy.
</p>
<div class=indent>
<table>
  <tr>
    <th>Directive</th>
    <th>Content policy</th>
    <th>Notes</th>
  </tr>
  <tr>
    <td><code><h- data-h=mk_tag>\cowel_to_html</h-></code></td>
    <td>HTML policy</td>
    <td></td>
  </tr>
  <tr>
    <td><code><h- data-h=mk_tag>\cowel_highlight</h-></code></td>
    <td>highlight policy</td>
    <td>see <a href=#dir-cowel_highlight>ยง8.5.1. <code><h- data-h=mk_tag>\cowel_highlight</h-></code> โ Perform syntax highlighting</a></td>
  </tr>
  <tr>
    <td><code><h- data-h=mk_tag>\cowel_paragraphs</h-></code></td>
    <td>paragraphs policy</td>
    <td>see <a href=#dir-cowel_paragraphs>ยง8.6.2. <code><h- data-h=mk_tag>\cowel_paragraphs</h-></code> โ Perform paragraph splitting</a></td>
  </tr>
  <tr>
    <td><code><h- data-h=mk_tag>\cowel_no_invoke</h-></code></td>
    <td>no-invoke policy</td>
    <td></td>
  </tr>
  <tr>
    <td><code><h- data-h=mk_tag>\cowel_actions</h-></code></td>
    <td>no-invoke policy</td>
    <td></td>
  </tr>
  <tr>
    <td><code><h- data-h=mk_tag>\cowel_text_only</h-></code></td>
    <td>text-only policy</td>
  </tr>
  <tr>
    <td><code><h- data-h=mk_tag>\cowel_text_as_html</h-></code></td>
    <td>text-as-html policy</td>
  </tr>
  <tr>
    <td><code><h- data-h=mk_tag>\cowel_source_as_text</h-></code></td>
    <td>source-as-text policy</td>
  </tr>
</table>
</div>

<h4 id=dir-cowel_to_html><a class=para href=#dir-cowel_to_html></a>8.4.1. <code><h- data-h=mk_tag>\cowel_to_html</h-></code> โ Process with to-HTML policy</h4>

<pre>
<h- data-h=mk_tag>cowel_to_html</h->(){...}: <h- data-h=kw_type>block</h->
</pre>

<p><code><h- data-h=mk_tag>\cowel_to_html</h-></code> simply processes the provided content using the to-HTML policy.
</p>
<p>The purpose of this policy/directive is mainly to
feed its parent policy pure HTML content,
rather than a mixture of plaintext and HTML.
This also suppresses paragraph splitting, syntax highlighting,
and other such "special treatments" of plaintext,
since none of those operate on HTML.
</p>
<example-block><p><intro-></intro-> 
Since HTML is not syntax-highlighted,
we can insert special characters like U+00AD SOFT HYPHEN
into code snippets, without interfering with syntax highlighting:
</p><code-block>Use of
<h- data-h=mk_tag>\cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>code</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->
<h- data-h=mk_tag>\cowel_highlight</h-><h- data-h=sym_par>(</h-><h- data-h=str>cpp</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->reinterpret_<h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\cowel_to_html</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_char_by_name</h-><h- data-h=sym_brac>{</h->SOFT HYPHEN<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
cast<h- data-h=sym_brac>}</h->
<h- data-h=sym_brac>}</h->
is discouraged.</code-block>

<p>This renders as:
</p><div class=indent>
Use of
<code><h- data-h=kw>reinterpret_cast</h-></code> is discouraged.
</div>
<p>Or, if line wrapping takes place in the middle of the highlighted keyword,
it renders as:
</p><div class=indent>
Use of
<tt-><h- data-h=kw>reinterpret_</h->-<br/>
<h- data-h=kw>cast</h-></tt-> is discouraged.
</div>
</example-block>

<h4 id=dir-cowel_no_invoke><a class=para href=#dir-cowel_no_invoke></a>8.4.2. <code><h- data-h=mk_tag>\cowel_no_invoke</h-></code> โ Process with no-invoke policy</h4>

<pre>
<h- data-h=mk_tag>cowel_no_invoke</h->(){...}: <h- data-h=kw_type>block</h->
</pre>

<p><code><h- data-h=mk_tag>\cowel_no_invoke</h-></code> processes the provided content
using the no-invoke policy.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_no_invoke</h-><h- data-h=sym_brac>{</h->Undefined directive: <h- data-h=mk_tag>\awoo</h-><h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block>Undefined directive: \awoo</code-block>
<p>Under the no-invoke policy selected by <code>no_invoke</code>,
<code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>awoo</h-></code> is not invoked,
but its source code is fed into the current policy as plaintext.
This is particularly useful when writing code blocks
which contain character escapes (e.g. containing <code><h- data-h=str_dlim>"</h-><h- data-h=str_esc>\</h-><h- data-h=str_esc>n</h-><h- data-h=str_dlim>"</h-></code> in C++)
because such escapes should not treated as COWEL directives.
</p></example-block>

<note-block><p><intro-></intro-> 
COWEL comments and COWEL escape sequences are processed as usual.
That is, comments are ignored, and escapes are expanded.
</p></note-block>

<h4 id=dir-cowel_actions><a class=para href=#dir-cowel_actions></a>8.4.3. <code><h- data-h=mk_tag>\cowel_actions</h-></code> โ Process with actions policy</h4>

<pre>
<h- data-h=mk_tag>cowel_actions</h->(){...}: <h- data-h=kw_type>block</h->
</pre>

<p><code><h- data-h=mk_tag>\cowel_actions</h-></code> processes the provided content
using the actions policy.
</p>
<p>This is particularly useful in macros and surrounding macros
because it prevents whitespace from being emitted into the HTML file.
Normally, whitespace is preserved,
unless explicitly eliminated (e.g. with newline escapes or commas).
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block>no escapes:
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>a</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>b</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>c</h-><h- data-h=sym_par>)</h->
end.
newline escapes:
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>h</h-><h- data-h=sym_par>)</h-><h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>j</h-><h- data-h=sym_par>)</h-><h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>k</h-><h- data-h=sym_par>)</h-><h- data-h=str_esc>\</h->
end.
actions:
<h- data-h=mk_tag>\cowel_actions</h-><h- data-h=sym_brac>{</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> Documentation for x:</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>x</h-><h- data-h=sym_par>)</h->

<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> In here, we can add as much whitespace as we want.</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> It won't add anything to the generated HTML ๐</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>y</h-><h- data-h=sym_par>)</h->

Text is also ignored, just like whitespace,
but it is recommended to use comments even in actions
because it expresses intent more clearly.
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>z</h-><h- data-h=sym_par>)</h->
<h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
end.</code-block>
<p>Generated HTML:
</p><code-block>no escapes:



end.
newline escapes:
end.
actions:
end.</code-block>
<p>Note that nine macros have also been defined by the COWEL markup,
but macro definitions produce no output.
</p></example-block>

<h4 id=dir-cowel_text_only><a class=para href=#dir-cowel_text_only></a>8.4.4. <code><h- data-h=mk_tag>\cowel_text_only</h-></code> โ Process with text-only policy</h4>

<pre>
<h- data-h=mk_tag>cowel_text_only</h->(){...}: <h- data-h=kw_type>block</h->
</pre>

<p><code><h- data-h=mk_tag>\cowel_text_only</h-></code> processes the provided content
using the text-only policy.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block>Hello, <h- data-h=mk_tag>\cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>strong</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->strong<h- data-h=sym_brac>}</h-> world!
<h- data-h=mk_tag>\cowel_text_only</h-><h- data-h=sym_brac>{</h->Hello, <h- data-h=mk_tag>\cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>strong</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->strong<h- data-h=sym_brac>}</h-> world!<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block>Hello, <h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>strong</h-><h- data-h=sym_punc>&gt;</h->strong<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>strong</h-><h- data-h=sym_punc>&gt;</h-> world!
Hello, strong world!</code-block>
<p>As can be seen, only plaintext "makes it through",
whereas HTML is stripped.
</p></example-block>

<note-block><p><intro-></intro-> 
This policy is used internally when processing arguments in various places,
such as in the <code>strong</code> positional argument to
<code><h- data-h=mk_tag>\cowel_html_element</h-></code> in the example above.
</p>
<p>It is mainly useful in situations where it makes no sense to have non-plaintext content.
</p></note-block>

<h4 id=dir-cowel_text_as_html><a class=para href=#dir-cowel_text_as_html></a>8.4.5. <code><h- data-h=mk_tag>\cowel_text_as_html</h-></code> โ Process with text-as-HTML policy</h4>

<pre>
<h- data-h=mk_tag>cowel_text_as_html</h->(){...}: <h- data-h=kw_type>block</h->
</pre>

<p><code><h- data-h=mk_tag>\cowel_no_invoke</h-></code> processes the provided content
using the text-as-HTML policy.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_text_as_html</h-><h- data-h=sym_brac>{</h->Hello, &lt;strong&gt;strong&lt;/strong&gt; world!<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block>Hello, <h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>strong</h-><h- data-h=sym_punc>&gt;</h->strong<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>strong</h-><h- data-h=sym_punc>&gt;</h-> world!</code-block>
<p>As can be seen, the provided text is reinterpreted as HTML.
</p></example-block>

<warning-block><p><intro-></intro-> 
This directive should be used with great caution
because it can easily result in producing malformed HTML.
While there are legitimate uses (e.g. inline SVG images and other large HTML blocks),
<code><h- data-h=mk_tag>\cowel_html_element</h-></code> and other safer directives should be preferred.
</p></warning-block>

<h4 id=dir-cowel_as_text><a class=para href=#dir-cowel_as_text></a>8.4.6. <code><h- data-h=mk_tag>\cowel_as_text</h-></code> โ Process with as-text policy</h4>

<pre>
<h- data-h=mk_tag>cowel_as_text</h->(){...}: <h- data-h=kw_type>block</h->
</pre>

<p><code><h- data-h=mk_tag>\cowel_as_text</h-></code> processes the provided content
using the as-text policy.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block>x &lt; y
<h- data-h=mk_tag>\cowel_as_text</h-><h- data-h=sym_brac>{</h->x &lt; y<h- data-h=sym_brac>}</h->
<h- data-h=mk_tag>\cowel_as_text</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_to_html</h-><h- data-h=sym_brac>{</h->x &lt; y<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block>x <h- data-h=str_esc>&amp;lt;</h-> y
x <h- data-h=str_esc>&amp;lt;</h-> y
x <h- data-h=str_esc>&amp;amp;</h->lt; y</code-block>
<p>As can be seen <code><h- data-h=mk_tag>\cowel_as_text</h-></code> has no effect
on a literal '<tt->&lt;</tt->' because the character is already plaintext.
When converted to HTML, '<tt->&lt;</tt->' is replaced with a <code><h- data-h=str_esc>&amp;lt;</h-></code> character reference
so that it is not interpreted as the start of an HTML tag.
Note that this transformation is not visible to the reader;
the browser renders <code><h- data-h=str_esc>&amp;lt;</h-></code> as a less-than sign.
</p>
<p>When converting to HTML via <code><h- data-h=mk_tag>\cowel_to_html</h-></code>,
this feeds the HTML text <code><h- data-h=str_esc>&amp;lt;</h-></code> into the surrounding content policy.
<code><h- data-h=mk_tag>\cowel_as_text</h-></code> reinterprets that HTML as plaintext again,
and when the HTML document is generated,
the plain '<tt->&amp;</tt->' is replaced with <code><h- data-h=str_esc>&amp;amp;</h-></code>
so that it is not interpreted as the start of a character reference;
'<tt->lt;</tt->' is preserved.
</p></example-block>

<note-block><p><intro-></intro-> 
This directive is mainly useful for capturing generated HTML in variables
for further processing.
</p>
<p>It is also useful for debugging what HTML is generated by COWEL.
That is, a block of COWEL can be wrapped in
<code><h- data-h=mk_tag>\cowel_to_html</h-></code> and <code><h- data-h=mk_tag>\cowel_as_text</h-></code>
to render the generated HTML (rather than having it go directly into the output file).
</p></note-block>

<h4 id=dir-cowel_source_as_text><a class=para href=#dir-cowel_source_as_text></a>8.4.7. <code><h- data-h=mk_tag>\cowel_source_as_text</h-></code> โ Process with source-as-text policy</h4>

<pre>
<h- data-h=mk_tag>cowel_source_as_text</h->(){...}: <h- data-h=kw_type>block</h->
</pre>

<p><code><h- data-h=mk_tag>\cowel_no_invoke</h-></code> processes the provided content
using the source-as-text policy.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_source_as_text</h-><h- data-h=sym_brac>{</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> Comment ...</h->
Hello <h- data-h=mk_tag>\source_as_text</h-> <h- data-h=str_esc>\{</h-> ... <h- data-h=str_esc>\}</h->
<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block>\: Comment ...
Hello \source_as_text \{ ... \}</code-block>
</example-block>

<note-block><p><intro-></intro-> 
This directive is mainly useful for writing COWEL code blocks,
where all content within is treated literally, including comments.
</p>
<p>It can be seen as a more extreme form of <code><h- data-h=mk_tag>\cowel_no_invoke</h-></code>,
and is more niche in its applications.
</p></note-block>

<h3 id=new-syntax-highlighting><a class=para href=#new-syntax-highlighting></a>8.5. Syntax highlighting</h3>

<p>Syntax highlighting improves the readability of inline code and code snippets
by applying different formatting (usually colors)
based on the syntactical meaning of text.
Many examples can be found in this document.
</p>
<h4 id=dir-cowel_highlight><a class=para href=#dir-cowel_highlight></a>8.5.1. <code><h- data-h=mk_tag>\cowel_highlight</h-></code> โ Perform syntax highlighting</h4>

<pre>
<h- data-h=mk_tag>cowel_highlight</h->(
  <h- data-h=mk_attr>lang</h->: <h- data-h=kw_type>string</h->,
){...}: <h- data-h=kw_type>block</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_highlight</h-></code>
processes content using the highlight policy,
which wraps parts of code in HTML tags for the purpose of syntax highlighting.
</p>
<p><code><h- data-h=mk_tag>\cowel_highlight</h-></code> has a single <tt-><h- data-h=mk_attr>lang</h-></tt-> parameter.
This specifies the name of language (e.g. <tt->cowel</tt->)
in which the content is to be highlighted.
The name has to be one of the language short names
supported by the <a href=https://github.com/Eisenwave/ulight>ยตlight syntax highlighter</a>,
which is the highlighter that COWEL uses internally.
</p>
<h4 id=dir-cowel_highlight_as><a class=para href=#dir-cowel_highlight_as></a>8.5.2. <code><h- data-h=mk_tag>\cowel_highlight_as</h-></code> โ Syntax highlight override</h4>

<pre>
<h- data-h=mk_tag>cowel_highlight_as</h->(
  <h- data-h=mk_attr>name</h->: <h- data-h=kw_type>string</h->,
){...}: <h- data-h=kw_type>block</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_highlight_as</h-></code> directive forces certain syntax highlighting
to be applied to some text;
it is a manual override for when automatic syntax highlighting is insufficient or broken.
This is done by wrapping the given content in HTML tags for syntax highlighting
and feeding the provided content, converted to HTML into the surrounding policy,
so it is not subject to automatic highlighting.
</p>
<p><code><h- data-h=mk_tag>\cowel_highlight_as</h-></code> has a single <tt-><h- data-h=mk_attr>name</h-></tt-> parameter,
which is the ยตlight <dfn>long name</dfn> for a highlight type.
</p>
<tip-block><p><intro-></intro-> 
You can obtain a list of possible long names at
<a href=https://github.com/Eisenwave/ulight/blob/main/include/ulight/ulight.h><tt->ulight.h</tt-></a>
from the definition of <code><h- data-h=kw>enum</h-> <h- data-h=name>ulight_highlight_type</h-></code>.
The long name is the enumerator name without the <tt->ULIGHT_HL</tt-> prefix,
all lowercase, and with hyphens instead of underscores.
</p></tip-block>

<example-block><p><intro-></intro-> 
It is possible to mix automatic syntax highlighting with manual overrides:
</p><code-block><h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> _Int128 is manually highlighted as a type keyword,</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> and x is automatically highlighted as an identifier.</h->
<h- data-h=mk_tag>\cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>code</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\cowel_highlight</h-><h- data-h=sym_par>(</h-><h- data-h=str>c</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_highlight_as</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>keyword-type</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->_Int128<h- data-h=sym_brac>}</h-> x<h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
<h- data-h=sym_brac>}</h-></code-block>
<p>This generates the HTML (subject to change):
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_punc>&gt;</h-><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>h-</h-> <h- data-h=mk_attr>data-h</h-><h- data-h=sym_punc>=</h-><h- data-h=str>kw_type</h-><h- data-h=sym_punc>&gt;</h->_Int128<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>h-</h-><h- data-h=sym_punc>&gt;</h-> <h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>h-</h-> <h- data-h=mk_attr>data-h</h-><h- data-h=sym_punc>=</h-><h- data-h=str>id</h-><h- data-h=sym_punc>&gt;</h->x<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>h-</h-><h- data-h=sym_punc>&gt;</h-><h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_punc>&gt;</h-></code-block>
<p>It renders as <code><h- data-h=kw_type>_Int128</h-> <h- data-h=name>x</h-></code>.
</p></example-block>

<note-block><p><intro-></intro-> 
While it is also possible to produce the highlighting tags using
<code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>h-</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-><h- data-h=mk_attr_dlim>"</h-><h- data-h=mk_attr>data-h</h-><h- data-h=mk_attr_dlim>"</h-><h- data-h=sym_punc>=</h-><h- data-h=str>kw_type</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->_Int128<h- data-h=sym_brac>}</h-></code>,
the "short names" (e.g. <code>kw_type</code>) are not stable,
i.e. they are more likely to change.
Only ยตlight long names should be used directly.
</p></note-block>

<h4 id=dir-cowel_highlight_phantom><a class=para href=#dir-cowel_highlight_phantom></a>8.5.3. <code><h- data-h=mk_tag>\cowel_highlight_phantom</h-></code> โ Syntax highlight phantom text</h4>

<pre>
<h- data-h=mk_tag>cowel_highlight_phantom</h->(){...}: <h- data-h=kw_type>block</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_highlight_phantom</h-></code> directive
can be used to further customize syntax highlighting.
It outputs <dfn>phantom text</dfn>, which is fed into the syntax highlighter,
but is not part of the output content.
</p>
<p>The provided content is processed using a text-only policy (<a href=#contexts-and-output>ยง5.1. Content policies</a>).
If the current policy is a highlight policy,
the text output by the former is turned into phantom text within the latter.
Otherwise, the generated text is discarded.
All arguments are ignored.
</p>
<example-block><p><intro-></intro-> 
Using <code><h- data-h=mk_tag>\cowel_highlight_phantom</h-></code>,
we can control whether a JSON string is interpreted as a markup key,
or as a string value:
</p><code-block>In JSON, there are
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>code</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_highlight</h-><h- data-h=sym_par>(</h-><h- data-h=str>json</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_highlight_phantom</h-><h- data-h=sym_brac>{</h-><h- data-h=str_esc>\</h-><h- data-h=str_esc>{</h-><h- data-h=sym_brac>}</h->"keys"<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h->
and
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_html_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>code</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_highlight</h-><h- data-h=sym_par>(</h-><h- data-h=str>json</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->"values"<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h->.</code-block>
<p>Using the highlight theme of this document, this renders as:
</p><div class=indent>
In JSON, there are
<code><h- data-h=mk_attr>"keys"</h-></code>
and <code><h- data-h=str_dlim>"</h-><h- data-h=str>values</h-><h- data-h=str_dlim>"</h-></code>.
</div>
<p>Notice that the color of <code><h- data-h=mk_attr>"keys"</h-></code> is different
because it is highlighted as if it was positioned like:
</p><code-block><h- data-h=sym_brac>{</h-><h- data-h=mk_attr>"keys"</h-></code-block>
</example-block>

<h3 id=new-paragraph-control><a class=para href=#new-paragraph-control></a>8.6. Paragraph control</h3>

<p>Dividing content into paragraphs manually would take a huge amount of effort,
so COWEL provides means of doing so semi-automatically.
Text within in a paragraphs policy (<a href=#contexts-and-output>ยง5.1. Content policies</a>)
is automatically wrapped in paragraphs (<code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-></code>),
divided at blank lines.
</p>
<p>While content expanded from macros and from <code><h- data-h=mk_tag>\cowel_include</h-></code>
is fed into the surrounding content policy
(which may be a paragraphs policy) directly,
directives are generally treated as "black boxes"
for the purpose of paragraph splitting,
and they neither begin nor end a paragraph.
The following paragraph control directives define interactions
between paragraph splitting and directives.
</p>
<h4 id=paragraph-splitting><a class=para href=#paragraph-splitting></a>8.6.1. Paragraph splitting</h4>

<p>At the top-level in the document and within the content of certain directives,
<dfn>paragraph splitting</dfn> takes place.
All content in COWEL is either <dfn>inline content</dfn>, <dfn>block content</dfn>, or <dfn>meta content</dfn>.
Text and escape sequences are inline content,
and directives are sometimes inline and sometimes block content.
Certain directives (e.g. <code><h- data-h=mk_tag>\comment</h-></code>) that don't generate anything rendered are meta content.
</p>
<p>The process of paragraph splitting works as follows:
</p><ul>
  <li>
    Blank-line-separated blocks of inline content is wrapped in in <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-></code> tags.
    Meta content is not counted as a blank line, so it "continues" inline content,
    but no effort is made to wrap it in <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-></code>.
  </li>
  <li>
    Block content stays untouched, i.e. it is not wrapped in <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-></code>.
    However, it also terminates prior inline content, like a blank line.
  </li>
</ul>

<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block>First paragraph.

Second paragraph.
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>blockquote</h-><h- data-h=sym_brac>{</h->This is a block directive.<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->First paragraph.<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->

<h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->Second paragraph.<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->
<h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>blockquote</h-><h- data-h=sym_punc>&gt;</h->This is a block directive.<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>blockquote</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>

<h4 id=dir-cowel_paragraphs><a class=para href=#dir-cowel_paragraphs></a>8.6.2. <code><h- data-h=mk_tag>\cowel_paragraphs</h-></code> โ Perform paragraph splitting</h4>

<pre>
<h- data-h=mk_tag>cowel_paragraphs</h->(){...}: <h- data-h=kw_type>block</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_paragraphs</h-></code> directive
creates a paragraphs policy (<a href=#contexts-and-output>ยง5.1. Content policies</a>)
and feeds all provided content into that policy.
The beginning and end of the provided content are considered to be outside a paragraph.
All arguments are ignored.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_paragraphs</h-><h- data-h=sym_brac>{</h->
First paragraph.

Second paragraph.
<h- data-h=sym_brac>}</h-></code-block>

<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->First paragraph.<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->

<h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->Second paragraph.<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>

<note-block><p><intro-></intro-> 
At a top-level within the document,
paragraph splitting takes place implicitly,
as if the whole document was wrapped in <code><h- data-h=mk_tag>\cowel_paragraphs</h-></code>.
</p>
<p>However, this does not extend recursively,
so if one wants to have paragraph splitting inside say,
<code><h- data-h=mk_tag>\cowel_html_ยญelement</h-></code>,
<code><h- data-h=mk_tag>\cowel_paragraphs</h-></code> has to be used.
</p></note-block>

<h4 id=dir-cowel_paragraph_enter><a class=para href=#dir-cowel_paragraph_enter></a>8.6.3. <code><h- data-h=mk_tag>\cowel_paragraph_enter</h-></code> โ Enter a paragraph</h4>

<pre>
<h- data-h=mk_tag>cowel_paragraph_enter</h->(): <h- data-h=kw_type>block</h->
</pre>

<p>If the current content policy is a paragraphs policy and
and the paragraph state is "outside",
the paragraph state becomes "inside",
and a <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-></code> tag is emitted.
Otherwise, has no effect.
</p>
<example-block><p><intro-></intro-> 
COWEL markup, assuming a surrounding paragraphs policy:
</p><code-block><h- data-h=mk_tag>\cowel_char_by_name</h-><h- data-h=sym_brac>{</h->DIGIT ONE<h- data-h=sym_brac>}</h->. First paragraph

<h- data-h=mk_tag>\cowel_paragraph_enter</h-><h- data-h=mk_tag>\cowel_char_by_name</h-><h- data-h=sym_brac>{</h->DIGIT TWO<h- data-h=sym_brac>}</h->. Second paragraph</code-block>

<p>Generated HTML:
</p><code-block>1<h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->. First paragraph<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->

<h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->2. Second paragraph<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-></code-block>

<p>As explained, directives are "black boxes" for paragraph splitting,
so when the paragraphs policy processes <code><h- data-h=mk_tag>\cowel_char_by_name</h-></code>,
it does not automatically begin a paragraph.
</p></example-block>

<tip-block><p><intro-></intro-> 
<code><h- data-h=mk_tag>\cowel_paragraph_enter</h-></code> should rarely be used directly,
but from within macros.
</p>
<p>For example, the user can define an <code><h- data-h=mk_tag>\N</h-></code> directive which combines
<code><h- data-h=mk_tag>\cowel_paraยญgraph_enter</h-></code> and <code><h- data-h=mk_tag>\cowel_ยญchar_by_name</h-></code>.
</p></tip-block>

<h4 id=dir-cowel_paragraph_leave><a class=para href=#dir-cowel_paragraph_leave></a>8.6.4. <code><h- data-h=mk_tag>\cowel_paragraph_leave</h-></code> โ Leave a paragraph</h4>

<pre>
<h- data-h=mk_tag>cowel_paragraph_leave</h->(): <h- data-h=kw_type>block</h->
</pre>

<p>If the current content policy is a paragraphs policy and
and the paragraph state is "inside",
the paragraph state becomes "outside",
and a closing <code><h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-></code> tag is emitted.
Otherwise, has no effect.
</p>
<example-block><p><intro-></intro-> 
COWEL markup, assuming a surrounding paragraphs policy:
</p><code-block>Paragraph 1:
<h- data-h=mk_tag>\cowel_html_self_closing_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>hr</h-><h- data-h=sym_par>)</h->

Paragraph 2:
<h- data-h=mk_tag>\cowel_paragraph_leave</h-><h- data-h=mk_tag>\cowel_html_self_closing_element</h-><h- data-h=sym_par>(</h-><h- data-h=str>hr</h-><h- data-h=sym_par>)</h-></code-block>

<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->Paragraph 1:
<h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>hr</h-><h- data-h=sym_punc>/&gt;</h-><h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->

<h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->Paragraph 2:
<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>hr</h-><h- data-h=sym_punc>/&gt;</h-></code-block>

<p>As explained, directives are "black boxes" for paragraph splitting,
so when the paragraphs policy processes <code><h- data-h=mk_tag>\cowel_html_self_closing_element</h-></code>,
it does not automatically leave a paragraph.
This would be necessary because horizontal rules (<code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>hr</h-><h- data-h=sym_punc>/&gt;</h-></code>)
are not supposed to be inside a paragraph.
</p></example-block>

<tip-block><p><intro-></intro-> 
<code><h- data-h=mk_tag>\cowel_paragraph_leave</h-></code> should rarely be used directly,
but from within macros.
</p>
<p>For example, the user can define a <code><h- data-h=mk_tag>\hr</h-></code> directive which combines
<code><h- data-h=mk_tag>\cowel_paraยญgraph_leave</h-></code> and
<code><h- data-h=mk_tag>\cowel_ยญhtml_self_closing_element</h-></code>.
</p></tip-block>

<h4 id=dir-cowel_paragraph_inherit><a class=para href=#dir-cowel_paragraph_inherit></a>8.6.5. <code><h- data-h=mk_tag>\cowel_paragraph_inherit</h-></code> โ Activate paragraph splitting inside a directive</h4>

<pre>
<h- data-h=mk_tag>cowel_paragraph_inherit</h->(): <h- data-h=kw_type>block</h->
</pre>

<important-block><p><intro-></intro-> 
There is no support for programmatic directives yet,
so this directive is currently useless.
There are plans to add a WASM scripting API from which
<code><h- data-h=mk_tag>\cowel_paragraph_inherit</h-></code> may be used to alter behavior.
</p></important-block>

<p>As already stated,
paragraph splitting generally treats directives as "black boxes".
However, content expanded from <code><h- data-h=mk_tag>\cowel_include</h-></code> and macros
<dfn>inherits</dfn> the surrounding paragraph for splitting,
i.e. any content produced by such directives is fed directly into the paragraphs policy.
<code><h- data-h=mk_tag>\cowel_paragraph_inherit</h-></code> can be used inside programmatic directives
defined by the user to achieve the same behavior.
</p>
<h3 id=new-file-management><a class=para href=#new-file-management></a>8.7. File management</h3>

<p>Once projects get larger,
it often becomes difficult to manage everything in a single file.
Also, tooling may benefit from having separate files.
For example, keeping separate SVG files
or CSS files may have better IDE support than writing these out directly inside of COWEL.
</p>
<p>COWEL provides directives to load content from other files.
</p>
<h4 id=dir-cowel_include><a class=para href=#dir-cowel_include></a>8.7.1. <code><h- data-h=mk_tag>\cowel_include</h-></code> โ Include a sub-document</h4>

<pre>
<h- data-h=mk_tag>cowel_include</h->(<h- data-h=mk_attr>path</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>block</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_include</h-></code> directive loads the content from another COWEL document,
and processes it using the current content policy.
The given <tt-><h- data-h=mk_attr>path</h-></tt-> is the path to the included document,
relative to the current file.
</p>
<p>If the current content policy is a paragraphs policy (<a href=#contexts-and-output>ยง5.1. Content policies</a>),
paragraph splitting of the included sub-document takes place
as if its contents were expanded directly where <code><h- data-h=mk_tag>\cowel_include</h-></code> appears.
In other words, <code><h- data-h=mk_tag>\cowel_include</h-></code> inherits the paragraph context,
or is <em>not</em> a "black box" to paragraph splitting.
</p>
<example-block><p><intro-></intro-> 
Say we have another <tt->test.cow</tt-> files containing:
</p><code-block>Hello, includes!

Next paragraph.</code-block>
<p>When using <code><h- data-h=mk_tag>\cowel_include</h-></code>,
the contents of the other file are substituted where we have written <code><h- data-h=mk_tag>\cowel_include</h-></code>,
which means that imported content also plays nicely with paragraph splitting:
</p><code-block>First paragraph.
<h- data-h=mk_tag>\cowel_include</h-><h- data-h=sym_brac>{</h->test.cow<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->First paragraph.
Hello, includes!<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->

<h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->Next paragraph.<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>

<tip-block><p><intro-></intro-> 
It is common practice to collect macros and other reusable components in separate documents,
and to <code><h- data-h=mk_tag>\cowel_include</h-></code> them when needed.
This can help you avoid copying boilerplate between multiple documents.
</p>
<p>It is also common to split documents into multiple files that are combined using a sequence
of <code><h- data-h=mk_tag>\cowel_include</h-></code>s.
</p></tip-block>

<h4 id=dir-cowel_include_text><a class=para href=#dir-cowel_include_text></a>8.7.2. <code><h- data-h=mk_tag>\cowel_include_text</h-></code> โ Include text from a file</h4>

<pre>
<h- data-h=mk_tag>cowel_include_text</h->(<h- data-h=mk_attr>path</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>str</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_include_text</h-></code> directive returns a <tt-><h- data-h=kw_type>str</h-></tt->
containing the UTF-8 text contents of another file.
The given <tt-><h- data-h=mk_attr>path</h-></tt-> is the path to the included document,
relative to the current file.
An error is raised if the contents of the designated file
could not be read.
</p>
<example-block><p><intro-></intro-> 
Say we have a JavaScript file <tt->example.js</tt-> which we want to keep separate from the document.
We can then include it into a <code><h- data-h=mk_tag>\script</h-></code> block to use it as a script,
or we can include it into a <code><h- data-h=mk_tag>\codeblock</h-></code> to display its contents.
</p><code-block><h- data-h=mk_tag>\codeblock</h-><h- data-h=sym_par>(</h-><h- data-h=str>js</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->
// code included from example.js:
<h- data-h=mk_tag>\cowel_include_text</h-><h- data-h=sym_brac>{</h->example.js<h- data-h=sym_brac>}</h->
<h- data-h=sym_brac>}</h-></code-block>
<p>Assuming that <tt->example.js</tt-> is located in the same directory as the document
and that loading the file succeeds,
this renders as: 
</p><code-block><h- data-h=cmt_dlim>//</h-><h- data-h=cmt> code included from example.js:</h->
<h- data-h=kw>function</h-> <h- data-h=name>sqr</h-><h- data-h=sym_par>(</h-><h- data-h=name>x</h-><h- data-h=sym_par>)</h-> <h- data-h=sym_brac>{</h->
    <h- data-h=kw_ctrl>return</h-> <h- data-h=name>x</h-> <h- data-h=sym_op>*</h-> <h- data-h=name>x</h-><h- data-h=sym_punc>;</h->
<h- data-h=sym_brac>}</h-></code-block>
</example-block>

<h3 id=new-aliases><a class=para href=#new-aliases></a>8.8. Aliases and macros</h3>

<h4 id=dir-cowel_alias><a class=para href=#dir-cowel_alias></a>8.8.1. <code><h- data-h=mk_tag>\cowel_alias</h-></code> โ Define aliases for an existing directive</h4>

<pre>
<h- data-h=mk_tag>cowel_alias</h->(
  <h- data-h=mk_attr>names</h->: <h- data-h=kw_type>pack string</h->,
){...}: <h- data-h=kw_type>unit</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_alias</h-></code> directive defines one or more aliases for an existing directive.
The content of <code><h- data-h=mk_tag>\cowel_alias</h-></code> is converted to text,
and must be the name of an existing directive or directive alias.
Each positional argument is converted to text,
and results in the definition of a new directive alias.
After processing <code><h- data-h=mk_tag>\cowel_alias</h-></code>,
the target can also be invoked using the alias name.
</p>
<p>A fatal error is raised if
</p><ul>
  <li>generation of the alias or target names is erroneous,</li>
  <li>the target name or any of the alias names are empty,</li>
  <li>the target name or any of the alias names are not valid directive names,</li>
  <li>the target was not found, or</li>
  <li>an alias name matches the name of an existing macro or alias.</li>
</ul>

<example-block><p><intro-></intro-> 
One or multiple aliases can be defined as follows:
</p><code-block><h- data-h=mk_tag>\cowel_alias</h-><h- data-h=sym_par>(</h-><h- data-h=str>N</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->cowel_char_by_name<h- data-h=sym_brac>}</h->
<h- data-h=mk_tag>\N</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>DIGIT ZERO</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->               <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, equivalent to \cowel_char_by_name("DIGIT ZERO")</h->

<h- data-h=mk_tag>\cowel_alias</h-><h- data-h=sym_par>(</h-><h- data-h=str>incl</h-><h- data-h=sym_punc>,</h-> <h- data-h=str>include</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->cowel_include<h- data-h=sym_brac>}</h->
<h- data-h=mk_tag>\incl</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>file.cow</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->              <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, equivalent to \cowel_include("file.cow")</h->
<h- data-h=mk_tag>\include</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>file.cow</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->           <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, same</h->

<h- data-h=mk_tag>\cowel_alias</h-><h- data-h=sym_brac>{</h->cowel_to_html<h- data-h=sym_brac>}</h->    <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, but no effect</h->

<h- data-h=mk_tag>\cowel_alias</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\N</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>???</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>}</h->        <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> error: generation of target name failed</h->
<h- data-h=mk_tag>\cowel_alias</h-><h- data-h=sym_brac>{</h->??<h- data-h=sym_brac>}</h->               <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> error: invalid target name</h->
<h- data-h=mk_tag>\cowel_alias</h-><h- data-h=sym_brac>{</h->undefined<h- data-h=sym_brac>}</h->        <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> error: target not found</h->
<h- data-h=mk_tag>\cowel_alias</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>?</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->cowel_alias<h- data-h=sym_brac>}</h-> <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> error: invalid alias name</h->
<h- data-h=mk_tag>\cowel_alias</h-><h- data-h=sym_par>(</h-><h- data-h=str>N</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->N<h- data-h=sym_brac>}</h->             <h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> error: redefinition of N</h-></code-block>
</example-block>

<h4 id=dir-cowel_macro><a class=para href=#dir-cowel_macro></a>8.8.2. <code><h- data-h=mk_tag>\cowel_macro</h-></code> โ Define a macro</h4>

<pre>
<h- data-h=mk_tag>cowel_macro</h->(
  <h- data-h=mk_attr>names</h->: <h- data-h=kw_type>pack string</h->,
){...}: <h- data-h=kw_type>unit</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_macro</h-></code> directive defines a block of content which
can be processed at a later point in the document.
The provided content is not processed, but remembered.
Each positional argument is converted to text,
and results in the definition of a new macro.
After processing <code><h- data-h=mk_tag>\cowel_macro</h-></code>,
the target can also be invoked using the macro name.
Named arguments are ignored.
</p>
<p>A fatal error occurs if
</p><ul>
  <li>generation of the alias or target names is erroneous,</li>
  <li>any macro name is not a valid directive name (this includes empty names), or</li>
  <li>a macro name matches the name of an existing macro or alias.</li>
</ul>

<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>m</h-><h- data-h=sym_punc>,</h-><h- data-h=str>x</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->Hello, macros!<h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\m</h->
<h- data-h=mk_tag>\x</h-></code-block>
<p>Generated HTML:
</p><code-block>Hello, macros!
Hello, macros!</code-block>
</example-block>

<p>When a macro is processed,
the behavior is as if <code><h- data-h=mk_tag>\cowel_paragraph_inherit</h-></code> (<a href=#dir-cowel_paragraph_inherit>ยง8.6.5. <code><h- data-h=mk_tag>\cowel_paragraph_inherit</h-></code> โ Activate paragraph splitting inside a directive</a>)
was invoked immediately before processing the content in the macro definition.
This means that blank lines in the macro definition
may also result in paragraph splits outside the macro.
</p>
<h4 id=dir-cowel_put><a class=para href=#dir-cowel_put></a>8.8.3. <code><h- data-h=mk_tag>\cowel_put</h-></code> โ Process provided macro content or arguments</h4>

<pre>
<h- data-h=mk_tag>cowel_put</h->(
  <h- data-h=mk_attr>else</h->: <h- data-h=kw_type>lazy any</h->,
){...}: <h- data-h=kw_type>any</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_put</h-></code> directive processes content
which was provided when a macro was invoked.
</p>
<p>The content provided to <code><h- data-h=mk_tag>\cowel_put</h-></code> is converted to text,
and <dfn>designates</dfn>
</p><ul>
  <li>
    if that text is empty, the provided macro content;
  </li>
  <li>
    otherwise, if that text expands to only ASCII digits,
    the provided positional macro argument at the index obtained by parsing the digits
    (counting starts at zero);
  </li>
  <li>
    otherwise, if there exists a named macro argument whose name matches the target text,
    that argument;
  </li>
  <li>
    otherwise, nothing.
  </li>
</ul>

<p><code><h- data-h=mk_tag>\cowel_put</h-></code> has the following effect:
</p><ul>
  <li>
    If any content is designated,
    the designated content is processed.
  </li>
  <li>
    Otherwise, if an argument matches the <tt-><h- data-h=mk_attr>else</h-></tt-> parameter,
    the content within the <tt-><h- data-h=mk_attr>else</h-></tt-> parameter is processed.
  </li>
  <li>
    Otherwise, an error is raised.
  </li>
</ul>

<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> \cowel_put designates content</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>content</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\content</h-><h- data-h=sym_brac>{</h->Content<h- data-h=sym_brac>}</h->

<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> \cowel_put designates first positional argument</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>pos</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_brac>{</h->0<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\pos</h-><h- data-h=sym_par>(</h-><h- data-h=str>Positional</h-><h- data-h=sym_par>)</h->

<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> \cowel_put designates named argument with name "n"</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>named</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_brac>{</h->n<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\named</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>n</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str>Named</h-><h- data-h=sym_par>)</h->

<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> \cowel_put designates the first positional argument and has a fallback</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> Note that equivalently, we could use \cowel_put(Failure){0}.</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>try</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>else</h-><h- data-h=sym_punc>=</h-><h- data-h=str>Failure</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->0<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\try</h-><h- data-h=sym_par>(</h-><h- data-h=str>Success</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\try</h->

<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> All together:</h->
<h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>m</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_brac>{</h->greeting<h- data-h=sym_brac>}</h->, <h- data-h=mk_tag>\cowel_put</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_brac>{</h->0<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\m</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>greeting</h-> <h- data-h=sym_punc>=</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>Hello, !</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->macros<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block>Content

Positional

Named

Success
Failure

Hello, macros!</code-block>
</example-block>

<p>The behavior is erroneous if <code><h- data-h=mk_tag>\cowel_put</h-></code> is not expanded from a macro,
such as when <code><h- data-h=mk_tag>\cowel_put</h-></code> appears at a top-level in the document.
</p>
<note-block><p><intro-></intro-> 
<code><h- data-h=mk_tag>\cowel_macro</h-></code> is not processed in any special way,
meaning that it cannot be used for "macro substitution" directly:
</p><code-block><h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>m</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_source_as_text</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\m</h-></code-block>
<p>Generated HTML:
</p><code-block>\cowel_put</code-block>
<p>However, <code><h- data-h=mk_tag>\cowel_put</h-></code> accesses the inputs to the macro invocation
which expands <code><h- data-h=mk_tag>\cowel_put</h-></code>:
</p><code-block><h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>m</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
<h- data-h=mk_tag>\m</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_brac>}</h-></code-block>
<p>This results in a fatal error because when <code><h- data-h=mk_tag>\m</h-></code> is processed,
the <code><h- data-h=mk_tag>\cowel_put</h-></code> in the macro definition
expands to the top-level <code><h- data-h=mk_tag>\cowel_put</h-></code>.
That <code><h- data-h=mk_tag>\cowel_put</h-></code> in <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>m</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_put</h-><h- data-h=sym_brac>}</h-></code>
is not expanded from any macro.
This functionality is implemented by tracking the "stack frame"
where content was expanded from (or none, in the case of the document top level).
This also makes it possible to deeply nest <code><h- data-h=mk_tag>\cowel_put</h-></code>
within other directives while still referring to parameters of the macro invocation:
</p><code-block><h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>m</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_to_html</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> OK, equivalent to \cowel_to_html{...}</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> Notably, the expanded \cowel_put refers to the content provided to \m,</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> not to the content provided to \cowel_to_html (which would be \cowel_put).</h->
<h- data-h=mk_tag>\m</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code-block>
</note-block>

<warning-block><p><intro-></intro-> 
Expanding <code><h- data-h=mk_tag>\cowel_put</h-></code> with the same input multiple times
results in multiple processing of the same provided content.
Sometimes this is useful,
but it can have unintended side effects:
</p><code-block><h- data-h=mk_tag>\cowel_macro</h-><h- data-h=sym_par>(</h-><h- data-h=str>twice</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=mk_tag>\cowel_put</h-><h- data-h=sym_brac>}</h-><h- data-h=str_esc>\</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> error: multiple definitions of alias "\N" for "\cowel_char_by_name"</h->
<h- data-h=mk_tag>\twice</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_alias</h-><h- data-h=sym_par>(</h-><h- data-h=str>N</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->cowel_char_by_name<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-></code-block>
</warning-block>

<h3 id=new-invocations><a class=para href=#new-invocations></a>8.9. Invocations</h3>

<h4 id=dir-cowel_invoke><a class=para href=#dir-cowel_invoke></a>8.9.1. <code><h- data-h=mk_tag>\cowel_invoke</h-></code> โ Invoke a directive</h4>

<pre>
<h- data-h=mk_tag>cowel_invoke</h->(
  <h- data-h=mk_attr>name</h->: <h- data-h=kw_type>string</h->,
){...}: <h- data-h=kw_type>any</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_invoke</h-></code> directive invokes a directive by name.
This process is called a <dfn>dynamic invocation</dfn>.
Most invocations are <dfn>static invocations</dfn>.
</p>
<p>The name of the invoked directive is provided as the first positional argument.
All other arguments are ignored.
The content provided to <code><h- data-h=mk_tag>\cowel_invoke</h-></code>
is the content provided to the invoked directive.
</p>
<example-block><p><intro-></intro-> 
Any directive <code><h- data-h=mk_tag>\abc</h-></code> can be invoked statically or dynamically:
</p><code-block><h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> Static invocation of directive named "abc".</h->
<h- data-h=mk_tag>\abc</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> Static invocation of directive named "cowel_invoke",</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> which performs an equivalent dynamic invocation of "abc".</h->
<h- data-h=mk_tag>\cowel_invoke</h-><h- data-h=sym_par>(</h-><h- data-h=str>abc</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code-block>
</example-block>

<todo-block><p><intro-></intro-> 
It is also planned to allow providing arguments to the invoked directive,
but it may be better to add "argument groups" to the syntax first,
so that they can be bundled up in an <tt-><h- data-h=mk_attr>args</h-></tt-> group.
To avoid changing how <code><h- data-h=mk_tag>\cowel_invoke</h-></code> works in the future,
argument forwarding is not supported at all right now.
</p></todo-block>

<h3 id=type-conversions><a class=para href=#type-conversions></a>8.10. Type conversions</h3>

<h4 id=dir-cowel_to_str><a class=para href=#dir-cowel_to_str></a>8.10.1. <code><h- data-h=mk_tag>\cowel_to_str</h-></code> โ Convert to <tt-><h- data-h=kw_type>str</h-></tt-></h4>

<pre>
<h- data-h=mk_tag>cowel_to_str</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>unit</h->): <h- data-h=kw_type>str</h->
<h- data-h=mk_tag>cowel_to_str</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>bool</h->): <h- data-h=kw_type>str</h->
<h- data-h=mk_tag>cowel_to_str</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->, <h- data-h=mk_attr>base</h->: <h- data-h=kw_type>int</h-> = 10, <h- data-h=mk_attr>zpad</h->: <h- data-h=kw_type>int</h-> = 0): <h- data-h=kw_type>str</h->
<h- data-h=mk_tag>cowel_to_str</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->, <h- data-h=mk_attr>format</h->: <h- data-h=kw_type>str</h-> = "splice"): <h- data-h=kw_type>str</h->
<h- data-h=mk_tag>cowel_to_str</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>str</h->
<h- data-h=mk_tag>cowel_to_str</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>block</h->): <h- data-h=kw_type>str</h->
</pre>

<p>The <code><h- data-h=mk_tag>\cowel_to_str</h-></code> directive produces similar output to splicing
(<a href=#splicing>ยง6.4. Splicing</a>),
but allows for additional parametrization.
The output resulting string depends on the input as follows:
</p><ul>
  <li>
    If <tt-><h- data-h=mk_attr>x</h-></tt-> is of type <tt-><h- data-h=kw_type>int</h-></tt->,
    the digits of <tt-><h- data-h=mk_attr>x</h-></tt-> are printed in the given <tt-><h- data-h=mk_attr>base</h-></tt->.
    An error is raised if <tt-><h- data-h=mk_attr>base</h-></tt-> is outside the range
    <math display=inline><mrow><mo>[</mo><mn>2</mn><mo>,</mo><mn>36</mn><mo>]</mo></mrow></math>.
    Digits with value greater than <math display=inline><mn>9</mn></math> are represented using
    U+0061..U+007A LATIN SMALL LETTER A..Z.
    Zeros are prepended between the leading '<tt->-</tt->' (if any)
    and the significant digits as follows:<ul>
      <li>If <tt-><h- data-h=mk_attr>zpad</h-></tt-> is negative, an error is raised.</li>
      <li>
        Otherwise, the U+0030ย(<tt->0</tt->) character is prepended
        <math display=inline><mrow>
          <mi>max</mi>
          <mo form=prefix stretchy=false>(</mo>
          <mi>z</mi><mo>โ</mo><mi>d</mi>
          <mo>,</mo>
          <mn>0</mn>
          <mo form=prefix stretchy=false>)</mo>
        </mrow></math>
        times, where
        <math display=inline><mi>z</mi></math> is <tt-><h- data-h=mk_attr>zpad</h-></tt-> and
        <math display=inline><mi>d</mi></math> is the amount of significant digits.
      </li>
    </ul>
  </li>
  <li>
    If <tt-><h- data-h=mk_attr>x</h-></tt-> is of type <tt-><h- data-h=kw_type>float</h-></tt->,
    <ul>
      <li>
        if <tt-><h- data-h=mk_attr>format</h-></tt-> equals <code>"splice"</code>,
        the result is the same as splicing <tt-><h- data-h=mk_attr>x</h-></tt-> into a <g-term>quoted-string</g-term>;
      </li>
      <li>
        otherwise, if <tt-><h- data-h=mk_attr>format</h-></tt-> equals <code>"fixed"</code>,
        the result is the same as that for <code>"splice"</code>
        except that the string representation has no exponent;
      </li>
      <li>
        otherwise, if <tt-><h- data-h=mk_attr>format</h-></tt-> equals <code>"scientific"</code>,
        the result is the same as that for <code>"splice"</code>
        except that the string representation always has an exponent,
      </li>
      <li>
        otherwise, an error is raised.
      </li>
    </ul>
  </li>
  <li>
    Otherwise, the result is the same as splicing <tt-><h- data-h=mk_attr>x</h-></tt-> into a <g-term>quoted-string</g-term>.
  </li>
</ul>

<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=kw>unit</h-><h- data-h=sym_par>)</h->

<h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=bool>true</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=bool>false</h-><h- data-h=sym_par>)</h->

<h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=num>255</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=num>255</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>base</h-><h- data-h=sym_punc>=</h-><h- data-h=num>16</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=num_deco>-</h-><h- data-h=num>255</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>zpad</h-><h- data-h=sym_punc>=</h-><h- data-h=num>5</h-><h- data-h=sym_par>)</h->

<h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=num>1</h-><h- data-h=num_dlim>e</h-><h- data-h=num>10</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=num>1</h-><h- data-h=num_dlim>e</h-><h- data-h=num>10</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>format</h-><h- data-h=sym_punc>=</h-><h- data-h=str>splice</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=num>1</h-><h- data-h=num_dlim>e</h-><h- data-h=num>10</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>format</h-><h- data-h=sym_punc>=</h-><h- data-h=str>fixed</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=num>1</h-><h- data-h=num_dlim>e</h-><h- data-h=num>10</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>format</h-><h- data-h=sym_punc>=</h-><h- data-h=str>scientific</h-><h- data-h=sym_par>)</h->

<h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\cowel_to_str</h-><h- data-h=sym_par>(</h-><h- data-h=sym_brac>{</h->awoo<h- data-h=sym_brac>}</h-><h- data-h=sym_par>)</h-></code-block>

<p>Generated HTML:
</p><code-block>unit

true
false

255
ff
-00255

1e+10
1e+10
10000000000
1e+10

awoo
awoo</code-block>
</example-block>

<note-block><p><intro-></intro-> 
When <tt-><h- data-h=mk_attr>x</h-></tt-> is of type <tt-><h- data-h=kw_type>float</h-></tt->,
the round-tripping guarantee of splicing is retained regardless of <tt-><h- data-h=mk_attr>format</h-></tt->.
</p>
<p>Base prefixes such as '<tt->0x</tt->' for hexadecimal integers are not printed,
but can easily be appended separately.
</p></note-block>

<h4 id=dir-cowel_reinterpret_as_float><a class=para href=#dir-cowel_reinterpret_as_float></a>8.10.2. <code><h- data-h=mk_tag>\cowel_reinterpret_as_float</h-></code> โ Reinterpret as <tt-><h- data-h=kw_type>float</h-></tt-></h4>

<pre>
<h- data-h=mk_tag>cowel_reinterpret_as_float</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns a value of type <tt-><h- data-h=kw_type>float</h-></tt->
whose bit pattern is the same as that of <tt-><h- data-h=mk_attr>x</h-></tt->.
That is, each bit in the base-2 representation of <tt-><h- data-h=mk_attr>x</h-></tt->
is interpreted as a bit in the
binary64 representation of the <tt-><h- data-h=kw_type>float</h-></tt->.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_reinterpret_as_float</h-><h- data-h=sym_par>(</h-><h- data-h=num_deco>0x</h-><h- data-h=num>3ff8000000000000</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>1.5</code-block>
</example-block>

<p>Raises an error if <tt-><h- data-h=mk_attr>x</h-></tt-> is is not in the range
<math display=inline><mrow>
  <mo>[</mo>
  <mn>0</mn><mo>,</mo><msup><mn>2</mn><mn>64</mn></msup>
  <mo>)</mo>
</mrow></math>.
</p>
<tip-block><p><intro-></intro-> 
This directive is intended for low-level manipulation of floating-point numbers.
For example, it may be used to create a NaN value with a specific payload or sign.
</p></tip-block>

<h4 id=dir-cowel_reinterpret_as_int><a class=para href=#dir-cowel_reinterpret_as_int></a>8.10.3. <code><h- data-h=mk_tag>\cowel_reinterpret_as_int</h-></code> โ Reinterpret as <tt-><h- data-h=kw_type>int</h-></tt-></h4>

<pre>
<h- data-h=mk_tag>cowel_reinterpret_as_int</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>int</h->
</pre>

<p>Returns a value of type <tt-><h- data-h=kw_type>int</h-></tt->
whose bit pattern is the same as that of <tt-><h- data-h=mk_attr>x</h-></tt->.
That is, each bit of the binary64 representation of <tt-><h- data-h=mk_attr>x</h-></tt->
is interpreted as a bit in the
base-2 representation of the <tt-><h- data-h=kw_type>int</h-></tt->.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_reinterpret_as_int</h-><h- data-h=sym_par>(</h-><h- data-h=num>1</h-><h- data-h=num_dlim>.</h-><h- data-h=num>5</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\cowel_eq</h-><h- data-h=sym_par>(</h-><h- data-h=mk_tag>cowel_reinterpret_as_int</h-><h- data-h=sym_par>(</h-><h- data-h=num>1</h-><h- data-h=num_dlim>.</h-><h- data-h=num>5</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>,</h-> <h- data-h=num_deco>0x</h-><h- data-h=num>3ff8000000000000</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>4609434218613702656
true</code-block>
</example-block>

<note-block><p><intro-></intro-> 
The result is in the range <math display=inline><mrow>
  <mo>[</mo>
  <mn>0</mn><mo>,</mo><msup><mn>2</mn><mn>64</mn></msup>
  <mo>)</mo>
</mrow></math>.
</p></note-block>

<h3 id=basic-arithmetic-operations><a class=para href=#basic-arithmetic-operations></a>8.11. Basic arithmetic operations</h3>


<h4 id=dir-cowel_pos><a class=para href=#dir-cowel_pos></a>8.11.1. <code><h- data-h=mk_tag>\cowel_pos</h-></code> โ Copy</h4>

<pre>
<h- data-h=mk_tag>cowel_pos</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>int</h->
<h- data-h=mk_tag>cowel_pos</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><mrow><mo form=prefix>+</mo><mi>x</mi></mrow></math>.
</p>
<p>If <tt-><h- data-h=mk_attr>x</h-></tt-> is of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operation
<math display=inline><mrow><mi>copy</mi><mo stretchy=false>(</mo><mi>x</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<note-block><p><intro-></intro-> 
The result is bitwise identical to <tt-><h- data-h=mk_attr>x</h-></tt->.
</p></note-block>

<h4 id=dir-cowel_neg><a class=para href=#dir-cowel_neg></a>8.11.2. <code><h- data-h=mk_tag>\cowel_neg</h-></code> โ Negation</h4>

<pre>
<h- data-h=mk_tag>cowel_neg</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>int</h->
<h- data-h=mk_tag>cowel_neg</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><mrow><mo form=prefix>โ</mo><mi>x</mi></mrow></math>.
</p>
<p>If <tt-><h- data-h=mk_attr>x</h-></tt-> is of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operation
<math display=inline><mrow><mi>negate</mi><mo stretchy=false>(</mo><mi>x</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<note-block><p><intro-></intro-> 
Negating positive zero results in negative zero, and vice versa.
</p></note-block>

<h4 id=dir-cowel_abs><a class=para href=#dir-cowel_abs></a>8.11.3. <code><h- data-h=mk_tag>\cowel_abs</h-></code> โ Absolute value</h4>

<pre>
<h- data-h=mk_tag>cowel_abs</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>int</h->
<h- data-h=mk_tag>cowel_abs</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns the absolute value of <tt-><h- data-h=mk_attr>x</h-></tt->.
</p>
<p>If <tt-><h- data-h=mk_attr>x</h-></tt-> is of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operation
<math display=inline><mrow><mi>abs</mi><mo stretchy=false>(</mo><mi>x</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<h4 id=dir-cowel_sqrt><a class=para href=#dir-cowel_sqrt></a>8.11.4. <code><h- data-h=mk_tag>\cowel_sqrt</h-></code> โ Square root</h4>

<pre>
<h- data-h=mk_tag>cowel_sqrt</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><msqrt><mi>x</mi></msqrt></math>.
</p>
<p>The result is that of the IEEE-754 operation
<math display=inline><mrow><mi>squareRoot</mi><mo stretchy=false>(</mo><mi>x</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<h4 id=dir-cowel_trunc><a class=para href=#dir-cowel_trunc></a>8.11.5. <code><h- data-h=mk_tag>\cowel_trunc</h-></code> โ Round toward zero</h4>

<pre>
<h- data-h=mk_tag>cowel_trunc</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><mi>x</mi></math>,
rounded to the next integer toward zero.
</p>
<p>The result is that of the IEEE-754 operation
<math display=inline><mrow><mi>roundToIntegralTowardZero</mi><mo stretchy=false>(</mo><mi>x</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<h4 id=dir-cowel_floor><a class=para href=#dir-cowel_floor></a>8.11.6. <code><h- data-h=mk_tag>\cowel_floor</h-></code> โ Round toward negative infinity</h4>

<pre>
<h- data-h=mk_tag>cowel_floor</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><mi>x</mi></math>,
rounded to the next integer toward negative infinity.
</p>
<p>The result is that of the IEEE-754 operation
<math display=inline><mrow><mi>roundToIntegralTowardNegative</mi><mo stretchy=false>(</mo><mi>x</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<h4 id=dir-cowel_ceil><a class=para href=#dir-cowel_ceil></a>8.11.7. <code><h- data-h=mk_tag>\cowel_ceil</h-></code> โ Round toward positive infinity</h4>

<pre>
<h- data-h=mk_tag>cowel_ceil</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><mi>x</mi></math>,
rounded to the next integer toward positive infinity.
</p>
<p>The result is that of the IEEE-754 operation
<math display=inline><mrow><mi>roundToIntegralTowardPositive</mi><mo stretchy=false>(</mo><mi>x</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<h4 id=dir-cowel_nearest><a class=para href=#dir-cowel_nearest></a>8.11.8. <code><h- data-h=mk_tag>\cowel_nearest</h-></code> โ Round toward the nearest integer</h4>

<pre>
<h- data-h=mk_tag>cowel_nearest</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><mi>x</mi></math>,
rounded to the nearest integer,
with ties broken toward the integer with an even least significant digit.
</p>
<p>The result is that of the IEEE-754 operation
<math display=inline><mrow><mi>roundToIntegralTiesToEven</mi><mo stretchy=false>(</mo><mi>x</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<note-block><p><intro-></intro-> 
This is also known as Banker's Rounding,
and is the default IEEE-754 rounding mode.
</p></note-block>

<h4 id=dir-cowel_nearest_away_zero><a class=para href=#dir-cowel_nearest_away_zero></a>8.11.9. <code><h- data-h=mk_tag>\cowel_nearest_away_zero</h-></code> โ Round toward the nearest integer, with ties broken away from zero</h4>

<pre>
<h- data-h=mk_tag>cowel_nearest_away_zero</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><mi>x</mi></math>,
rounded to the nearest integer,
with ties broken away from zero.
</p>
<p>The result is that of the IEEE-754 operation
<math display=inline><mrow><mi>roundToIntegralTiesAwayZero</mi><mo stretchy=false>(</mo><mi>x</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<h4 id=dir-cowel_min><a class=para href=#dir-cowel_min></a>8.11.10. <code><h- data-h=mk_tag>\cowel_min</h-></code> โ Minimum</h4>

<pre>
<h- data-h=mk_tag>cowel_min</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack int</h->): <h- data-h=kw_type>int</h->
<h- data-h=mk_tag>cowel_min</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns the lowest of the given values.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>args</h-></tt-> is empty.
</p>
<p>If <tt-><h- data-h=mk_attr>args</h-></tt-> is a pack of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operations
</p><math display=block><mrow>
<mi>minimum</mi><mo stretchy=false>(</mo><mo>โฆ</mo><mi>minimum</mi><mo stretchy=false>(</mo><mi>minimum</mi><mo stretchy=false>(</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator=true>,</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy=false>)</mo><mo separator=true>,</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy=false>)</mo><mo>โฆ</mo><mo separator=true>,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=false>)</mo></mrow></math>
<p>for each <math display=inline><msub><mi>x</mi><mi>i</mi></msub></math> in <tt-><h- data-h=mk_attr>args</h-></tt->.
</p>
<note-block><p><intro-></intro-> 
<code><h- data-h=mk_tag>\cowel_min</h-></code> is associative and commutative,
ignoring NaN representations.
</p></note-block>

<h4 id=dir-cowel_max><a class=para href=#dir-cowel_max></a>8.11.11. <code><h- data-h=mk_tag>\cowel_max</h-></code> โ Maximum</h4>

<pre>
<h- data-h=mk_tag>cowel_max</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack int</h->): <h- data-h=kw_type>int</h->
<h- data-h=mk_tag>cowel_max</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns the greatest of the given values.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>args</h-></tt-> is empty.
</p>
<p>If <tt-><h- data-h=mk_attr>args</h-></tt-> is a pack of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operations
</p><math display=block><mrow>
<mi>maximum</mi><mo stretchy=false>(</mo><mo>โฆ</mo><mi>maximum</mi><mo stretchy=false>(</mo><mi>maximum</mi><mo stretchy=false>(</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator=true>,</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy=false>)</mo><mo separator=true>,</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy=false>)</mo><mo>โฆ</mo><mo separator=true>,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=false>)</mo></mrow></math>
<p>for each <math display=inline><msub><mi>x</mi><mi>i</mi></msub></math> in <tt-><h- data-h=mk_attr>args</h-></tt->.
</p>
<note-block><p><intro-></intro-> 
<code><h- data-h=mk_tag>\cowel_max</h-></code> is associative and commutative,
ignoring NaN representations.
</p></note-block>

<h4 id=dir-cowel_add><a class=para href=#dir-cowel_add></a>8.11.12. <code><h- data-h=mk_tag>\cowel_add</h-></code> โ Addition</h4>

<pre>
<h- data-h=mk_tag>cowel_add</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack int</h->): <h- data-h=kw_type>int</h->
<h- data-h=mk_tag>cowel_add</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><mrow>
<msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><mo>โฆ</mo><mo>+</mo><msub><mi>x</mi><mi>n</mi></msub></mrow></math>
for each <math display=inline><msub><mi>x</mi><mi>i</mi></msub></math> in <tt-><h- data-h=mk_attr>args</h-></tt->.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>args</h-></tt-> is empty.
</p>
<p>If <tt-><h- data-h=mk_attr>args</h-></tt-> is a pack of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operations
</p><math display=block><mrow>
<mi>addition</mi><mo stretchy=false>(</mo><mo>โฆ</mo><mi>addition</mi><mo stretchy=false>(</mo><mi>addition</mi><mo stretchy=false>(</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator=true>,</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy=false>)</mo><mo separator=true>,</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy=false>)</mo><mo>โฆ</mo><mo separator=true>,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=false>)</mo></mrow></math>
<p>for each <math display=inline><msub><mi>x</mi><mi>i</mi></msub></math> in <tt-><h- data-h=mk_attr>args</h-></tt->.
</p>
<h4 id=dir-cowel_sub><a class=para href=#dir-cowel_sub></a>8.11.13. <code><h- data-h=mk_tag>\cowel_sub</h-></code> โ Subtraction</h4>

<pre>
<h- data-h=mk_tag>cowel_sub</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack int</h->): <h- data-h=kw_type>int</h->
<h- data-h=mk_tag>cowel_sub</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><mrow>
<msub><mi>x</mi><mn>0</mn></msub><mo>โ</mo><msub><mi>x</mi><mn>1</mn></msub><mo>โ</mo><mo>โฆ</mo><mo>โ</mo><msub><mi>x</mi><mi>n</mi></msub></mrow></math>
for each <math display=inline><msub><mi>x</mi><mi>i</mi></msub></math> in <tt-><h- data-h=mk_attr>args</h-></tt->.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>args</h-></tt-> is empty.
</p>
<p>If <tt-><h- data-h=mk_attr>args</h-></tt-> is a pack of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operations
</p><math display=block><mrow>
<mi>subtraction</mi><mo stretchy=false>(</mo><mo>โฆ</mo><mi>subtraction</mi><mo stretchy=false>(</mo><mi>subtraction</mi><mo stretchy=false>(</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator=true>,</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy=false>)</mo><mo separator=true>,</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy=false>)</mo><mo>โฆ</mo><mo separator=true>,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=false>)</mo></mrow></math>
<p>for each <math display=inline><msub><mi>x</mi><mi>i</mi></msub></math> in <tt-><h- data-h=mk_attr>args</h-></tt->.
</p>
<h4 id=dir-cowel_mul><a class=para href=#dir-cowel_mul></a>8.11.14. <code><h- data-h=mk_tag>\cowel_mul</h-></code> โ Multiplication</h4>

<pre>
<h- data-h=mk_tag>cowel_mul</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack int</h->): <h- data-h=kw_type>int</h->
<h- data-h=mk_tag>cowel_mul</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><mrow>
<msub><mi>x</mi><mn>0</mn></msub><mo>ร</mo><msub><mi>x</mi><mn>1</mn></msub><mo>ร</mo><mo>โฆ</mo><mo>ร</mo><msub><mi>x</mi><mi>n</mi></msub></mrow></math>
for each <math display=inline><msub><mi>x</mi><mi>i</mi></msub></math> in <tt-><h- data-h=mk_attr>args</h-></tt->.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>args</h-></tt-> is empty.
</p>
<p>If <tt-><h- data-h=mk_attr>args</h-></tt-> is a pack of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operations
</p><math display=block><mrow>
<mi>multiplication</mi><mo stretchy=false>(</mo><mo>โฆ</mo><mi>multiplication</mi><mo stretchy=false>(</mo><mi>multiplication</mi><mo stretchy=false>(</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator=true>,</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy=false>)</mo><mo separator=true>,</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy=false>)</mo><mo>โฆ</mo><mo separator=true>,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=false>)</mo></mrow></math>
<p>for each <math display=inline><msub><mi>x</mi><mi>i</mi></msub></math> in <tt-><h- data-h=mk_attr>args</h-></tt->.
</p>
<h4 id=dir-cowel_div><a class=para href=#dir-cowel_div></a>8.11.15. <code><h- data-h=mk_tag>\cowel_div</h-></code> โ Division</h4>

<pre>
<h- data-h=mk_tag>cowel_div</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack float</h->): <h- data-h=kw_type>float</h->
</pre>

<p>Returns <math display=inline><mrow>
<msub><mi>x</mi><mn>0</mn></msub><mo>รท</mo><msub><mi>x</mi><mn>1</mn></msub><mo>รท</mo><mo>โฆ</mo><mo>รท</mo><msub><mi>x</mi><mi>n</mi></msub></mrow></math>
for each <math display=inline><msub><mi>x</mi><mi>i</mi></msub></math> in <tt-><h- data-h=mk_attr>args</h-></tt->.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>args</h-></tt-> is empty.
</p>
<p>The result is that of the IEEE-754 operations
</p><math display=block><mrow>
<mi>division</mi><mo stretchy=false>(</mo><mo>โฆ</mo><mi>division</mi><mo stretchy=false>(</mo><mi>division</mi><mo stretchy=false>(</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator=true>,</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy=false>)</mo><mo separator=true>,</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy=false>)</mo><mo>โฆ</mo><mo separator=true>,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=false>)</mo></mrow></math>
<p>for each <math display=inline><msub><mi>x</mi><mi>i</mi></msub></math> in <tt-><h- data-h=mk_attr>args</h-></tt->.
</p>
<note-block><p><intro-></intro-> 
Division by zero does not raise an error.
Instead, it results in infinity or NaN depending on the dividend.
</p></note-block>

<h4 id=dir-cowel_div_to_zero><a class=para href=#dir-cowel_div_to_zero></a>8.11.16. <code><h- data-h=mk_tag>\cowel_div_to_zero</h-></code> โ Division rounded toward zero</h4>

<pre>
<h- data-h=mk_tag>cowel_div_to_zero</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>int</h->
</pre>

<p>Returns the quotient of the division <math display=inline><mrow><mi>x</mi><mo>รท</mo><mi>y</mi></mrow></math>
with rounding toward zero.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>y</h-></tt-> is zero.
</p>
<note-block><p><intro-></intro-> 
The result is that of the <tt->/</tt-> operator in C.
</p></note-block>

<h4 id=dir-cowel_rem_to_zero><a class=para href=#dir-cowel_rem_to_zero></a>8.11.17. <code><h- data-h=mk_tag>\cowel_rem_to_zero</h-></code> โ Remainder rounded toward zero</h4>

<pre>
<h- data-h=mk_tag>cowel_rem_to_zero</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>int</h->
</pre>

<p>Returns the remainder of the division <math display=inline><mrow><mi>x</mi><mo>รท</mo><mi>y</mi></mrow></math>
with rounding toward zero.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>y</h-></tt-> is zero.
</p>
<note-block><p><intro-></intro-> 
The result is that of the <tt->%</tt-> operator in C.
The sign of the result is the sign of the dividend <tt-><h- data-h=mk_attr>x</h-></tt->.
</p></note-block>

<h4 id=dir-cowel_div_to_pos_inf><a class=para href=#dir-cowel_div_to_pos_inf></a>8.11.18. <code><h- data-h=mk_tag>\cowel_div_to_pos_inf</h-></code> โ Division rounded toward positive infinity</h4>

<pre>
<h- data-h=mk_tag>cowel_div_to_pos_inf</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>int</h->
</pre>

<p>Returns the quotient of the division <math display=inline><mrow><mi>x</mi><mo>รท</mo><mi>y</mi></mrow></math>
with rounding toward positive infinity.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>y</h-></tt-> is zero.
</p>
<h4 id=dir-cowel_rem_to_pos_inf><a class=para href=#dir-cowel_rem_to_pos_inf></a>8.11.19. <code><h- data-h=mk_tag>\cowel_rem_to_pos_inf</h-></code> โ Remainder rounded toward positive infinity</h4>

<pre>
<h- data-h=mk_tag>cowel_rem_to_pos_inf</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>int</h->
</pre>

<p>Returns the remainder of the division <math display=inline><mrow><mi>x</mi><mo>รท</mo><mi>y</mi></mrow></math>
with rounding toward positive infinity.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>y</h-></tt-> is zero.
</p>
<h4 id=dir-cowel_div_to_neg_inf><a class=para href=#dir-cowel_div_to_neg_inf></a>8.11.20. <code><h- data-h=mk_tag>\cowel_div_to_neg_inf</h-></code> โ Division rounded toward negative infinity</h4>

<pre>
<h- data-h=mk_tag>cowel_div_to_neg_inf</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>int</h->
</pre>

<p>Returns the quotient of the division <math display=inline><mrow><mi>x</mi><mo>รท</mo><mi>y</mi></mrow></math>
with rounding toward negative infinity.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>y</h-></tt-> is zero.
</p>
<note-block><p><intro-></intro-> 
The result is that of the <tt->//</tt-> operator in Python.
</p></note-block>

<h4 id=dir-cowel_rem_to_neg_inf><a class=para href=#dir-cowel_rem_to_neg_inf></a>8.11.21. <code><h- data-h=mk_tag>\cowel_rem_to_neg_inf</h-></code> โ Remainder rounded toward negative infinity</h4>

<pre>
<h- data-h=mk_tag>cowel_rem_to_neg_inf</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>int</h->
</pre>

<p>Returns the remainder of the division <math display=inline><mrow><mi>x</mi><mo>รท</mo><mi>y</mi></mrow></math>
with rounding toward negative infinity.
</p>
<p>An error is raised of <tt-><h- data-h=mk_attr>y</h-></tt-> is zero.
</p>
<note-block><p><intro-></intro-> 
The result is that of the <tt->%</tt-> operator in Python.
The sign of the result is the sign of the divisor <tt-><h- data-h=mk_attr>y</h-></tt->.
</p></note-block>

<h3 id=logical-operations><a class=para href=#logical-operations></a>8.12. Logical operations</h3>

<note-block><p><intro-></intro-> 
There is no <code><h- data-h=mk_tag>\cowel_xor</h-></code> logical operation
for "logical exclusive OR";
however, the same can be accomplished with <code><h- data-h=mk_tag>\cowel_ne</h-></code>.
<code><h- data-h=mk_tag>\cowel_eq</h-></code> can be used for logical equivalence.
</p></note-block>

<h4 id=dir-cowel_not><a class=para href=#dir-cowel_not></a>8.12.1. <code><h- data-h=mk_tag>\cowel_not</h-></code> โ Logical NOT</h4>

<pre>
<h- data-h=mk_tag>cowel_not</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>bool</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Returns <code>true</code> if <tt-><h- data-h=mk_attr>x</h-></tt-> is <code>false</code>,
otherwise <code>false</code>.
</p>
<h4 id=dir-cowel_and><a class=para href=#dir-cowel_and></a>8.12.2. <code><h- data-h=mk_tag>\cowel_and</h-></code> โ Logical AND</h4>

<pre>
<h- data-h=mk_tag>cowel_and</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack lazy bool</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Returns <code>true</code> if none of <tt-><h- data-h=mk_attr>args</h-></tt-> is <code>false</code>,
otherwise <code>false</code>.
</p>
<p><tt-><h- data-h=mk_attr>args</h-></tt-> is evaluated from left to right,
and any remaining elements are ignored once the result is known.
</p>
<example-block><p><intro-></intro-> 
In the following example,
no error is raised despite the second argument containing a division by zero.
</p><code-block><h- data-h=mk_tag>\cowel_and</h-><h- data-h=sym_par>(</h-><h- data-h=bool>false</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_tag>cowel_eq</h-><h- data-h=sym_par>(</h-><h- data-h=num>0</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_tag>cowel_div_to_zero</h-><h- data-h=sym_par>(</h-><h- data-h=num>0</h-><h- data-h=sym_punc>,</h-> <h- data-h=num>0</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-></code-block>
<p>That is because the result of <code><h- data-h=mk_tag>\cowel_and</h-></code> is already known
after the first <code>false</code>.
</p></example-block>

<h4 id=dir-cowel_or><a class=para href=#dir-cowel_or></a>8.12.3. <code><h- data-h=mk_tag>\cowel_or</h-></code> โ Logical OR</h4>

<pre>
<h- data-h=mk_tag>cowel_or</h->(<h- data-h=mk_attr>args</h->: <h- data-h=kw_type>pack lazy bool</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Returns <code>true</code> if any of <tt-><h- data-h=mk_attr>args</h-></tt-> is <code>true</code>,
otherwise <code>false</code>.
</p>
<p><tt-><h- data-h=mk_attr>args</h-></tt-> is evaluated from left to right,
and any remaining elements are ignored once the result is known.
</p>
<h3 id=comparison-operations><a class=para href=#comparison-operations></a>8.13. Comparison operations</h3>

<p>In all relational comparison below
(<code><h- data-h=mk_tag>\cowel_lt</h-></code>, <code><h- data-h=mk_tag>\cowel_gt</h-></code>, <code><h- data-h=mk_tag>\cowel_le</h-></code>, and <code><h- data-h=mk_tag>\cowel_ge</h-></code>),
if <tt-><h- data-h=mk_attr>x</h-></tt-> and <tt-><h- data-h=mk_attr>y</h-></tt-> are of type <tt-><h- data-h=kw_type>str</h-></tt->,
the comparison is performed lexicographically on the Unicode code points of the string.
The result is unspecified if either string is not valid UTF-8.
If two strings are equal up to the last common code point,
the shorter string is lexicographically less.
</p>
<note-block><p><intro-></intro-> 
Relational string comparison can be implemented by comparing the UTF-8 code units of a string.
</p></note-block>

<p>Some of the operations below are specified in terms of
"compareQuietโฆ" or "compareSignalingโฆ" IEEE-754 operations.
This is only done to define behavior for infinities and NaNs;
there is no way to tell apart signaling and quiet operations in COWEL.
</p>
<h4 id=dir-cowel_eq><a class=para href=#dir-cowel_eq></a>8.13.1. <code><h- data-h=mk_tag>\cowel_eq</h-></code> โ Equals</h4>

<pre>
<h- data-h=mk_tag>cowel_eq</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>unit</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>unit</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_eq</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>null</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>null</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_eq</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>bool</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>bool</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_eq</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->,  <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_eq</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->,  <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_eq</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->,  <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Return <code>true</code> if <math display=inline><mrow><mi>x</mi><mo>=</mo><mi>y</mi></mrow></math>,
otherwise <code>false</code>.
</p>
<p>If <tt-><h- data-h=mk_attr>x</h-></tt-> and <tt-><h- data-h=mk_attr>y</h-></tt-> are of type <tt-><h- data-h=kw_type>unit</h-></tt-> or <tt-><h- data-h=kw_type>null</h-></tt->,
returns <code>true</code>.
</p>
<p>If <tt-><h- data-h=mk_attr>x</h-></tt-> and <tt-><h- data-h=mk_attr>y</h-></tt-> are of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operation
<math display=inline><mrow><mi>compareQuietEqual</mi><mo stretchy=false>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<h4 id=dir-cowel_ne><a class=para href=#dir-cowel_ne></a>8.13.2. <code><h- data-h=mk_tag>\cowel_ne</h-></code> โ Not equals</h4>

<pre>
<h- data-h=mk_tag>cowel_ne</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>unit</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>unit</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_ne</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>null</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>null</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_ne</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>bool</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>bool</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_ne</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->,  <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_ne</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->,  <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_ne</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->,  <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Return <code>true</code> if <math display=inline><mrow><mi>x</mi><mo>โ</mo><mi>y</mi></mrow></math>,
otherwise <code>false</code>.
</p>
<p>If <tt-><h- data-h=mk_attr>x</h-></tt-> and <tt-><h- data-h=mk_attr>y</h-></tt-> are of type <tt-><h- data-h=kw_type>unit</h-></tt-> or <tt-><h- data-h=kw_type>null</h-></tt->,
returns <code>false</code>.
</p>
<p>If <tt-><h- data-h=mk_attr>x</h-></tt-> and <tt-><h- data-h=mk_attr>y</h-></tt-> are of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operation
<math display=inline><mrow><mi>compareQuietNotEqual</mi><mo stretchy=false>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<note-block><p><intro-></intro-> 
The result is <code>cowel_not(cowel_eq(x, y))</code>.
</p></note-block>

<h4 id=dir-cowel_lt><a class=para href=#dir-cowel_lt></a>8.13.3. <code><h- data-h=mk_tag>\cowel_lt</h-></code> โ Less than</h4>

<pre>
<h- data-h=mk_tag>cowel_lt</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_lt</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_lt</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Return <code>true</code> if <math display=inline><mrow><mi>x</mi><mo>&lt;</mo><mi>y</mi></mrow></math>,
otherwise <code>false</code>.
</p>
<p>If <tt-><h- data-h=mk_attr>x</h-></tt-> and <tt-><h- data-h=mk_attr>y</h-></tt-> are of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operation
<math display=inline><mrow><mi>compareSignalingLess</mi><mo stretchy=false>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<h4 id=dir-cowel_gt><a class=para href=#dir-cowel_gt></a>8.13.4. <code><h- data-h=mk_tag>\cowel_gt</h-></code> โ Greater than</h4>

<pre>
<h- data-h=mk_tag>cowel_gt</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_gt</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_gt</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Return <code>true</code> if <math display=inline><mrow><mi>x</mi><mo>&gt;</mo><mi>y</mi></mrow></math>,
otherwise <code>false</code>.
</p>
<p>If <tt-><h- data-h=mk_attr>x</h-></tt-> and <tt-><h- data-h=mk_attr>y</h-></tt-> are of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operation
<math display=inline><mrow><mi>compareSignalingGreater</mi><mo stretchy=false>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<h4 id=dir-cowel_le><a class=para href=#dir-cowel_le></a>8.13.5. <code><h- data-h=mk_tag>\cowel_le</h-></code> โ Less than or equal</h4>

<pre>
<h- data-h=mk_tag>cowel_le</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_le</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_le</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Return <code>true</code> if <math display=inline><mrow><mi>x</mi><mo>โค</mo><mi>y</mi></mrow></math>,
otherwise <code>false</code>.
</p>
<p>If <tt-><h- data-h=mk_attr>x</h-></tt-> and <tt-><h- data-h=mk_attr>y</h-></tt-> are of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operation
<math display=inline><mrow><mi>compareSignalingLessEqual</mi><mo stretchy=false>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<h4 id=dir-cowel_ge><a class=para href=#dir-cowel_ge></a>8.13.6. <code><h- data-h=mk_tag>\cowel_ge</h-></code> โ Greater than or equal</h4>

<pre>
<h- data-h=mk_tag>cowel_ge</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>int</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>int</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_ge</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>float</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>float</h->): <h- data-h=kw_type>bool</h->
<h- data-h=mk_tag>cowel_ge</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->, <h- data-h=mk_attr>y</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Return <code>true</code> if <math display=inline><mrow><mi>x</mi><mo>โฅ</mo><mi>y</mi></mrow></math>,
otherwise <code>false</code>.
</p>
<p>If <tt-><h- data-h=mk_attr>x</h-></tt-> and <tt-><h- data-h=mk_attr>y</h-></tt-> are of type <tt-><h- data-h=kw_type>float</h-></tt->,
the result is that of the IEEE-754 operation
<math display=inline><mrow><mi>compareSignalingGreaterEqual</mi><mo stretchy=false>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=false>)</mo></mrow></math>.
</p>
<h3 id=string-operations><a class=para href=#string-operations></a>8.14. String operations</h3>

<h4 id=dir-cowel_str_length><a class=para href=#dir-cowel_str_length></a>8.14.1. <code><h- data-h=mk_tag>\cowel_str_length</h-></code> โ Length of string</h4>

<pre>
<h- data-h=mk_tag>cowel_str_length</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>int</h->
</pre>

<p>Returns the length of <tt-><h- data-h=mk_attr>x</h-></tt->, in code points.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_str_length</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> U+0061 LATIN SMALL LETTER A</h->
<h- data-h=mk_tag>\cowel_str_length</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>a</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> U+0061 LATIN SMALL LETTER A WITH DIAERESIS</h->
<h- data-h=mk_tag>\cowel_str_length</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>รค</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> U+1F1E9 Regional Indicator Symbol Letter D</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> U+1F1EA Regional Indicator Symbol Letter E</h->
<h- data-h=mk_tag>\cowel_str_length</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>๐ฉ๐ช</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>0
1
1
2</code-block>
</example-block>

<h4 id=dir-cowel_str_utf8_length><a class=para href=#dir-cowel_str_utf8_length></a>8.14.2. <code><h- data-h=mk_tag>\cowel_str_utf8_length</h-></code> โ Length of string in UTF-8 code units</h4>

<pre>
<h- data-h=mk_tag>cowel_str_utf8_length</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>int</h->
</pre>

<p>Returns the length of <tt-><h- data-h=mk_attr>x</h-></tt->, in UTF-8 code units.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_str_utf8_length</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> U+0061 LATIN SMALL LETTER A</h->
<h- data-h=mk_tag>\cowel_str_utf8_length</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>a</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> U+0061 LATIN SMALL LETTER A WITH DIAERESIS</h->
<h- data-h=mk_tag>\cowel_str_utf8_length</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>รค</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> U+1F1E9 Regional Indicator Symbol Letter D</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> U+1F1EA Regional Indicator Symbol Letter E</h->
<h- data-h=mk_tag>\cowel_str_utf8_length</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>๐ฉ๐ช</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>0
1
2
8</code-block>
</example-block>

<note-block><p><intro-></intro-> 
COWEL strings should be internally stored as UTF-8,
so this operation should not require encoding the string as UTF-8.
Rather it accesses available information directly.
</p></note-block>

<h4 id=dir-cowel_str_contains><a class=para href=#dir-cowel_str_contains></a>8.14.3. <code><h- data-h=mk_tag>\cowel_str_contains</h-></code> โ Test if a string contains another string</h4>

<pre>
<h- data-h=mk_tag>cowel_str_contains</h->(<h- data-h=mk_attr>text</h->: <h- data-h=kw_type>str</h->, <h- data-h=mk_attr>needle</h->: <h- data-h=kw_type>str | regex</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Returns <code>true</code> if the <tt-><h- data-h=mk_attr>text</h-></tt-> contains <tt-><h- data-h=mk_attr>needle</h-></tt->,
otherwise <code>false</code>.
Always returns <code>true</code> if <tt-><h- data-h=mk_attr>needle</h-></tt->
is an empty string or empty regular expression.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> "o" character is found in "awoo"</h->
o: <h- data-h=mk_tag>\cowel_str_contains</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>o</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> "A" character is not found.</h->
A: <h- data-h=mk_tag>\cowel_str_contains</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>A</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> Sequence of one or more "o" characters is found.</h->
o+: <h- data-h=mk_tag>\cowel_str_contains</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_tag>cowel_regex</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>o+</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h->

<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> Empty string is always found.</h->
<h- data-h=mk_tag>\cowel_str_contains</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> Empty regular expression is always found.</h->
<h- data-h=mk_tag>\cowel_str_contains</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_tag>cowel_regex</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>o: true
A: false
o+: true

true
true</code-block>
</example-block>

<h4 id=dir-cowel_str_match><a class=para href=#dir-cowel_str_match></a>8.14.4. <code><h- data-h=mk_tag>\cowel_str_match</h-></code> โ Test if a string matches a regular expression</h4>

<pre>
<h- data-h=mk_tag>cowel_str_match</h->(<h- data-h=mk_attr>text</h->: <h- data-h=kw_type>str</h->, <h- data-h=mk_attr>regex</h->: <h- data-h=kw_type>regex</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Returns <code>true</code> if the <tt-><h- data-h=mk_attr>text</h-></tt-> matches <tt-><h- data-h=mk_attr>regex</h-></tt-> (in its entirety),
otherwise <code>false</code>.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_str_match</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_tag>cowel_regex</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awo+</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\cowel_str_match</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_tag>cowel_regex</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>o+</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>true
false</code-block>
</example-block>

<h4 id=dir-cowel_str_to_lower><a class=para href=#dir-cowel_str_to_lower></a>8.14.5. <code><h- data-h=mk_tag>\cowel_str_to_lower</h-></code> โ Convert string to lowercase</h4>

<pre>
<h- data-h=mk_tag>cowel_str_to_lower</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>str</h->
</pre>

<p>Returns <tt-><h- data-h=mk_attr>x</h-></tt-> converted to lowercase.
That is, applies the
<a href=https://www.unicode.org/versions/Unicode17.0.0/core-spec/chapter-3/#G34078>toLowercase Default Case Conversion</a>
as specified in Unicode,
without any language-sensitive mappings.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_str_to_lower</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>Awoo รรร 123</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>awoo รครถรผ 123</code-block>
</example-block>

<h4 id=dir-cowel_str_to_upper><a class=para href=#dir-cowel_str_to_upper></a>8.14.6. <code><h- data-h=mk_tag>\cowel_str_to_upper</h-></code> โ Convert string to uppercase</h4>

<pre>
<h- data-h=mk_tag>cowel_str_to_upper</h->(<h- data-h=mk_attr>x</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>str</h->
</pre>

<p>Returns <tt-><h- data-h=mk_attr>x</h-></tt-> converted to uppercase.
That is, applies the
<a href=https://www.unicode.org/versions/Unicode17.0.0/core-spec/chapter-3/#G34078>toUppercase Default Case Conversion</a>
as specified in Unicode,
without any language-sensitive mappings.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\cowel_str_to_upper</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>Awoo รครถรผ Straรe 123</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>AWOO รรร STRASSE 123</code-block>
</example-block>

<h4 id=dir-cowel_str_replace_first><a class=para href=#dir-cowel_str_replace_first></a>8.14.7. <code><h- data-h=mk_tag>\cowel_str_replace_first</h-></code> โ Replace first occurrence</h4>

<pre>
<h- data-h=mk_tag>cowel_str_replace_first</h->(
  <h- data-h=mk_attr>text</h->: <h- data-h=kw_type>str</h->,
  <h- data-h=mk_attr>needle</h->: <h- data-h=kw_type>str | regex</h->,
  <h- data-h=mk_attr>with</h->: <h- data-h=kw_type>str</h->,
): <h- data-h=kw_type>str</h->
</pre>

<p>Returns <tt-><h- data-h=mk_attr>text</h-></tt-> with the first occurrence of <tt-><h- data-h=mk_attr>needle</h-></tt->
replaced with <tt-><h- data-h=mk_attr>with</h-></tt->.
An empty <tt-><h- data-h=mk_attr>needle</h-></tt-> of type <tt-><h- data-h=kw_type>str</h-></tt->
is immediately found at the start of <tt-><h- data-h=mk_attr>text</h-></tt->.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block>o -&gt; x:             <h- data-h=mk_tag>\cowel_str_replace_first</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>o</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>x</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
delete o:           <h- data-h=mk_tag>\cowel_str_replace_first</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>o</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
w or o -&gt; x:        <h- data-h=mk_tag>\cowel_str_replace_first</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_tag>cowel_regex</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>[wo]</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>x</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
empty -&gt; x:         <h- data-h=mk_tag>\cowel_str_replace_first</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>x</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->

Replace everything: <h- data-h=mk_tag>\cowel_str_replace_first</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>xyz</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
No replacement:     <h- data-h=mk_tag>\cowel_str_replace_first</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>x</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>o -&gt; x:             awxo
delete o:           awo
w or o -&gt; x:        axoo
empty -&gt; x:         xawoo

Replace everything: xyz
No replacement:     awoo</code-block>
</example-block>

<h4 id=dir-cowel_str_replace_all><a class=para href=#dir-cowel_str_replace_all></a>8.14.8. <code><h- data-h=mk_tag>\cowel_str_replace_all</h-></code> โ Replace every occurrence</h4>

<pre>
<h- data-h=mk_tag>cowel_str_replace_all</h->(
  <h- data-h=mk_attr>text</h->: <h- data-h=kw_type>str</h->,
  <h- data-h=mk_attr>needle</h->: <h- data-h=kw_type>str | regex</h->,
  <h- data-h=mk_attr>with</h->: <h- data-h=kw_type>str</h->,
): <h- data-h=kw_type>str</h->
</pre>

<p>Returns <tt-><h- data-h=mk_attr>text</h-></tt-> with every occurrence of <tt-><h- data-h=mk_attr>needle</h-></tt->
replaced with <tt-><h- data-h=mk_attr>with</h-></tt->.
</p>
<p>Because an empty <tt-><h- data-h=mk_attr>needle</h-></tt->
(or regular expression that matches an empty string)
would need to be replaced infinitely many times,
any matched empty sequence of characters in <tt-><h- data-h=mk_attr>text</h-></tt->
(that is, a zero-length sequence before or after a code point)
is replaced exactly once.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block>o -&gt; x:             <h- data-h=mk_tag>\cowel_str_replace_all</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>o</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>x</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
delete o:           <h- data-h=mk_tag>\cowel_str_replace_all</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>o</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
w or o -&gt; x:        <h- data-h=mk_tag>\cowel_str_replace_all</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_tag>cowel_regex</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>[wo]</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>x</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
empty -&gt; x:         <h- data-h=mk_tag>\cowel_str_replace_all</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>x</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->

Replace everything: <h- data-h=mk_tag>\cowel_str_replace_all</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>xyz</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h->
No replacement:     <h- data-h=mk_tag>\cowel_str_replace_all</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>awoo</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str>x</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_punc>,</h-> <h- data-h=str_dlim>"</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code-block>
<p>Generated HTML:
</p><code-block>o -&gt; x:             awxx
delete o:           aw
w or o -&gt; x:        axxx
empty -&gt; x:         xaxwxoxox

Replace everything: xyz
No replacement:     awoo</code-block>
</example-block>

<h4 id=dir-cowel_regex><a class=para href=#dir-cowel_regex></a>8.14.9. <code><h- data-h=mk_tag>\cowel_regex</h-></code> โ Create a regular expression</h4>

<pre>
<h- data-h=mk_tag>cowel_regex</h->(<h- data-h=mk_attr>pattern</h->: <h- data-h=kw_type>str</h->, <h- data-h=mk_attr>flags</h->: <h- data-h=kw_type>str</h-> = ""): <h- data-h=kw_type>regex</h->
</pre>

<p>Creates a <tt-><h- data-h=kw_type>regex</h-></tt-> value from a <tt-><h- data-h=mk_attr>pattern</h-></tt->,
and optionally given <tt-><h- data-h=mk_attr>flags</h-></tt->.
The semantics are exactly the same as those of the ECMAScript
<a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/RegExp><tt->RegExp</tt-> constructor</a>
invoked with the given arguments,
except that:
</p><ul>
  <li>
    Some flags are unsupported, such as '<tt->y</tt->' (sticky).
  </li>
  <li>
    The '<tt->g</tt->' (global) and '<tt->u</tt->' (Unicode) flags are always set.
    Consequently, regular expressions operate on the code points of a string.
    By comparison, ECMAScript regular expressions operate on UTF-16 code units
    of a <tt->string</tt-> rather than on code points,
    unless the '<tt->u</tt->' or '<tt->v</tt->' flag is provided.
  </li>
  <li>
    <tt-><h- data-h=kw_type>regex</h-></tt-> is completely stateless,
    unlike ECMAScript <tt->RegExp</tt-> which keeps state
    in the form of the <tt->lastIndex</tt-> property.
  </li>
</ul>

<p><tt-><h- data-h=mk_attr>flags</h-></tt-> is a string of lowercase letters.
An error is raised if it contains any duplicates,
or if a character is not one of the permitted flags:
</p>
<dl>
  <dt>'<tt->i</tt->' (ignore case)</dt>
  <dd>When matching, casing differences are ignored.</dd>
  <dt>'<tt->m</tt->' (multiline)</dt>
  <dd>
    When enabled, treat '<tt->^</tt->' and '<tt->$</tt->' as matching the beginning or end
    of <em>each line</em> (delimited by LF or CR),
    not only the beginning and end of the whole string.
  </dd>
  <dt>'<tt->s</tt->' (dot all)</dt>
  <dd>Allows '<tt->.</tt->' to match newlines.</dd>
  <dt>'<tt->v</tt->' (Unicode sets)</dt>
  <dd>Enables more Unicode features.</dd>
</dl>

<h3 id=variable-management><a class=para href=#variable-management></a>8.15. Variable management</h3>

<h4 id=dir-cowel_var_let><a class=para href=#dir-cowel_var_let></a>8.15.1. <code><h- data-h=mk_tag>\cowel_var_let</h-></code> โ Initialize a new variable</h4>

<pre>
<h- data-h=mk_tag>cowel_var_let</h->(
  <h- data-h=mk_attr>name</h->: <h- data-h=kw_type>str</h->,
  <h- data-h=mk_attr>value</h->: <h- data-h=kw_type>any</h-> = null,
): <h- data-h=kw_type>unit</h->
</pre>

<p>Sets the value of a global variable named <tt-><h- data-h=mk_attr>name</h-></tt-> to <tt-><h- data-h=mk_attr>value</h-></tt->.
An error is raised if such a variable already exists.
</p>
<h4 id=dir-cowel_var_set><a class=para href=#dir-cowel_var_set></a>8.15.2. <code><h- data-h=mk_tag>\cowel_var_set</h-></code> โ Set an existing variable</h4>

<pre>
<h- data-h=mk_tag>cowel_var_set</h->(
  <h- data-h=mk_attr>name</h->: <h- data-h=kw_type>str</h->,
  <h- data-h=mk_attr>value</h->: <h- data-h=kw_type>any</h->,
): <h- data-h=kw_type>unit</h->
</pre>

<p>Sets the value of a global variable named <tt-><h- data-h=mk_attr>name</h-></tt-> to <tt-><h- data-h=mk_attr>value</h-></tt->.
An error is raised if no such variable exists.
</p>
<h4 id=dir-cowel_var_exists><a class=para href=#dir-cowel_var_exists></a>8.15.3. <code><h- data-h=mk_tag>\cowel_var_exists</h-></code> โ Check whether a variable exists</h4>

<pre>
<h- data-h=mk_tag>cowel_var_exists</h->(<h- data-h=mk_attr>name</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>bool</h->
</pre>

<p>Returns <code>true</code> if a variable named <tt-><h- data-h=mk_attr>name</h-></tt-> exists,
otherwise <code>false</code>.
</p>
<h4 id=dir-cowel_var_get><a class=para href=#dir-cowel_var_get></a>8.15.4. <code><h- data-h=mk_tag>\cowel_var_get</h-></code> โ Get the value of a variable</h4>

<pre>
<h- data-h=mk_tag>cowel_var_get</h->(<h- data-h=mk_attr>name</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>any</h->
</pre>

<p>Returns the value of the global variable named <tt-><h- data-h=mk_attr>name</h-></tt->.
An error is raised if there is no such variable.
</p>
<h4 id=dir-cowel_var_delete><a class=para href=#dir-cowel_var_delete></a>8.15.5. <code><h- data-h=mk_tag>\cowel_var_delete</h-></code> โ Delete an existing variable</h4>

<pre>
<h- data-h=mk_tag>cowel_var_delete</h->(<h- data-h=mk_attr>name</h->: <h- data-h=kw_type>str</h->): <h- data-h=kw_type>unit</h->
</pre>

<p>Deletes the global variable named <tt-><h- data-h=mk_attr>name</h-></tt->.
An error is raised if there is no such variable.

</p><h2 id=legacy-directives><a class=para href=#legacy-directives></a>9. Legacy directives</h2>

<warning-block><p><intro-></intro-> 
The following builtin directives are all considered deprecated,
but not all have a suitable replacement yet.
These directives were created during the first iteration of COWEL,
before plans were made to create a small set of builtin directives,
with macro packages that provide additional functionality.
</p>
<p>The documentation for these directives is not actively maintained.
</p></warning-block>

<h3 id=text-formatting><a class=para href=#text-formatting></a>9.1. Text formatting</h3>

<p>COWEL allows for basic text formatting using various directives.
Many of the formatting directives are some direct equivalent of an HTML element.
For these, there is a fixed HTML element that will always be used.
You can rely on this when adding custom CSS.
</p>
<table>
  <tr>
    <th>Directive</th>
    <th>HTML</th>
    <th>Renders as</th>
  </tr>
  <tr id=dir-b>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>b</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><b>Bold text</b></td>
  </tr>
  <tr id=dir-cite>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cite</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>cite</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>cite</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><cite>Name of cited work</cite></td>
  </tr>
  <tr id=dir-del>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>del</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>del</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>del</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><del>Deleted text</del></td>
  </tr>
  <tr id=dir-dfn>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>dfn</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>dfn</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>dfn</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><dfn>Definition</dfn></td>
  </tr>
  <tr id=dir-em>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>em</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>em</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>em</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><em>Emphasized text</em></td>
  </tr>
  <tr id=dir-gterm>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>gterm</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><i>unspecified</i></td>
    <td><g-term>grammar-term</g-term></td>
  </tr>
  <tr id=dir-i>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>i</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>i</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>i</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><i>Italic text</i></td>
  </tr>
  <tr id=dir-ins>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>ins</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>ins</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>ins</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><ins>Inserted text</ins></td>
  </tr>
  <tr id=dir-kbd>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>kbd</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>kbd</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>kbd</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><kbd>Ctrl</kbd> + <kbd>Keyboard key</kbd></td>
  </tr>
  <tr id=dir-mark>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>mark</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>mark</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>mark</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><mark>Marked/highlighted</mark></td>
  </tr>
  <tr id=dir-o>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>o</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><i>unspecified</i></td>
    <td><span class=oblique>Oblique text</span></td>
  </tr>
  <tr id=dir-q>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>q</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>q</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>q</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><q>Quoted text</q></td>
  </tr>
  <tr id=dir-s>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>s</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>s</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>s</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><s>Struck text</s></td>
  </tr>
  <tr id=dir-samp>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>samp</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>samp</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>samp</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><samp>Sample output</samp></td>
  </tr>
  <tr id=dir-sans>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>sans</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><i>unspecified</i></td>
    <td><f-sans>Sans-serif font</f-sans></td>
  </tr>
  <tr id=dir-serif>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>serif</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><i>unspecified</i></td>
    <td><f-serif>Serif font</f-serif></td>
  </tr>
  <tr id=dir-small>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>small</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>small</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>small</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><sub>Small text</sub></td>
  </tr>
  <tr id=dir-span>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>span</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>span</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>span</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td>(No change in formatting)</td>
  </tr>
  <tr id=dir-sub>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>sub</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>sub</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>sub</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><sub>Subscript</sub></td>
  </tr>
  <tr id=dir-sup>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>sup</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>sup</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>sup</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><sup>Superscript</sup></td>
  </tr>
  <tr id=dir-strong>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>strong</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>strong</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>strong</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><b>Strong text</b></td>
  </tr>
  <tr id=dir-tt>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>tt</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><i>unspecified</i></td>
    <td><tt->Teletype/monospace font</tt-></td>
  </tr>
  <tr id=dir-var>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>var</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>var</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>var</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><var>Variable name</var></td>
  </tr>
  <tr id=dir-u>
    <td><code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>u</h-><h- data-h=sym_brac>{</h->...<h- data-h=sym_brac>}</h-></code></td>
    <td><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>u</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>u</h-><h- data-h=sym_punc>&gt;</h-></code></td>
    <td><u>Underlined text</u></td>
  </tr>
</table>

<p>All such <dfn>formatting directives</dfn>
convert all named arguments directly into HTML attributes.
</p>
<note-block><p><intro-></intro-> 
By default, a substantial amount of directives are styled the same way.
For example, <code><h- data-h=mk_tag>\cite</h-></code>, <code><h- data-h=mk_tag>\var</h-></code>, <code><h- data-h=mk_tag>\i</h-></code> and <code><h- data-h=mk_tag>\em</h-></code> are all italic.
Both <code><h- data-h=mk_tag>\strong</h-></code> and <code><h- data-h=mk_tag>\b</h-></code> are bold.
Both <code><h- data-h=mk_tag>\tt</h-></code> and <code><h- data-h=mk_tag>\samp</h-></code> use teletype font.
</p>
<p>However, you can customize the style; see <a href=#dir-style>ยง9.11.3. <code><h- data-h=mk_tag>\style</h-></code> โ CSS blocks</a>.
</p></note-block>

<note-block><p><intro-></intro-> 
The difference between oblique (<code><h- data-h=mk_tag>\o</h-></code>) and italic (<code><h- data-h=mk_tag>\i</h-></code>) text
is that oblique text is merely slanted,
while italic text is fundamentally a different font with different characters.
</p></note-block>
<h3 id=code><a class=para href=#code></a>9.2. Code and syntax highlighting</h3>

<p>COWEL uses
<a href=https://github.com/Eisenwave/ulight>ยตlight</a>
for syntax highlighting.
While the set of supported language is relatively small,
the highlighter is ultra-light, extremely fast, and
deals with modern C++ features correctly.
</p>
<h4 id=dir-code><a class=para href=#dir-code></a>9.2.1. <code><h- data-h=mk_tag>\code</h-></code> โ Inline code</h4>

<p>The <code><h- data-h=mk_tag>\code</h-></code> directive produced syntax-highlighted text in code font.
</p>
<dl>
  <dt>Arguments</dt>
  <dd>
    <ul>
      <li>
        <tt-><h- data-h=mk_attr>lang</h-></tt-> (plaintext) โ the syntax highlighting language.
      </li>
      <li>
        <tt-><h- data-h=mk_attr>nested</h-></tt-> (true/false) โ whether to omit <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_punc>&gt;</h-></code> tags.
      </li>
    </ul>
  </dd>

  <dt>Input content</dt>
  <dd>
  The input to a <code><h- data-h=mk_tag>\code</h-></code> directive is a plaintext context.
  However, there are special rules for formatting directives
  and pure plaintext directives (see below).
  </dd>

  <dt>HTML output</dt>
  <dd>
  In an HTML context, the <code><h- data-h=mk_tag>\code</h-></code> takes the input source code,
  applies syntax highlighting,
  and outputs the result surrounded by <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_punc>&gt;</h-></code>.
  </dd>

  <dt>Plaintext output</dt>
  <dd>
  In a plaintext context, <code><h- data-h=mk_tag>\code</h-></code> simply outputs the input source code.
  </dd>

  <dt>Display style</dt>
  <dd>Inline</dd>
</dl>

<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_par>(</h-><h- data-h=str>cpp</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->123<h- data-h=sym_brac>}</h-></code-block>
<p>This applies C++ syntax highlighting, and generates HTML.
The <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>h-</h-><h- data-h=sym_punc>&gt;</h-></code> tags are an implementation detail and may be subject to change.
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_punc>&gt;</h-><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>h-</h-> <h- data-h=mk_attr>data-h</h-><h- data-h=sym_punc>=</h-><h- data-h=str>num</h-><h- data-h=sym_punc>&gt;</h->123<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>h-</h-><h- data-h=sym_punc>&gt;</h-><h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>

<h5 id=manual-nested-highlighting><a class=para href=#manual-nested-highlighting></a>9.2.1.1. Manual nested highlighting</h5>

<p>The <tt->nested</tt-> parameter is a plaintext context,
which accepts either <tt->true</tt-> or <tt->false</tt->, where <tt->false</tt-> is the default.
When enabled, the surrounding <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_punc>&gt;</h-></code> tags are omitted,
which makes it suitable for nesting languages
within other <code><h- data-h=mk_tag>\code</h-></code> or <code><h- data-h=mk_tag>\codeblock</h-></code> directives.
</p>
<example-block><p><intro-></intro-> 
You can nest JSON inside of a C++ string literal as follows:
</p><code-block>Call: <h- data-h=mk_tag>\code</h-><h- data-h=sym_par>(</h-><h- data-h=str>cpp</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->out.write_json("<h- data-h=mk_tag>\code</h-><h- data-h=sym_par>(</h-><h- data-h=str>json</h-><h- data-h=sym_punc>,</h-><h- data-h=mk_attr>nested</h-><h- data-h=sym_punc>=</h-><h- data-h=bool>true</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->{"x":123,"y":true,"z":null}<h- data-h=sym_brac>}</h->")<h- data-h=sym_brac>}</h-></code-block>
<p>This renders as follows:
</p><div class=indent>
Call: <code><h- data-h=name>out</h-><h- data-h=sym_op>.</h-><h- data-h=name>write_json</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_attr>"x"</h-><h- data-h=sym_punc>:</h-><h- data-h=num>123</h-><h- data-h=sym_punc>,</h-><h- data-h=mk_attr>"y"</h-><h- data-h=sym_punc>:</h-><h- data-h=bool>true</h-><h- data-h=sym_punc>,</h-><h- data-h=mk_attr>"z"</h-><h- data-h=sym_punc>:</h-><h- data-h=null>null</h-><h- data-h=sym_brac>}</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code>
</div>
</example-block>

<p>Note that by default,
you may often not even notice a visual difference between using the <tt->nested</tt->
parameter and not using it.
However, the difference would be obvious once you want to style <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_punc>&gt;</h-></code> elements
to have borders, background color, padding, and other such styling features.
<tt->nested=true</tt-> directly emits the highlighting HTML elements,
which is more composable.
</p>
<h5 id=further-advice-on-highlighting><a class=para href=#further-advice-on-highlighting></a>9.2.1.2. Further advice on highlighting</h5>

<tip-block><p><intro-></intro-> 
Writing <code><h- data-h=mk_tag>\code</h-></code> directives directly is often too tedious,
so you'll likely want to define a macro to make this easier:
</p><code-block><h- data-h=cmt_dlim>\</h-><h- data-h=cmt_dlim>:</h-><h- data-h=cmt> Defines a </h-><h- data-h=cmt>\</h-><h- data-h=cmt>js directive that can be used in place of </h-><h- data-h=cmt>\</h-><h- data-h=cmt>code(js) from now on:</h->
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>macro</h-><h- data-h=sym_par>(</h->\js<h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_par>(</h-><h- data-h=str>js</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>put</h-><h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h->
Let's highlight <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>js</h-><h- data-h=sym_brac>{</h->var<h- data-h=sym_brac>}</h-> in JavaScript.</code-block>
</tip-block>

<h4 id=dir-codeblock><a class=para href=#dir-codeblock></a>9.2.2. <code><h- data-h=mk_tag>\codeblock</h-></code> โ Code blocks</h4>

<p>The <code><h- data-h=mk_tag>\codeblock</h-></code> directive works exactly like <code><h- data-h=mk_tag>\code</h-></code>,
but it is a block directive, not an inline directive.
</p>
<p>Additionally, code blocks render using borders and a dark background by default.
This can be controlled using the <tt->borders</tt->.
</p>
<example-block><p><intro-></intro-> 
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>codeblock</h-><h- data-h=sym_par>(</h-><h- data-h=str>js</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->
// Borders enabled
let x = 0;
<h- data-h=sym_brac>}</h->
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>codeblock</h-><h- data-h=sym_par>(</h-><h- data-h=str>js</h-><h- data-h=sym_punc>,</h-> <h- data-h=mk_attr>borders</h-> <h- data-h=sym_punc>=</h-> <h- data-h=bool>false</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->
// Borders disabled
let x = 0;
<h- data-h=sym_brac>}</h-></code-block>
<p>This renders as:
</p><code-block><h- data-h=cmt_dlim>//</h-><h- data-h=cmt> Borders enabled</h->
<h- data-h=kw>let</h-> <h- data-h=name>x</h-> <h- data-h=sym_op>=</h-> <h- data-h=num>0</h-><h- data-h=sym_punc>;</h-></code-block>
<code-block class=borderless><h- data-h=cmt_dlim>//</h-><h- data-h=cmt> Borders disabled</h->
<h- data-h=kw>let</h-> <h- data-h=name>x</h-> <h- data-h=sym_op>=</h-> <h- data-h=num>0</h-><h- data-h=sym_punc>;</h-></code-block>
</example-block>

<h4 id=dir-hl><a class=para href=#dir-hl></a>9.2.3. <code><h- data-h=mk_tag>\hl</h-></code> โ Syntax highlight override</h4>

<p>The <code><h- data-h=mk_tag>\hl</h-></code> directive forces certain syntax highlighting to be applied to some text;
it is a manual override for when automatic syntax highlighting is insufficient or broken.
It displays as inline content and wraps its content (which is an HTML context)
in the appropriate syntax highlighting tags.
</p>
<p>It has a single <tt->name</tt-> argument, which is the ยตlight <dfn>long name</dfn> for a highlight type.
You can obtain a list of possible long names at
<a href=https://github.com/Eisenwave/ulight/blob/main/include/ulight/ulight.h><tt->ulight.h</tt-></a>
from the definition of <code><h- data-h=kw>enum</h-> <h- data-h=name>ulight_highlight_type</h-></code>.
The long name is the enumerator name without the <tt->ULIGHT_HL</tt-> prefix,
all lowercase, and with hyphens instead of underscores.
</p>
<example-block><p><intro-></intro-> 
It is possible to mix automatic syntax highlighting with manual overrides:
</p><code-block><h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> _Int128 is manually highlighted as a type keyword,</h->
<h- data-h=cmt_dlim>\:</h-><h- data-h=cmt> and x is automatically highlighted as an identifier.</h->
<h- data-h=mk_tag>\code</h-><h- data-h=sym_par>(</h-><h- data-h=str>c</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\hl</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>keyword-type</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->_Int128<h- data-h=sym_brac>}</h-> x<h- data-h=sym_brac>}</h-></code-block>
<p>This generates the HTML (subject to change):
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_punc>&gt;</h-><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>h-</h-> <h- data-h=mk_attr>data</h-><h- data-h=sym_punc>=</h-><h- data-h=str>h</h->=kw_type&gt;_Int128<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>h-</h-><h- data-h=sym_punc>&gt;</h-> <h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>h-</h-> <h- data-h=mk_attr>data-h</h-><h- data-h=sym_punc>=</h-><h- data-h=str>id</h-><h- data-h=sym_punc>&gt;</h->x<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>h-</h-><h- data-h=sym_punc>&gt;</h-><h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>code</h-><h- data-h=sym_punc>&gt;</h-></code-block>
<p>It renders as <code><h- data-h=kw_type>_Int128</h-> <h- data-h=name>x</h-></code>.
</p></example-block>

<note-block><p><intro-></intro-> 
While it is also possible to produce the highlighting tags using
<code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>html</h->-h-(data-h=kw_type){_Int128}</code>,
the "short names" (<code>kw_type</code>) are not stable, i.e. they are more likely to change.
Only ยตlight long names should be used directly.
</p></note-block>

<h4 id=dir-pre><a class=para href=#dir-pre></a>9.2.4. <code><h- data-h=mk_tag>\pre</h-></code> โ Preformatted blocks</h4>

<p>The <code><h- data-h=mk_tag>\pre</h-></code> directive contains pre-formatted content.
It can be used to contain code, however, there is no syntax highlighting in a <code><h- data-h=mk_tag>\pre</h-></code> block.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>pre</h-><h- data-h=sym_brac>{</h->
Hello, world!
=============
    a b c
<h- data-h=sym_brac>}</h-></code-block>
<p>This renders as:
</p><pre>
Hello, world!
=============
    a b c
</pre>
</example-block>

<todo-block><p><intro-></intro-> 
Unlike <code><h- data-h=mk_tag>\codeblock</h-></code>, <code><h- data-h=mk_tag>\pre</h-></code> currently does not support the <tt->borders=no</tt-> option.
This will be added in the future.
</p></todo-block>

<h3 id=math><a class=para href=#math></a>9.3. Math</h3>

<p>In recent years, browser support for
<a href=https://developer.mozilla.org/en-US/docs/Web/MathML>MathML</a>
within HTML has become widespread.
COWEL relies entirely on the browser for properly rendering math as MathML,
which is very simple and lightweight,
but not as portable as "baking" the math into an SVG.
</p>
<example-block><p><intro-></intro-> 
If you have existing MathML,
you can embed their content using <code><h- data-h=mk_tag>\cowel_text_as_html</h-></code>:
</p><code-block>Math
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_text_as_html</h-><h- data-h=sym_brac>{</h->
<h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>math</h-> <h- data-h=mk_attr>display</h-><h- data-h=sym_punc>=</h->inline&gt;
  <h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>mfrac</h-><h- data-h=sym_punc>&gt;</h->
    <h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>mi</h-><h- data-h=sym_punc>&gt;</h->x<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>mi</h-><h- data-h=sym_punc>&gt;</h->
    <h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>mn</h-><h- data-h=sym_punc>&gt;</h->2<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>mn</h-><h- data-h=sym_punc>&gt;</h->
  <h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>mfrac</h-><h- data-h=sym_punc>&gt;</h->
<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>math</h-><h- data-h=sym_punc>&gt;</h->
<h- data-h=sym_brac>}</h->
in a sentence.</code-block>
<p>This renders as:
</p><div class=indent>
Math
<math display=inline>
<mfrac>
  <mi>x</mi>
  <mn>2</mn>
</mfrac>
</math>
in a sentence.
</div>
<p>You can also keep the MathML separate within an XML document
and use <code><h- data-h=mk_tag>\cowel_include_text</h-></code>:
</p><code-block>Math <h- data-h=mk_tag>\cowel_text_as_html</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\cowel_include_text</h-><h- data-h=sym_brac>{</h->math.mml<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-> in a sentence.</code-block>
</example-block>

<p>However, hand-writing MathML would be extremely tedious and verbose,
so COWEL offers some convenience directives, listed below.
</p>
<h4 id=dir-math><a class=para href=#dir-math></a>9.3.1. <code><h- data-h=mk_tag>\math</h-></code> โ Inline math</h4>

<p>A <code><h- data-h=mk_tag>\math</h-></code> directive surrounds its content with
<code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>math</h-> <h- data-h=mk_attr>display</h-><h- data-h=sym_punc>=</h-><h- data-h=str>inline</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>math</h-><h- data-h=sym_punc>&gt;</h-></code> tags,
and displays as inline content.
</p>
<p>Its content is an HTML context,
and within it, additional pseudo-directives like <code><h- data-h=mk_tag>\mi</h-></code> or <code><h- data-h=mk_tag>\mn</h-></code>
corresponding to MathML elements can be used.
Essentially, this allows you to build MathML using COWEL syntax.
</p>
<p>See <a href=https://developer.mozilla.org/en-US/docs/Web/MathML/Reference/Element>Mozilla's MathML elements reference</a>
for a list of supported elements/directives.
</p>
<example-block><p><intro-></intro-> 
The previous example in <a href=#math>ยง9.3. Math</a> could also be written like:
</p><code-block>Math
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>math</h-><h- data-h=sym_brac>{</h-> <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>mfrac</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>mi</h-><h- data-h=sym_brac>{</h->x<h- data-h=sym_brac>}</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>mn</h-><h- data-h=sym_brac>{</h->2<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-> <h- data-h=sym_brac>}</h->
in a sentence.</code-block>
</example-block>

<tip-block><p><intro-></intro-> 
If you frequently use math inside plain sentences,
you can define a convenience macro:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>macro</h-><h- data-h=sym_par>(</h->\mathsqr{...<h- data-h=sym_brac>}</h->){<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>math</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>msup</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>mi</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>put</h-><h- data-h=sym_brac>}</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>mn</h-><h- data-h=sym_brac>{</h->2<h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h-><h- data-h=sym_brac>}</h->}

The sum of <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>mathsqr</h-><h- data-h=sym_brac>{</h->x<h- data-h=sym_brac>}</h-> and <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>mathsqr</h-><h- data-h=sym_brac>{</h->y<h- data-h=sym_brac>}</h-> โฆ</code-block>
<p>This renders as:
</p><div class=indent>
The sum of <math display=inline><msup><mi>x</mi><mn>2</mn></msup></math> and <math display=inline><msup><mi>y</mi><mn>2</mn></msup></math> โฆ
</div>
</tip-block>

<h4 id=dir-mathblock><a class=para href=#dir-mathblock></a>9.3.2. <code><h- data-h=mk_tag>\mathblock</h-></code> โ Math blocks</h4>

<p>The <code><h- data-h=mk_tag>\mathblock</h-></code> directive functions almost exactly as the <code><h- data-h=mk_tag>\math</h-></code> directive,
but it displays as block content instead of inline content,
and it produces an opening
<code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>math</h-> <h- data-h=mk_attr>display</h-><h- data-h=sym_punc>=</h-><h- data-h=str>block</h-><h- data-h=sym_punc>&gt;</h-></code> tag.
</p><h3 id=separators-and-word-breaking><a class=para href=#separators-and-word-breaking></a>9.4. Separators and word breaking</h3>

<h4 id=dir-br><a class=para href=#dir-br></a>9.4.1. <code><h- data-h=mk_tag>\br</h-></code> โ Break line</h4>

<p>The <code><h- data-h=mk_tag>\br</h-></code> directive produces a line break,
and corresponds to the HTML element <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>br</h-><h- data-h=sym_punc>/&gt;</h-></code>.
It displays as inline content, and its input content is ignored.
</p>
<p><code><h- data-h=mk_tag>\br</h-></code> is particularly useful when line breaks are treated same as spaces,
which is the case in most HTML content.
</p>
<h4 id=dir-hr><a class=para href=#dir-hr></a>9.4.2. <code><h- data-h=mk_tag>\hr</h-></code> โ Horizontal rule</h4>

<p>The <code><h- data-h=mk_tag>\hr</h-></code> directive produces a horizontal rule,
and corresponds to the HTML element <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>hr</h-><h- data-h=sym_punc>/&gt;</h-></code>.
It displays as block content, and its input content is ignored.
</p>
<p>Here is an example:
</p><hr/>

<h4 id=dir-wbr><a class=para href=#dir-wbr></a>9.4.3. <code><h- data-h=mk_tag>\wbr</h-></code> โ Word break opportunity</h4>

<p>The <code><h- data-h=mk_tag>\wbr</h-></code> directive produces a word break opportunity,
and corresponds to the HTML element <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>wbr</h-><h- data-h=sym_punc>&gt;</h-></code>.
It displays as inline content, and its input content is ignored.
</p>
<p><code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>wbr</h-><h- data-h=sym_punc>&gt;</h-></code> elements can be inserted into the middle of long words,
which, if they don't fit on one line,
will be broken at the point of the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>wbr</h-><h- data-h=sym_punc>&gt;</h-></code> element
(without a hyphen at the end of the line).
</p>
<p>Since ยตlight only supports UTF-8 output, <code><h- data-h=mk_tag>\wbr</h-></code> is equivalent to <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>U</h-><h- data-h=sym_brac>{</h->200B<h- data-h=sym_brac>}</h-></code>,
which outputs a U+200B ZERO-WIDTH SPACE code point.
</p>
<tip-block><p><intro-></intro-> 
If you want to provide a word break hint but have a hyphen at the end of the line,
use <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>U</h-><h- data-h=sym_brac>{</h->AD<h- data-h=sym_brac>}</h-></code> or <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>c</h-><h- data-h=sym_brac>{</h->shy<h- data-h=sym_brac>}</h-></code> to output a U+00AD SOFT HYPHEN.
</p></tip-block>

<h4 id=dir-nobr><a class=para href=#dir-nobr></a>9.4.4. <code><h- data-h=mk_tag>\nobr</h-></code> โ Unbroken words</h4>

<p>The <code><h- data-h=mk_tag>\nobr</h-></code> directive is a formatting directive
which prevents word breaks within its content.
Its content is an HTML context.
This is done by applying a
<code><h- data-h=mk_attr>white-space</h-><h- data-h=sym_punc>:</h-> <h- data-h=name>nowrap</h-><h- data-h=sym_punc>;</h-></code>
style its content.
</p>
<tip-block><p><intro-></intro-> 
Another way to prevent word-breaking is to use non-breaking spaces.
You can insert these using
</p><ul>
  <li><code>Combined<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>c</h-><h- data-h=sym_brac>{</h->nbsp<h- data-h=sym_brac>}</h->Word</code>,</li>
  <li><code>Combined<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>N</h-><h- data-h=sym_brac>{</h->NO-BREAK SPACE<h- data-h=sym_brac>}</h->Word</code>, or</li>
  <li><code>Combined<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>U</h-><h- data-h=sym_brac>{</h->A0<h- data-h=sym_brac>}</h->Word</code>.</li>
</ul>
</tip-block>
<h3 id=special-blocks><a class=para href=#special-blocks></a>9.5. Special blocks</h3>

<p>Often, the content we write falls into some special category like "example", "note", etc.
COWEL supports a large number of <dfn>special block directives</dfn>,
which wrap their content in a block, with background color, borders, etc.
</p>
<p>The input to all special block directives is an HTML context,
they all convert their arguments to HTML attributes,
and they all display as block content.
</p>
<h4 id=dir-Babstract><a class=para href=#dir-Babstract></a>9.5.1. <code><h- data-h=mk_tag>\Babstract</h-></code> โ Abstract blocks</h4>

<abstract-block><p><intro-></intro-> 
Abstracts provide a summary of the document.
</p></abstract-block>

<h4 id=dir-Bquote><a class=para href=#dir-Bquote></a>9.5.2. <code><h- data-h=mk_tag>\Bquote</h-></code> โ Quote blocks</h4>

<p>The <code><h- data-h=mk_tag>\blockquote</h-></code> directive directly corresponds to the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>blockquote</h-><h- data-h=sym_punc>&gt;</h-></code> element.
</p>
<blockquote>
<p>Quotes blocks or "block quotes" display quoted text.
</p></blockquote>

<h4 id=dir-blockquote><a class=para href=#dir-blockquote></a>9.5.3. <code><h- data-h=mk_tag>\blockquote</h-></code> โ Alias for <code><h- data-h=mk_tag>\Bquote</h-></code></h4>

<p>The <code><h- data-h=mk_tag>\blockquote</h-></code> directive is equivalent to the <code><h- data-h=mk_tag>\Bquote</h-></code> directive.
</p>
<h4 id=dir-Bug><a class=para href=#dir-Bug></a>9.5.4. <code><h- data-h=mk_tag>\Bug</h-></code> โ Bug blocks</h4>

<bug-block><p><intro-></intro-> 
A bug block contains the description of a bug.
This often includes a code block which demonstrates how to reproduce the bug.
</p></bug-block>

<h4 id=dir-Bdecision><a class=para href=#dir-Bdecision></a>9.5.5. <code><h- data-h=mk_tag>\Bdecision</h-></code> โ Decision blocks</h4>

<decision-block><p><intro-></intro-> 
A decision block indicates that a decision needs to be made.
</p></decision-block>

<h4 id=dir-Bdel><a class=para href=#dir-Bdel></a>9.5.6. <code><h- data-h=mk_tag>\Bdel</h-></code> โ Deletion blocks</h4>

<del-block>
<p>A deletion block acts as a wrapper for a large amount of deleted content.
It is typically used when individual <code><h- data-h=mk_tag>\del</h-></code> directives would be too tedious to use.
</p></del-block>

<h4 id=dir-Bdetails><a class=para href=#dir-Bdetails></a>9.5.7. <code><h- data-h=mk_tag>\Bdetails</h-></code> โ Details blocks aka spoilers</h4>

<p>The <code><h- data-h=mk_tag>\Bdetails</h-></code> directive directly corresponds to the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>details</h-><h- data-h=sym_punc>&gt;</h-></code> element.
Within <code><h- data-h=mk_tag>\Bdetails</h-></code>,
the <code><h- data-h=mk_tag>\summary</h-></code> directive can be used to specify <dfn>summary text</dfn>.
</p>
<details>
<summary>This is a summary. Click to open!</summary>
A details block contains details which need to be revealed by the user.
This is also referred to as "spoiler".
</details>

<h4 id=dir-details><a class=para href=#dir-details></a>9.5.8. <code><h- data-h=mk_tag>\details</h-></code> โ Alias for <code><h- data-h=mk_tag>\Bdetails</h-></code></h4>

<p>The <code><h- data-h=mk_tag>\details</h-></code> directive is equivalent to the <code><h- data-h=mk_tag>\Bdetails</h-></code> directive.
</p>
<h4 id=dir-Bdiff><a class=para href=#dir-Bdiff></a>9.5.9. <code><h- data-h=mk_tag>\Bdiff</h-></code> โ Difference blocks</h4>

<diff-block>
<p>A difference block contains changes,
where some content within is typically <del>deleted</del> or <ins>inserted</ins>.
</p></diff-block>

<h4 id=dir-Bex><a class=para href=#dir-Bex></a>9.5.10. <code><h- data-h=mk_tag>\Bex</h-></code> โ Example blocks</h4>

<example-block><p><intro-></intro-> 
An example block contains examples.
</p></example-block>

<h4 id=dir-Bins><a class=para href=#dir-Bins></a>9.5.11. <code><h- data-h=mk_tag>\Bins</h-></code> โ Insertion blocks</h4>

<ins-block>
<p>An insertion block acts as a wrapper for a large amount of inserted content.
It is typically used when individual <code><h- data-h=mk_tag>\ins</h-></code> directives would be too tedious to use.
</p></ins-block>

<h4 id=dir-Bimp><a class=para href=#dir-Bimp></a>9.5.12. <code><h- data-h=mk_tag>\Bimp</h-></code> โ Important blocks</h4>

<important-block><p><intro-></intro-> 
Important blocks contain especially important information.
</p></important-block>

<h4 id=dir-Bnote><a class=para href=#dir-Bnote></a>9.5.13. <code><h- data-h=mk_tag>\Bnote</h-></code> โ Note blocks</h4>

<note-block><p><intro-></intro-> 
Note blocks contain less important information,
which can often be skipped over by readers.
</p></note-block>

<h4 id=dir-Btip><a class=para href=#dir-Btip></a>9.5.14. <code><h- data-h=mk_tag>\Btip</h-></code> โ Tip blocks</h4>

<tip-block><p><intro-></intro-> 
Tip blocks contain useful advice.
</p></tip-block>

<h4 id=dir-Btodo><a class=para href=#dir-Btodo></a>9.5.15. <code><h- data-h=mk_tag>\Btodo</h-></code> โ TODO blocks</h4>

<todo-block><p><intro-></intro-> 
TODO blocks contain actions that remain to be done.
They may indicate that a part of a project is incomplete.
</p></todo-block>

<h4 id=dir-Bwarn><a class=para href=#dir-Bwarn></a>9.5.16. <code><h- data-h=mk_tag>\Bwarn</h-></code> โ Warning blocks</h4>

<warning-block><p><intro-></intro-> 
Warning blocks warn the reader of some hazard or potential mistake.
</p></warning-block>
<h3 id=lists><a class=para href=#lists></a>9.6. Lists</h3>

<h4 id=dir-ul><a class=para href=#dir-ul></a>9.6.1. <code><h- data-h=mk_tag>\ul</h-></code> โ Unordered lists</h4>

<p>The <code><h- data-h=mk_tag>\ul</h-></code> directive corresponds to the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>ul</h-><h- data-h=sym_punc>&gt;</h-></code> element,
and produces an unordered list.
</p>
<h4 id=dir-ol><a class=para href=#dir-ol></a>9.6.2. <code><h- data-h=mk_tag>\ol</h-></code> โ Ordered lists</h4>

<p>The <code><h- data-h=mk_tag>\ol</h-></code> directive corresponds to the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>ol</h-><h- data-h=sym_punc>&gt;</h-></code> element,
and produces an ordered list.
</p>
<h4 id=dir-li><a class=para href=#dir-li></a>9.6.3. <code><h- data-h=mk_tag>\li</h-></code> โ List items</h4>

<p>The <code><h- data-h=mk_tag>\li</h-></code> directive corresponds to the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>li</h-><h- data-h=sym_punc>&gt;</h-></code> element,
and produces a list item with <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>ul</h-><h- data-h=sym_punc>&gt;</h-></code> or <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>ol</h-><h- data-h=sym_punc>&gt;</h-></code>.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\ul</h-><h- data-h=sym_brac>{</h->
    <h- data-h=mk_tag>\li</h-><h- data-h=sym_brac>{</h->first bullet<h- data-h=sym_brac>}</h->
    <h- data-h=mk_tag>\li</h-><h- data-h=sym_brac>{</h->second bullet<h- data-h=sym_brac>}</h->
<h- data-h=sym_brac>}</h->
<h- data-h=mk_tag>\hr</h->
<h- data-h=mk_tag>\ol</h-><h- data-h=sym_brac>{</h->
    <h- data-h=mk_tag>\li</h-><h- data-h=sym_brac>{</h->first bullet<h- data-h=sym_brac>}</h->
    <h- data-h=mk_tag>\li</h-><h- data-h=sym_brac>{</h->second bullet<h- data-h=sym_brac>}</h->
<h- data-h=sym_brac>}</h-></code-block>
<p>This renders as:
</p><ul>
    <li>first bullet</li>
    <li>second bullet</li>
</ul>
<hr/>
<ol>
    <li>first bullet</li>
    <li>second bullet</li>
</ol>
</example-block>

<h4 id=dir-item><a class=para href=#dir-item></a>9.6.4. <code><h- data-h=mk_tag>\item</h-></code> โ List item pseudo-directive</h4>

<warning-block><p><intro-></intro-> 
This directive is deprecated and will be removed in a future version.
</p></warning-block>

<p>Within <code><h- data-h=mk_tag>\ul</h-></code> and <code><h- data-h=mk_tag>\ol</h-></code>,
the <code><h- data-h=mk_tag>\item</h-></code> pseudo-directive can also be used instead of <code><h- data-h=mk_tag>\li</h-></code>.
</p>
<h4 id=dir-dl><a class=para href=#dir-dl></a>9.6.5. <code><h- data-h=mk_tag>\dl</h-></code> โ Definition lists</h4>

<p>The <code><h- data-h=mk_tag>\dl</h-></code> directive corresponds to the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>dl</h-><h- data-h=sym_punc>&gt;</h-></code> element,
and produces a definition list.
Within that list, you can use
</p><ul>
<li><code><h- data-h=mk_tag>\dt</h-></code> for <dfn>definition terms</dfn>, and</li>
<li><code><h- data-h=mk_tag>\dd</h-></code> for <dfn>definition descriptions</dfn>.</li>
</ul>

<h3 id=tables><a class=para href=#tables></a>9.7. Tables</h3>

<p>Tables are simply produced by using the
<code><h- data-h=mk_tag>\table</h-></code>, <code><h- data-h=mk_tag>\thead</h-></code>, <code><h- data-h=mk_tag>\tbody</h-></code>, <code><h- data-h=mk_tag>\tfoot</h-></code>,
<code><h- data-h=mk_tag>\tr</h-></code>, <code><h- data-h=mk_tag>\th</h-></code>, <code><h- data-h=mk_tag>\td</h-></code>,
<code><h- data-h=mk_tag>\colgroup</h-></code>, <code><h- data-h=mk_tag>\col</h-></code>,
and <code><h- data-h=mk_tag>\caption</h-></code> directives to
produce the corresponding HTML tags with the same name.
</p>
<tip-block><p><intro-></intro-> 
To perform advanced styling,
like controlling alignment within columns,
use a <code><h- data-h=mk_tag>\style</h-></code> directive.
</p></tip-block>

<h3 id=headings><a class=para href=#headings></a>9.8. Headings</h3>

<p>Headings can be produced using the
<code><h- data-h=mk_tag>\h1</h-></code>, <code><h- data-h=mk_tag>\h2</h-></code>, <code><h- data-h=mk_tag>\h3</h-></code>,
<code><h- data-h=mk_tag>\h4</h-></code>, <code><h- data-h=mk_tag>\h5</h-></code>, and <code><h- data-h=mk_tag>\h6</h-></code> directives
to produce the corresponding HTML tags with the same name.
</p>
<p>Headings take a <tt-><h- data-h=mk_attr>listed</h-></tt-> argument, which is a yes/no plaintext argument.
Unless its value is <tt->no</tt->, headings are numbered and added to the table of contents
(<a href=#dir-make_contents>ยง9.8.1. <code><h- data-h=mk_tag>\make_contents</h-></code> โ Make table of contents</a>) automatically.
</p>
<p>Headings also take a <tt-><h- data-h=mk_attr>show_number</h-></tt-> argument, which is a yes/no plaintext argument.
Unless this is <tt->no</tt->,
the heading number will be included in the title, in the format <tt->1.2.3. Title</tt->.
However, even if <tt-><h- data-h=mk_attr>show_number</h-></tt-> is <tt->no</tt->,
the number heading is internally numbered as usual,
and its number can be seen in the table of contents.
</p>
<p>Other arguments to these headings are converted into attributes of the corresponding HTML element.
An <tt-><h- data-h=mk_attr>id</h-></tt-> argument can be provided explicitly.
</p>
<p>If none is provided, an <tt-><h- data-h=mk_attr>id</h-></tt-> is synthesized from the content within the heading.
</p>
<tip-block><p><intro-></intro-> 
Headings can be referenced using the <code><h- data-h=mk_tag>\ref</h-></code> directive:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>h2</h-><h- data-h=sym_brac>{</h->Heading with synthesized id<h- data-h=sym_brac>}</h->
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>h2</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>id</h-><h- data-h=sym_punc>=</h-><h- data-h=str>xyz</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->Heading with manual id<h- data-h=sym_brac>}</h->
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>comment</h-><h- data-h=sym_brac>{</h->These can be referenced as follows<h- data-h=sym_brac>}</h->
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>ref</h-><h- data-h=sym_par>(</h->#heading-with-synthesized-id<h- data-h=sym_par>)</h->
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>ref</h-><h- data-h=sym_par>(</h->#xzy<h- data-h=sym_par>)</h-></code-block>
</tip-block>

<h4 id=dir-make_contents><a class=para href=#dir-make_contents></a>9.8.1. <code><h- data-h=mk_tag>\make_contents</h-></code> โ Make table of contents</h4>

<p>The <code><h- data-h=mk_tag>\make_contents</h-></code> directive generates the table of contents,
which is comprised of all the headings within the document.
It takes no arguments and its content is ignored.
It displays as a block.
</p>
<p>The table of contents is is populated by headings (<a href=#headings>ยง9.8. Headings</a>)
as the document is processed.
</p>
<tip-block><p><intro-></intro-> 
Since the table of contents should usually not be listed within itself,
an unlisted heading may be used:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>h2</h-><h- data-h=sym_par>(</h-><h- data-h=mk_attr>listed</h-><h- data-h=sym_punc>=</h-><h- data-h=str>no</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->Contents<h- data-h=sym_brac>}</h->
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>make_contents</h-></code-block>
<p>A similar effect can be achieved using
<code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_html_element</h->[h2]</code> (<a href=#dir-cowel_html_element>ยง8.3.1. <code><h- data-h=mk_tag>\cowel_html_element</h-></code> โ HTML element</a>).
However, using <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>cowel_html_element</h->[h2]</code>
will also not emit a link icon in the gutter,
and it will not synthesize an <tt-><h- data-h=mk_attr>id</h-></tt-> for that heading.
</p></tip-block>

<note-block><p><intro-></intro-> 
The underlying contents can be obtained with <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>here</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>std.contents</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-></code>.
<code><h- data-h=mk_tag>\make_contents</h-></code> additionally wraps those contents in HTML elements to
chang their visual appearance.
</p></note-block>

<h3 id=bibliography><a class=para href=#bibliography></a>9.9. Bibliography</h3>

<p>In technical writing it is common for documents to reference other papers,
and it is expected that references are properly cited.
To support this,
</p>
<p>COWEL provides directives for adding bibliography entries,
and for generating a bibliography automatically.
</p>
<h4 id=dir-bib><a class=para href=#dir-bib></a>9.9.1. <code><h- data-h=mk_tag>\bib</h-></code> โ Add bibliography entry</h4>

<p>The <code><h- data-h=mk_tag>\bib</h-></code> directive adds a single entry to the bibliography.
Its content is ignored, and it displays as a meta directive.
</p>
<p>It has a number of parameters,
each of which is a plaintext context:
</p>
<dl>
<dt><tt-><h- data-h=mk_attr>id</h-></tt-></dt>
<dd>
The identifier of the bibliography entry.
This can later be referenced using <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>ref</h-><h- data-h=sym_par>(</h-><h- data-h=str>id</h-><h- data-h=sym_par>)</h-></code>.
</dd>

<dt><tt-><h- data-h=mk_attr>author</h-></tt-></dt>
<dd>
The name of the author(s).
This is in no particular format, and if you want to provide multiple authors,
you can do so via a comma-separated list here.
</dd>

<dt><tt-><h- data-h=mk_attr>title</h-></tt-></dt>
<dd>The title of the cited work.</dd>

<dt><tt-><h- data-h=mk_attr>date</h-></tt-></dt>
<dd>
The date of publication.
No particular format is enforced; this is simply a string,
so you can choose some local format.
</dd>

<dt><tt-><h- data-h=mk_attr>publisher</h-></tt-></dt>
<dd>The name of the publisher.</dd>

<dt><tt-><h- data-h=mk_attr>link</h-></tt-></dt>
<dd>
The primary link to the document.
This should typically be a short link because it is copied into each <code><h- data-h=mk_tag>\ref</h-></code>
to the bibliography entry.
</dd>

<dt><tt-><h- data-h=mk_attr>long-link</h-></tt-></dt>
<dd>
A "long link" to the document.
If present, this will be rendered within the bibliography,
and it is typically meant to be a semantic or more stable link than the <tt-><h- data-h=mk_attr>link</h-></tt->.
You can also think of it as a "link for pretty printing".
</dd>

<dt><tt-><h- data-h=mk_attr>issue-link</h-></tt-></dt>
<dd>
A link to issue tracking for the document.
For example, in WG21 circles, this may be a link to the GitHub issue where a paper is tracked.
</dd>
</dl>

<p>Every argument except the <tt-><h- data-h=mk_attr>id</h-></tt-> is optional,
although you will hardly get meaningful bibliography output if only the <tt-><h- data-h=mk_attr>id</h-></tt-> is specified.
</p>

<h4 id=dir-make_bib><a class=para href=#dir-make_bib></a>9.9.2. <code><h- data-h=mk_tag>\make_bib</h-></code> โ Generate bibliography</h4>

<p>The <code><h- data-h=mk_tag>\make_bib</h-></code> directive generates a bibliography.
This is typically done towards the bottom of the document, but can be done anywhere.
</p>
<p>It takes no arguments, its content is ignored,
and it displays as a block.
</p>
<p>The <code><h- data-h=mk_tag>\make_bib</h-></code> directive is populated by uses of <code><h- data-h=mk_tag>\bib</h-></code> directives in order of use.
That is, the bibliography is not automatically sorted for you;
the order in which <code><h- data-h=mk_tag>\bib</h-></code> directives are used is also the order in which the bibliography
entries are generated.
</p>
<note-block><p><intro-></intro-> 
Similar to <code><h- data-h=mk_tag>\make_contents</h-></code>,
it is a wrapper for the underlying <tt->std.bib</tt-> section.
</p></note-block>
<h3 id=references><a class=para href=#references></a>9.10. References</h3>

<h4 id=dir-ref><a class=para href=#dir-ref></a>9.10.1. <code><h- data-h=mk_tag>\ref</h-></code> โ References</h4>

<p>The <code><h- data-h=mk_tag>\ref</h-></code> directive takes a single <tt->to</tt-> argument,
which can be a URL, anchor, or something else.
It produces an <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>a</h-><h- data-h=sym_punc>&gt;</h-></code> tag with some content inside.
</p>
<p>The content is an HTML context, and is what actually gets displayed.
If no content is provided, it can be synthesized from the following types of references:
</p>
<ul>
<li><tt->mailto</tt-> URLs (e-mail addresses)</li>
<li><tt->tel</tt-> URLs (telephone numbers)</li>
<li><tt->http</tt-> and <tt->https</tt-> URLs</li>
<li>Anchors (<tt->#id</tt->) for some heading in the document</li>
<li>Anything defined in the bibliography using <code><h- data-h=mk_tag>\bib</h-></code></li>
</ul>

<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>ref</h-><h- data-h=sym_par>(</h-><h- data-h=str>mail</h->:john@us.gov<h- data-h=sym_par>)</h-></code-block>
<p>HTML output (<code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>a</h-><h- data-h=sym_punc>&gt;</h-></code> tag may have additional attributes):
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>a</h-> <h- data-h=mk_attr>href</h-><h- data-h=sym_punc>=</h-><h- data-h=str>mail:john@us.gov</h-><h- data-h=sym_punc>&gt;</h->john@us.gov<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>a</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>

<example-block><p><intro-></intro-> 
C++ standard draft links can be synthesized into human-readable descriptions.
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>ref</h-><h- data-h=sym_par>(</h-><h- data-h=str>https</h->://eel.is/c++draft/expr#1<h- data-h=sym_par>)</h-></code-block>
<p>This renders as:
</p><div class=indent>
<a href=https://eel.is/c++draft/expr#1>[expr] paragraph 1</a>
</div>
</example-block>

<h4 id=dir-mail><a class=para href=#dir-mail></a>9.10.2. <code><h- data-h=mk_tag>\mail</h-></code> โ E-Mail addresses</h4>

<p>A <code><h- data-h=mk_tag>\mail</h-></code> directive behaves the same <code><h- data-h=mk_tag>\ref</h-></code> directive that is given a <tt->mailto</tt-> URL.
However, the input is provided as content instead of an argument,
and the displayed text cannot be customized.
</p>
<example-block><p><intro-></intro-> 
The following two lines produce the same output:
</p><code-block>Please contact <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>mail</h-><h- data-h=sym_brac>{</h->john@us.gov<h- data-h=sym_brac>}</h->.
Please contact <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>ref</h-><h- data-h=sym_par>(</h-><h- data-h=str>mailto</h->:john@us.gov<h- data-h=sym_par>)</h->.</code-block>
</example-block>

<h4 id=dir-tel><a class=para href=#dir-tel></a>9.10.3. <code><h- data-h=mk_tag>\tel</h-></code> โ Telephone numbers</h4>

<p>A <code><h- data-h=mk_tag>\tel</h-></code> directive behaves the same <code><h- data-h=mk_tag>\ref</h-></code> directive that is given a <tt->tel</tt-> URL.
However, the input is provided as content instead of an argument,
and the displayed text cannot be customized.
</p>
<example-block><p><intro-></intro-> 
The following two lines produce the same output:
</p><code-block>Please contact <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>tel</h-><h- data-h=sym_brac>{</h->+1234<h- data-h=sym_brac>}</h->.
Please contact <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>ref</h-><h- data-h=sym_par>(</h-><h- data-h=str>tel</h->:+1234<h- data-h=sym_par>)</h->.</code-block>
</example-block>
<h3 id=foreign-languages><a class=para href=#foreign-languages></a>9.11. Foreign languages</h3>

<h4 id=dir-script><a class=para href=#dir-script></a>9.11.1. <code><h- data-h=mk_tag>\script</h-></code> โ JavaScript blocks</h4>

<p>The content of a <code><h- data-h=mk_tag>\script</h-></code> directive is a plaintext context,
where the input is treated as JavaScript code
and surrounded in <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>script</h-><h- data-h=sym_punc>&gt;</h-><h- data-h=cmt_dlim>/*</h-><h- data-h=cmt>...</h-><h- data-h=cmt_dlim>*/</h-><h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>script</h-><h- data-h=sym_punc>&gt;</h-></code> tags.
</p>
<p><code><h- data-h=mk_tag>\script</h-></code> displays as meta content (like <code><h- data-h=mk_tag>\comment</h-></code>).
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>script</h-><h- data-h=sym_brac>{</h->
console.log("hello");
<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>script</h-><h- data-h=sym_punc>&gt;</h->
<h- data-h=name>console</h-><h- data-h=sym_op>.</h-><h- data-h=name>log</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>hello</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_punc>;</h->
<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>script</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>

<h4 id=dir-noscript><a class=para href=#dir-noscript></a>9.11.2. <code><h- data-h=mk_tag>\noscript</h-></code> โ No-JavaScript content</h4>

<p>The <code><h- data-h=mk_tag>\noscript</h-></code> directive corresponds to the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>noscript</h-><h- data-h=sym_punc>&gt;</h-></code> element.
Its content is an HTML context,
and will only be shown by the browser when JavaScript is disabled.
</p>
<h4 id=dir-style><a class=para href=#dir-style></a>9.11.3. <code><h- data-h=mk_tag>\style</h-></code> โ CSS blocks</h4>

<p>The content of a <code><h- data-h=mk_tag>\style</h-></code> directive is a plaintext context,
where the input is treated as JavaScript code and surrounded in <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>style</h-><h- data-h=sym_punc>&gt;</h-><h- data-h=cmt_dlim>/*</h-><h- data-h=cmt>...</h-><h- data-h=cmt_dlim>*/</h-><h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>style</h-><h- data-h=sym_punc>&gt;</h-></code> tags.
</p>
<p><code><h- data-h=mk_tag>\style</h-></code> displays as meta content (like <code><h- data-h=mk_tag>\comment</h-></code>).
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>style</h-><h- data-h=sym_brac>{</h->
body { color: red; }
<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>style</h-><h- data-h=sym_punc>&gt;</h->
<h- data-h=mk_tag>body</h-> <h- data-h=sym_brac>{</h-> <h- data-h=mk_attr>color</h-><h- data-h=sym_punc>:</h-> <h- data-h=name>red</h-><h- data-h=sym_punc>;</h-> <h- data-h=sym_brac>}</h->
<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>style</h-><h- data-h=sym_punc>&gt;</h-></code-block>
</example-block>
<h3 id=sections><a class=para href=#sections></a>9.12. Sections</h3>

<p>Often, you want to produce content in one place,
but have it display in another place within the document.
A classic example is collecting headings automatically in a table of contents,
or copying the content of a heading into a preview when referenced by <code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>ref</h-><h- data-h=sym_par>(</h->#id<h- data-h=sym_par>)</h-></code>.
</p>
<h4 id=dir-there><a class=para href=#dir-there></a>9.12.1. <code><h- data-h=mk_tag>\there</h-></code> โ Append content to section</h4>

<p>The <code><h- data-h=mk_tag>\there</h-></code> directive displays as meta content.
Basically, it stashes away its input content (which is an HTML context) somewhere else.
</p>
<p>It takes a single <tt->section</tt-> argument which specifies the name of the section.
The <tt->section</tt-> argument is a plaintext context.
</p>
<p>By default, all document content is placed within a <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>main</h-><h- data-h=sym_punc>&gt;</h-></code> element,
inside <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>body</h-><h- data-h=sym_punc>&gt;</h-></code>, inside <code>html</code>.
<code><h- data-h=mk_tag>\there</h-></code> allows you to write outside of the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>main</h-><h- data-h=sym_punc>&gt;</h-></code> element:
</p>
<ul>
<li>
<code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>there</h-><h- data-h=sym_par>(</h-><h- data-h=str>std</h-><h- data-h=err>.head</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->text<h- data-h=sym_brac>}</h-></code> will write <code>text</code>
inside of the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>head</h-><h- data-h=sym_punc>&gt;</h-></code> element (following auto-generated content).
</li>
<li>
<code><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>there</h-><h- data-h=sym_par>(</h-><h- data-h=str>std</h-><h- data-h=err>.body</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->text<h- data-h=sym_brac>}</h-></code> will write <code>text</code>
inside of the <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>body</h-><h- data-h=sym_punc>&gt;</h-></code> element (following <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>main</h-><h- data-h=sym_punc>&gt;</h-></code>
and other automatically inserted elements).
</li>
</ul>

<tip-block><p><intro-></intro-> 
You can change the title of the document as follows:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>there</h-><h- data-h=sym_par>(</h-><h- data-h=str_dlim>"</h-><h- data-h=str>std.head</h-><h- data-h=str_dlim>"</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>html_title</h-><h- data-h=sym_brac>{</h->This is the document title!<h- data-h=sym_brac>}</h->
<h- data-h=sym_brac>}</h-></code-block>
</tip-block>

<h4 id=dir-here><a class=para href=#dir-here></a>9.12.2. <code><h- data-h=mk_tag>\here</h-></code> โ Copy section content</h4>

<p>The <code><h- data-h=mk_tag>\here</h-></code> directive inserts the content from another section at its location.
It displays as inline content.
</p>
<p>It takes a single <tt->section</tt-> argument which specifies the name of the section.
The <tt->section</tt-> argument is a plaintext context.
</p>
<p>All references produced by <code><h- data-h=mk_tag>\here</h-></code> are resolved in a post-processing step,
which allows forward-references.
</p>
<example-block><p><intro-></intro-> 
COWEL markup:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>there</h-><h- data-h=sym_par>(</h-><h- data-h=str>sec</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->before/<h- data-h=sym_brac>}</h->
(<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>here</h-><h- data-h=sym_par>(</h-><h- data-h=str>sec</h-><h- data-h=sym_par>)</h->)
<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>there</h-><h- data-h=sym_par>(</h-><h- data-h=str>sec</h-><h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h->/after<h- data-h=sym_brac>}</h-></code-block>
<p>Generated HTML:
</p><code-block>(before//after)</code-block>
</example-block>

<h4 id=dir-hereblock><a class=para href=#dir-hereblock></a>9.12.3. <code><h- data-h=mk_tag>\hereblock</h-></code> โ Copy section content in block</h4>

<p>The <code><h- data-h=mk_tag>\hereblock</h-></code> directive functions exactly like the <code><h- data-h=mk_tag>\here</h-></code> directive,
but displays as block content instead of inline content.
</p><h3 id=miscellaneous><a class=para href=#miscellaneous></a>9.13. Miscellaneous</h3>

<h4 id=dir-div><a class=para href=#dir-div></a>9.13.1. <code><h- data-h=mk_tag>\div</h-></code> โ Content division</h4>

<p>The <code><h- data-h=mk_tag>\div</h-></code> directive surrounds its contents in <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>div</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>div</h-><h- data-h=sym_punc>&gt;</h-></code>
tags.
It displays as a block, and its content is an HTML context.
<code><h- data-h=mk_tag>\div</h-></code>'s named arguments are turned into HTML attributes.
</p>
<h4 id=dir-trim><a class=para href=#dir-trim></a>9.13.2. <code><h- data-h=mk_tag>\trim</h-></code> โ Trim input</h4>

<p>The content of a <code><h- data-h=mk_tag>\text</h-></code> directive is an HTML context
(<a href=#contexts-and-output>ยง5.1. Content policies</a>).
Its arguments are ignored.
<code><h- data-h=mk_tag>\text</h-></code> is a formatting directive.
</p>
<p>The process of <dfn>trimming</dfn> eliminates leading and trailing whitespace in the input,
at the COWEL source level.
</p>
<example-block><p><intro-></intro-> 
</p><code-block>Every<h- data-h=mk_tag>\trim</h-><h- data-h=sym_brac>{</h-> day<h- data-h=sym_brac>}</h-></code-block>
<p>This renders as:
</p><div class=indent>
Everyday
</div>
</example-block>

<tip-block><p><intro-></intro-> 
<code><h- data-h=mk_tag>\trim</h-></code> is primarily useful inside of macros.
We might not want to space-separate content if some of it is empty.
For example, we could define a <code><h- data-h=mk_tag>\Note</h-></code> macro
where the user can <em>optionally</em> provide a number for that note:
</p><code-block><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>macro</h-><h- data-h=sym_par>(</h->\Note<h- data-h=sym_par>)</h-><h- data-h=sym_brac>{</h-><h- data-h=mk_tag>\</h-><h- data-h=mk_tag>trim</h-><h- data-h=sym_brac>{</h->Note <h- data-h=mk_tag>\</h-><h- data-h=mk_tag>put</h-><h- data-h=sym_brac>}</h->:<h- data-h=sym_brac>}</h->

<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>Note</h-> Something something.

<h- data-h=mk_tag>\</h-><h- data-h=mk_tag>Note</h-><h- data-h=sym_brac>{</h->1<h- data-h=sym_brac>}</h-> Something else.</code-block>
<p>This renders as:
</p><div class=indent>
<p>Note: Something something.
</p>
<p>Note 1: Something else.
</p></div>
<p>Notice that because <code><h- data-h=mk_tag>\put</h-></code> expands to no content,
the trailing space after <code>Note</code> is eliminated.
If it wasn't eliminated, we would end up with
<code><h- data-h=sym_brac>{</h->Note :<h- data-h=sym_brac>}</h-></code>,
but there should never be a space before the colon.
</p></tip-block>

<h4 id=dir-p><a class=para href=#dir-p></a>9.13.3. <code><h- data-h=mk_tag>\p</h-></code> โ Paragraphs</h4>

<p>The <code><h- data-h=mk_tag>\p</h-></code> directive surrounds its content in <code><h- data-h=sym_punc>&lt;</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h->...<h- data-h=sym_punc>&lt;/</h-><h- data-h=mk_tag>p</h-><h- data-h=sym_punc>&gt;</h-></code> tags.
</p></main></body>
</html>
